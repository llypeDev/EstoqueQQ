function I2(d,a){for(var l=0;l<a.length;l++){const h=a[l];if(typeof h!="string"&&!Array.isArray(h)){for(const x in h)if(x!=="default"&&!(x in d)){const g=Object.getOwnPropertyDescriptor(h,x);g&&Object.defineProperty(d,x,g.get?g:{enumerable:!0,get:()=>h[x]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))h(x);new MutationObserver(x=>{for(const g of x)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&h(b)}).observe(document,{childList:!0,subtree:!0});function l(x){const g={};return x.integrity&&(g.integrity=x.integrity),x.referrerPolicy&&(g.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?g.credentials="include":x.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(x){if(x.ep)return;x.ep=!0;const g=l(x);fetch(x.href,g)}})();var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ao(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function lo(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var a=d.default;if(typeof a=="function"){var l=function h(){return this instanceof h?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};l.prototype=a.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(d).forEach(function(h){var x=Object.getOwnPropertyDescriptor(d,h);Object.defineProperty(l,h,x.get?x:{enumerable:!0,get:function(){return d[h]}})}),l}var $h={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function Np(){if(cg)return Wl;cg=1;var d=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(h,x,g){var b=null;if(g!==void 0&&(b=""+g),x.key!==void 0&&(b=""+x.key),"key"in x){g={};for(var A in x)A!=="key"&&(g[A]=x[A])}else g=x;return x=g.ref,{$$typeof:d,type:h,key:b,ref:x!==void 0?x:null,props:g}}return Wl.Fragment=a,Wl.jsx=l,Wl.jsxs=l,Wl}var hg;function Rp(){return hg||(hg=1,$h.exports=Np()),$h.exports}var M=Rp(),ef={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function Ip(){if(fg)return Je;fg=1;var d=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),b=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.iterator;function j(H){return H===null||typeof H!="object"?null:(H=k&&H[k]||H["@@iterator"],typeof H=="function"?H:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,J={};function ae(H,le,ve){this.props=H,this.context=le,this.refs=J,this.updater=ve||F}ae.prototype.isReactComponent={},ae.prototype.setState=function(H,le){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,le,"setState")},ae.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function ue(){}ue.prototype=ae.prototype;function W(H,le,ve){this.props=H,this.context=le,this.refs=J,this.updater=ve||F}var xe=W.prototype=new ue;xe.constructor=W,G(xe,ae.prototype),xe.isPureReactComponent=!0;var Le=Array.isArray;function _e(){}var ee={H:null,A:null,T:null,S:null},Me=Object.prototype.hasOwnProperty;function de(H,le,ve){var Ee=ve.ref;return{$$typeof:d,type:H,key:le,ref:Ee!==void 0?Ee:null,props:ve}}function Hn(H,le){return de(H.type,le,H.props)}function At(H){return typeof H=="object"&&H!==null&&H.$$typeof===d}function Oe(H){var le={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ve){return le[ve]})}var We=/\/+/g;function bt(H,le){return typeof H=="object"&&H!==null&&H.key!=null?Oe(""+H.key):le.toString(36)}function re(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(_e,_e):(H.status="pending",H.then(function(le){H.status==="pending"&&(H.status="fulfilled",H.value=le)},function(le){H.status==="pending"&&(H.status="rejected",H.reason=le)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function te(H,le,ve,Ee,Ve){var pe=typeof H;(pe==="undefined"||pe==="boolean")&&(H=null);var ct=!1;if(H===null)ct=!0;else switch(pe){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(H.$$typeof){case d:case a:ct=!0;break;case N:return ct=H._init,te(ct(H._payload),le,ve,Ee,Ve)}}if(ct)return Ve=Ve(H),ct=Ee===""?"."+bt(H,0):Ee,Le(Ve)?(ve="",ct!=null&&(ve=ct.replace(We,"$&/")+"/"),te(Ve,le,ve,"",function(un){return un})):Ve!=null&&(At(Ve)&&(Ve=Hn(Ve,ve+(Ve.key==null||H&&H.key===Ve.key?"":(""+Ve.key).replace(We,"$&/")+"/")+ct)),le.push(Ve)),1;ct=0;var st=Ee===""?".":Ee+":";if(Le(H))for(var Nt=0;Nt<H.length;Nt++)Ee=H[Nt],pe=st+bt(Ee,Nt),ct+=te(Ee,le,ve,pe,Ve);else if(Nt=j(H),typeof Nt=="function")for(H=Nt.call(H),Nt=0;!(Ee=H.next()).done;)Ee=Ee.value,pe=st+bt(Ee,Nt++),ct+=te(Ee,le,ve,pe,Ve);else if(pe==="object"){if(typeof H.then=="function")return te(re(H),le,ve,Ee,Ve);throw le=String(H),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return ct}function ce(H,le,ve){if(H==null)return H;var Ee=[],Ve=0;return te(H,Ee,"","",function(pe){return le.call(ve,pe,Ve++)}),Ee}function Ue(H){if(H._status===-1){var le=H._result;le=le(),le.then(function(ve){(H._status===0||H._status===-1)&&(H._status=1,H._result=ve)},function(ve){(H._status===0||H._status===-1)&&(H._status=2,H._result=ve)}),H._status===-1&&(H._status=0,H._result=le)}if(H._status===1)return H._result.default;throw H._result}var et=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ot={map:ce,forEach:function(H,le,ve){ce(H,function(){le.apply(this,arguments)},ve)},count:function(H){var le=0;return ce(H,function(){le++}),le},toArray:function(H){return ce(H,function(le){return le})||[]},only:function(H){if(!At(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Je.Activity=R,Je.Children=ot,Je.Component=ae,Je.Fragment=l,Je.Profiler=x,Je.PureComponent=W,Je.StrictMode=h,Je.Suspense=_,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Je.__COMPILER_RUNTIME={__proto__:null,c:function(H){return ee.H.useMemoCache(H)}},Je.cache=function(H){return function(){return H.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(H,le,ve){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Ee=G({},H.props),Ve=H.key;if(le!=null)for(pe in le.key!==void 0&&(Ve=""+le.key),le)!Me.call(le,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&le.ref===void 0||(Ee[pe]=le[pe]);var pe=arguments.length-2;if(pe===1)Ee.children=ve;else if(1<pe){for(var ct=Array(pe),st=0;st<pe;st++)ct[st]=arguments[st+2];Ee.children=ct}return de(H.type,Ve,Ee)},Je.createContext=function(H){return H={$$typeof:b,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:g,_context:H},H},Je.createElement=function(H,le,ve){var Ee,Ve={},pe=null;if(le!=null)for(Ee in le.key!==void 0&&(pe=""+le.key),le)Me.call(le,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ve[Ee]=le[Ee]);var ct=arguments.length-2;if(ct===1)Ve.children=ve;else if(1<ct){for(var st=Array(ct),Nt=0;Nt<ct;Nt++)st[Nt]=arguments[Nt+2];Ve.children=st}if(H&&H.defaultProps)for(Ee in ct=H.defaultProps,ct)Ve[Ee]===void 0&&(Ve[Ee]=ct[Ee]);return de(H,pe,Ve)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(H){return{$$typeof:A,render:H}},Je.isValidElement=At,Je.lazy=function(H){return{$$typeof:N,_payload:{_status:-1,_result:H},_init:Ue}},Je.memo=function(H,le){return{$$typeof:v,type:H,compare:le===void 0?null:le}},Je.startTransition=function(H){var le=ee.T,ve={};ee.T=ve;try{var Ee=H(),Ve=ee.S;Ve!==null&&Ve(ve,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(_e,et)}catch(pe){et(pe)}finally{le!==null&&ve.types!==null&&(le.types=ve.types),ee.T=le}},Je.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Je.use=function(H){return ee.H.use(H)},Je.useActionState=function(H,le,ve){return ee.H.useActionState(H,le,ve)},Je.useCallback=function(H,le){return ee.H.useCallback(H,le)},Je.useContext=function(H){return ee.H.useContext(H)},Je.useDebugValue=function(){},Je.useDeferredValue=function(H,le){return ee.H.useDeferredValue(H,le)},Je.useEffect=function(H,le){return ee.H.useEffect(H,le)},Je.useEffectEvent=function(H){return ee.H.useEffectEvent(H)},Je.useId=function(){return ee.H.useId()},Je.useImperativeHandle=function(H,le,ve){return ee.H.useImperativeHandle(H,le,ve)},Je.useInsertionEffect=function(H,le){return ee.H.useInsertionEffect(H,le)},Je.useLayoutEffect=function(H,le){return ee.H.useLayoutEffect(H,le)},Je.useMemo=function(H,le){return ee.H.useMemo(H,le)},Je.useOptimistic=function(H,le){return ee.H.useOptimistic(H,le)},Je.useReducer=function(H,le,ve){return ee.H.useReducer(H,le,ve)},Je.useRef=function(H){return ee.H.useRef(H)},Je.useState=function(H){return ee.H.useState(H)},Je.useSyncExternalStore=function(H,le,ve){return ee.H.useSyncExternalStore(H,le,ve)},Je.useTransition=function(){return ee.H.useTransition()},Je.version="19.2.1",Je}var dg;function oo(){return dg||(dg=1,ef.exports=Ip()),ef.exports}var it=oo();const Dp=ao(it);var tf={exports:{}},Zl={},nf={exports:{}},rf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function Mp(){return gg||(gg=1,(function(d){function a(te,ce){var Ue=te.length;te.push(ce);e:for(;0<Ue;){var et=Ue-1>>>1,ot=te[et];if(0<x(ot,ce))te[et]=ce,te[Ue]=ot,Ue=et;else break e}}function l(te){return te.length===0?null:te[0]}function h(te){if(te.length===0)return null;var ce=te[0],Ue=te.pop();if(Ue!==ce){te[0]=Ue;e:for(var et=0,ot=te.length,H=ot>>>1;et<H;){var le=2*(et+1)-1,ve=te[le],Ee=le+1,Ve=te[Ee];if(0>x(ve,Ue))Ee<ot&&0>x(Ve,ve)?(te[et]=Ve,te[Ee]=Ue,et=Ee):(te[et]=ve,te[le]=Ue,et=le);else if(Ee<ot&&0>x(Ve,Ue))te[et]=Ve,te[Ee]=Ue,et=Ee;else break e}}return ce}function x(te,ce){var Ue=te.sortIndex-ce.sortIndex;return Ue!==0?Ue:te.id-ce.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;d.unstable_now=function(){return g.now()}}else{var b=Date,A=b.now();d.unstable_now=function(){return b.now()-A}}var _=[],v=[],N=1,R=null,k=3,j=!1,F=!1,G=!1,J=!1,ae=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function xe(te){for(var ce=l(v);ce!==null;){if(ce.callback===null)h(v);else if(ce.startTime<=te)h(v),ce.sortIndex=ce.expirationTime,a(_,ce);else break;ce=l(v)}}function Le(te){if(G=!1,xe(te),!F)if(l(_)!==null)F=!0,_e||(_e=!0,Oe());else{var ce=l(v);ce!==null&&re(Le,ce.startTime-te)}}var _e=!1,ee=-1,Me=5,de=-1;function Hn(){return J?!0:!(d.unstable_now()-de<Me)}function At(){if(J=!1,_e){var te=d.unstable_now();de=te;var ce=!0;try{e:{F=!1,G&&(G=!1,ue(ee),ee=-1),j=!0;var Ue=k;try{t:{for(xe(te),R=l(_);R!==null&&!(R.expirationTime>te&&Hn());){var et=R.callback;if(typeof et=="function"){R.callback=null,k=R.priorityLevel;var ot=et(R.expirationTime<=te);if(te=d.unstable_now(),typeof ot=="function"){R.callback=ot,xe(te),ce=!0;break t}R===l(_)&&h(_),xe(te)}else h(_);R=l(_)}if(R!==null)ce=!0;else{var H=l(v);H!==null&&re(Le,H.startTime-te),ce=!1}}break e}finally{R=null,k=Ue,j=!1}ce=void 0}}finally{ce?Oe():_e=!1}}}var Oe;if(typeof W=="function")Oe=function(){W(At)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,bt=We.port2;We.port1.onmessage=At,Oe=function(){bt.postMessage(null)}}else Oe=function(){ae(At,0)};function re(te,ce){ee=ae(function(){te(d.unstable_now())},ce)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(te){te.callback=null},d.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<te?Math.floor(1e3/te):5},d.unstable_getCurrentPriorityLevel=function(){return k},d.unstable_next=function(te){switch(k){case 1:case 2:case 3:var ce=3;break;default:ce=k}var Ue=k;k=ce;try{return te()}finally{k=Ue}},d.unstable_requestPaint=function(){J=!0},d.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ue=k;k=te;try{return ce()}finally{k=Ue}},d.unstable_scheduleCallback=function(te,ce,Ue){var et=d.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?et+Ue:et):Ue=et,te){case 1:var ot=-1;break;case 2:ot=250;break;case 5:ot=1073741823;break;case 4:ot=1e4;break;default:ot=5e3}return ot=Ue+ot,te={id:N++,callback:ce,priorityLevel:te,startTime:Ue,expirationTime:ot,sortIndex:-1},Ue>et?(te.sortIndex=Ue,a(v,te),l(_)===null&&te===l(v)&&(G?(ue(ee),ee=-1):G=!0,re(Le,Ue-et))):(te.sortIndex=ot,a(_,te),F||j||(F=!0,_e||(_e=!0,Oe()))),te},d.unstable_shouldYield=Hn,d.unstable_wrapCallback=function(te){var ce=k;return function(){var Ue=k;k=ce;try{return te.apply(this,arguments)}finally{k=Ue}}}})(rf)),rf}var mg;function Bp(){return mg||(mg=1,nf.exports=Mp()),nf.exports}var sf={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function kp(){if(xg)return $n;xg=1;var d=oo();function a(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var h={d:{f:l,r:function(){throw Error(a(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},x=Symbol.for("react.portal");function g(_,v,N){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:R==null?null:""+R,children:_,containerInfo:v,implementation:N}}var b=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,$n.createPortal=function(_,v){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(a(299));return g(_,v,null,N)},$n.flushSync=function(_){var v=b.T,N=h.p;try{if(b.T=null,h.p=2,_)return _()}finally{b.T=v,h.p=N,h.d.f()}},$n.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,h.d.C(_,v))},$n.prefetchDNS=function(_){typeof _=="string"&&h.d.D(_)},$n.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var N=v.as,R=A(N,v.crossOrigin),k=typeof v.integrity=="string"?v.integrity:void 0,j=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;N==="style"?h.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:R,integrity:k,fetchPriority:j}):N==="script"&&h.d.X(_,{crossOrigin:R,integrity:k,fetchPriority:j,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},$n.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var N=A(v.as,v.crossOrigin);h.d.M(_,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&h.d.M(_)},$n.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var N=v.as,R=A(N,v.crossOrigin);h.d.L(_,N,{crossOrigin:R,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},$n.preloadModule=function(_,v){if(typeof _=="string")if(v){var N=A(v.as,v.crossOrigin);h.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else h.d.m(_)},$n.requestFormReset=function(_){h.d.r(_)},$n.unstable_batchedUpdates=function(_,v){return _(v)},$n.useFormState=function(_,v,N){return b.H.useFormState(_,v,N)},$n.useFormStatus=function(){return b.H.useHostTransitionStatus()},$n.version="19.2.1",$n}var pg;function Lp(){if(pg)return sf.exports;pg=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(a){console.error(a)}}return d(),sf.exports=kp(),sf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function jp(){if(yg)return Zl;yg=1;var d=Bp(),a=oo(),l=Lp();function h(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function b(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function A(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(g(e)!==e)throw Error(h(188))}function v(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(h(188));return n!==e?null:e}for(var s=e,c=n;;){var p=s.return;if(p===null)break;var w=p.alternate;if(w===null){if(c=p.return,c!==null){s=c;continue}break}if(p.child===w.child){for(w=p.child;w;){if(w===s)return _(p),e;if(w===c)return _(p),n;w=w.sibling}throw Error(h(188))}if(s.return!==c.return)s=p,c=w;else{for(var S=!1,D=p.child;D;){if(D===s){S=!0,s=p,c=w;break}if(D===c){S=!0,c=p,s=w;break}D=D.sibling}if(!S){for(D=w.child;D;){if(D===s){S=!0,s=w,c=p;break}if(D===c){S=!0,c=w,s=p;break}D=D.sibling}if(!S)throw Error(h(189))}}if(s.alternate!==c)throw Error(h(190))}if(s.tag!==3)throw Error(h(188));return s.stateNode.current===s?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var R=Object.assign,k=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),W=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Hn=Symbol.for("react.memo_cache_sentinel"),At=Symbol.iterator;function Oe(e){return e===null||typeof e!="object"?null:(e=At&&e[At]||e["@@iterator"],typeof e=="function"?e:null)}var We=Symbol.for("react.client.reference");function bt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===We?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case ae:return"Profiler";case J:return"StrictMode";case Le:return"Suspense";case _e:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case W:return e.displayName||"Context";case ue:return(e._context.displayName||"Context")+".Consumer";case xe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:bt(e.type)||"Memo";case Me:n=e._payload,e=e._init;try{return bt(e(n))}catch{}}return null}var re=Array.isArray,te=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},et=[],ot=-1;function H(e){return{current:e}}function le(e){0>ot||(e.current=et[ot],et[ot]=null,ot--)}function ve(e,n){ot++,et[ot]=e.current,e.current=n}var Ee=H(null),Ve=H(null),pe=H(null),ct=H(null);function st(e,n){switch(ve(pe,n),ve(Ve,e),ve(Ee,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?M1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=M1(n),e=B1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(Ee),ve(Ee,e)}function Nt(){le(Ee),le(Ve),le(pe)}function un(e){e.memoizedState!==null&&ve(ct,e);var n=Ee.current,s=B1(n,e.type);n!==s&&(ve(Ve,e),ve(Ee,s))}function Zt(e){Ve.current===e&&(le(Ee),le(Ve)),ct.current===e&&(le(ct),Vl._currentValue=Ue)}var cn,$e;function rn(e){if(cn===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);cn=n&&n[1]||"",$e=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+e+$e}var Mn=!1;function Er(e,n){if(!e||Mn)return"";Mn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(se){var $=se}Reflect.construct(e,[],fe)}else{try{fe.call()}catch(se){$=se}e.call(fe.prototype)}}else{try{throw Error()}catch(se){$=se}(fe=e())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(se){if(se&&$&&typeof se.stack=="string")return[se.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=c.DetermineComponentFrameRoot(),S=w[0],D=w[1];if(S&&D){var U=S.split(`
`),Q=D.split(`
`);for(p=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(c===U.length||p===Q.length)for(c=U.length-1,p=Q.length-1;1<=c&&0<=p&&U[c]!==Q[p];)p--;for(;1<=c&&0<=p;c--,p--)if(U[c]!==Q[p]){if(c!==1||p!==1)do if(c--,p--,0>p||U[c]!==Q[p]){var oe=`
`+U[c].replace(" at new "," at ");return e.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",e.displayName)),oe}while(1<=c&&0<=p);break}}}finally{Mn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?rn(s):""}function fn(e,n){switch(e.tag){case 26:case 27:case 5:return rn(e.type);case 16:return rn("Lazy");case 13:return e.child!==n&&n!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Er(e.type,!1);case 11:return Er(e.type.render,!1);case 1:return Er(e.type,!0);case 31:return rn("Activity");default:return""}}function ke(e){try{var n="",s=null;do n+=fn(e,s),s=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Xe=Object.prototype.hasOwnProperty,_r=d.unstable_scheduleCallback,Te=d.unstable_cancelCallback,vt=d.unstable_shouldYield,Is=d.unstable_requestPaint,gt=d.unstable_now,Ds=d.unstable_getCurrentPriorityLevel,Jn=d.unstable_ImmediatePriority,Ms=d.unstable_UserBlockingPriority,tr=d.unstable_NormalPriority,Bn=d.unstable_LowPriority,Bs=d.unstable_IdlePriority,Vi=d.log,al=d.unstable_setDisableYieldValue,Ft=null,we=null;function Bt(e){if(typeof Vi=="function"&&al(e),we&&typeof we.setStrictMode=="function")try{we.setStrictMode(Ft,e)}catch{}}var Ze=Math.clz32?Math.clz32:Xi,Gt=Math.log,xi=Math.LN2;function Xi(e){return e>>>=0,e===0?32:31-(Gt(e)/xi|0)|0}var pi=256,ut=262144,cr=4194304;function Ar(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ai(e,n,s){var c=e.pendingLanes;if(c===0)return 0;var p=0,w=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var D=c&134217727;return D!==0?(c=D&~w,c!==0?p=Ar(c):(S&=D,S!==0?p=Ar(S):s||(s=D&~e,s!==0&&(p=Ar(s))))):(D=c&~w,D!==0?p=Ar(D):S!==0?p=Ar(S):s||(s=c&~e,s!==0&&(p=Ar(s)))),p===0?0:n!==0&&n!==p&&(n&w)===0&&(w=p&-p,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:p}function kn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Y(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var e=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),e}function je(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Qe(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rt(e,n,s,c,p,w){var S=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var D=e.entanglements,U=e.expirationTimes,Q=e.hiddenUpdates;for(s=S&~s;0<s;){var oe=31-Ze(s),fe=1<<oe;D[oe]=0,U[oe]=-1;var $=Q[oe];if($!==null)for(Q[oe]=null,oe=0;oe<$.length;oe++){var se=$[oe];se!==null&&(se.lane&=-536870913)}s&=~fe}c!==0&&nr(e,c,0),w!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=w&~(S&~n))}function nr(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Ze(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|s&261930}function Fn(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var c=31-Ze(s),p=1<<c;p&n|e[c]&n&&(e[c]|=n),s&=~p}}function zn(e,n){var s=n&-n;return s=(s&42)!==0?1:sn(s),(s&(e.suspendedLanes|n))!==0?0:s}function sn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Cr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function dn(){var e=ce.p;return e!==0?e:(e=window.event,e===void 0?32:rg(e.type))}function Ae(e,n){var s=ce.p;try{return ce.p=e,n()}finally{ce.p=s}}var bn=Math.random().toString(36).slice(2),hn="__reactFiber$"+bn,It="__reactProps$"+bn,rr="__reactContainer$"+bn,hr="__reactEvents$"+bn,Yi="__reactListeners$"+bn,ir="__reactHandles$"+bn,ks="__reactResources$"+bn,yi="__reactMarker$"+bn;function Gn(e){delete e[hn],delete e[It],delete e[hr],delete e[Yi],delete e[ir]}function Qt(e){var n=e[hn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[rr]||s[hn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=z1(e);e!==null;){if(s=e[hn])return s;e=z1(e)}return n}e=s,s=e.parentNode}return null}function yt(e){if(e=e[hn]||e[rr]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ki(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(h(33))}function sr(e){var n=e[ks];return n||(n=e[ks]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function gn(e){e[yi]=!0}var ge=new Set,ho={};function kt(e,n){Sr(e,n),Sr(e+"Capture",n)}function Sr(e,n){for(ho[e]=n,e=0;e<n.length;e++)ge.add(n[e])}var sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_t={},Et={};function ht(e){return Xe.call(Et,e)?!0:Xe.call(_t,e)?!1:sc.test(e)?Et[e]=!0:(_t[e]=!0,!1)}function Wi(e,n,s){if(ht(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Zi(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function Tr(e,n,s,c){if(c===null)e.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+c)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ac(e,n,s){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,w=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(S){s=""+S,w.call(this,S)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Jt(e){if(!e._valueTracker){var n=Wr(e)?"checked":"value";e._valueTracker=ac(e,n,""+e[n])}}function Zr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),c="";return e&&(c=Wr(e)?e.checked?"true":"false":e.value),e=c,e!==s?(n.setValue(e),!0):!1}function ha(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qi=/[\n"\\]/g;function lt(e){return e.replace(Qi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Cn(e,n,s,c,p,w,S,D){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),n!=null?S==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ct(n)):e.value!==""+Ct(n)&&(e.value=""+Ct(n)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),n!=null?B(e,S,Ct(n)):s!=null?B(e,S,Ct(s)):c!=null&&e.removeAttribute("value"),p==null&&w!=null&&(e.defaultChecked=!!w),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.name=""+Ct(D):e.removeAttribute("name")}function K(e,n,s,c,p,w,S,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){Jt(e);return}s=s!=null?""+Ct(s):"",n=n!=null?""+Ct(n):s,D||n===e.value||(e.value=n),e.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=D?e.checked:!!c,e.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Jt(e)}function B(e,n,s){n==="number"&&ha(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ie(e,n,s,c){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&c&&(e[s].defaultSelected=!0)}else{for(s=""+Ct(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function vn(e,n,s){if(n!=null&&(n=""+Ct(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+Ct(s):""}function ar(e,n,s,c){if(n==null){if(c!=null){if(s!=null)throw Error(h(92));if(re(c)){if(1<c.length)throw Error(h(93));c=c[0]}s=c}s==null&&(s=""),n=s}s=Ct(n),e.defaultValue=s,c=e.textContent,c===s&&c!==""&&c!==null&&(e.value=c),Jt(e)}function Ji(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lr(e,n,s){var c=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,s):typeof s!="number"||s===0||ll.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Pe(e,n,s){if(n!=null&&typeof n!="object")throw Error(h(62));if(e=e.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&s[p]!==c&&lr(e,p,c)}else for(var w in n)n.hasOwnProperty(w)&&lr(e,w,n[w])}function Vt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(e){return lc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function fr(){}var Ls=null;function ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $t=null,Pr=null;function Qr(e){var n=yt(e);if(n&&(e=n.stateNode)){var s=e[It]||null;e:switch(e=n.stateNode,n.type){case"input":if(Cn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+lt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var c=s[n];if(c!==e&&c.form===e.form){var p=c[It]||null;if(!p)throw Error(h(90));Cn(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<s.length;n++)c=s[n],c.form===e.form&&Zr(c)}break e;case"textarea":vn(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Ie(e,!!s.multiple,n,!1)}}}var ze=!1;function go(e,n,s){if(ze)return e(n,s);ze=!0;try{var c=e(n);return c}finally{if(ze=!1,($t!==null||Pr!==null)&&(su(),$t&&(n=$t,e=Pr,Pr=$t=null,Qr(n),e)))for(n=0;n<e.length;n++)Qr(e[n])}}function Ye(e,n){var s=e.stateNode;if(s===null)return null;var c=s[It]||null;if(c===null)return null;s=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(h(231,n,typeof s));return s}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ul=!1;if(Xt)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){ul=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{ul=!1}var Jr=null,$r=null,fa=null;function es(){if(fa)return fa;var e,n=$r,s=n.length,c,p="value"in Jr?Jr.value:Jr.textContent,w=p.length;for(e=0;e<s&&n[e]===p[e];e++);var S=s-e;for(c=1;c<=S&&n[s-c]===p[w-c];c++);return fa=p.slice(e,1<c?1-c:void 0)}function li(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function cl(){return!1}function Sn(e){function n(s,c,p,w,S){this._reactName=s,this._targetInst=p,this.type=c,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(s=e[D],this[D]=s?s(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?oi:cl,this.isPropagationStopped=cl,this}return R(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),n}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ln=Sn(Or),ts=R({},Or,{view:0,detail:0}),mo=Sn(ts),da,hl,js,ga=R({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(da=e.screenX-js.screenX,hl=e.screenY-js.screenY):hl=da=0,js=e),da)},movementY:function(e){return"movementY"in e?e.movementY:hl}}),Dt=Sn(ga),xo=R({},ga,{dataTransfer:0}),ma=Sn(xo),ui=R({},ts,{relatedTarget:0}),fl=Sn(ui),ie=R({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),nt=Sn(ie),jn=R({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xa=Sn(jn),po=R({},Or,{data:0}),yo=Sn(po),oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=dl[e])?!!n[e]:!1}function Us(){return En}var an=R({},ts,{key:function(e){if(e.key){var n=oc[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pa=Sn(an),bi=R({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=Sn(bi),qe=R({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),cc=Sn(qe),Yt=R({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),vi=Sn(Yt),ns=R({},ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hc=Sn(ns),Fr=R({},Or,{newState:0,oldState:0}),gl=Sn(Fr),wo=[9,13,27,32],Ps=Xt&&"CompositionEvent"in window,rs=null;Xt&&"documentMode"in document&&(rs=document.documentMode);var bo=Xt&&"TextEvent"in window&&!rs,vo=Xt&&(!Ps||rs&&8<rs&&11>=rs),Ei=" ",ya=!1;function Eo(e,n){switch(e){case"keyup":return wo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function is(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ss=!1;function ci(e,n){switch(e){case"compositionend":return is(n);case"keypress":return n.which!==32?null:(ya=!0,Ei);case"textInput":return e=n.data,e===Ei&&ya?null:e;default:return null}}function wa(e,n){if(ss)return e==="compositionend"||!Ps&&Eo(e,n)?(e=es(),fa=$r=Jr=null,ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vo&&n.locale!=="ko"?null:n.data;default:return null}}var dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ml(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!dr[e.type]:n==="textarea"}function Nr(e,n,s,c){$t?Pr?Pr.push(c):Pr=[c]:$t=c,n=fu(n,"onChange"),0<n.length&&(s=new Ln("onChange","change",null,s,c),e.push({event:s,listeners:n}))}var Fs=null,_i=null;function fc(e){T1(e,0)}function zs(e){var n=Ki(e);if(Zr(n))return e}function Rr(e,n){if(e==="change")return n}var _o=!1;if(Xt){var qs;if(Xt){var Ai="oninput"in document;if(!Ai){var mt=document.createElement("div");mt.setAttribute("oninput","return;"),Ai=typeof mt.oninput=="function"}qs=Ai}else qs=!1;_o=qs&&(!document.documentMode||9<document.documentMode)}function Hs(){Fs&&(Fs.detachEvent("onpropertychange",T),_i=Fs=null)}function T(e){if(e.propertyName==="value"&&zs(_i)){var n=[];Nr(n,_i,e,ol(e)),go(fc,n)}}function t(e,n,s){e==="focusin"?(Hs(),Fs=n,_i=s,Fs.attachEvent("onpropertychange",T)):e==="focusout"&&Hs()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zs(_i)}function i(e,n){if(e==="click")return zs(n)}function o(e,n){if(e==="input"||e==="change")return zs(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var f=typeof Object.is=="function"?Object.is:u;function m(e,n){if(f(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),c=Object.keys(n);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var p=s[c];if(!Xe.call(n,p)||!f(e[p],n[p]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,n){var s=y(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=n&&c>=n)return{node:s,offset:n-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function C(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?C(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function O(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ha(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ha(e.document)}return n}function I(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var L=Xt&&"documentMode"in document&&11>=document.documentMode,P=null,z=null,X=null,ne=!1;function be(e,n,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ne||P==null||P!==ha(c)||(c=P,"selectionStart"in c&&I(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),X&&m(X,c)||(X=c,c=fu(z,"onSelect"),0<c.length&&(n=new Ln("onSelect","select",null,n,s),e.push({event:n,listeners:c}),n.target=P)))}function ye(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var me={animationend:ye("Animation","AnimationEnd"),animationiteration:ye("Animation","AnimationIteration"),animationstart:ye("Animation","AnimationStart"),transitionrun:ye("Transition","TransitionRun"),transitionstart:ye("Transition","TransitionStart"),transitioncancel:ye("Transition","TransitionCancel"),transitionend:ye("Transition","TransitionEnd")},at={},Ke={};Xt&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete me.animationend.animation,delete me.animationiteration.animation,delete me.animationstart.animation),"TransitionEvent"in window||delete me.transitionend.transition);function mn(e){if(at[e])return at[e];if(!me[e])return e;var n=me[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Ke)return at[e]=n[s];return e}var gr=mn("animationend"),Vn=mn("animationiteration"),jt=mn("animationstart"),Un=mn("transitionrun"),or=mn("transitionstart"),as=mn("transitioncancel"),Ci=mn("transitionend"),Ao=new Map,xl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xl.push("scrollEnd");function ei(e,n){Ao.set(e,n),kt(n,[e])}var Co=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zr=[],ba=0,dc=0;function So(){for(var e=ba,n=dc=ba=0;n<e;){var s=zr[n];zr[n++]=null;var c=zr[n];zr[n++]=null;var p=zr[n];zr[n++]=null;var w=zr[n];if(zr[n++]=null,c!==null&&p!==null){var S=c.pending;S===null?p.next=p:(p.next=S.next,S.next=p),c.pending=p}w!==0&&o0(s,p,w)}}function To(e,n,s,c){zr[ba++]=e,zr[ba++]=n,zr[ba++]=s,zr[ba++]=c,dc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function gc(e,n,s,c){return To(e,n,s,c),Oo(e)}function Gs(e,n){return To(e,null,null,n),Oo(e)}function o0(e,n,s){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s);for(var p=!1,w=e.return;w!==null;)w.childLanes|=s,c=w.alternate,c!==null&&(c.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(p=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,p&&n!==null&&(p=31-Ze(s),e=w.hiddenUpdates,c=e[p],c===null?e[p]=[n]:c.push(n),n.lane=s|536870912),w):null}function Oo(e){if(50<Ul)throw Ul=0,_h=null,Error(h(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var va={};function fx(e,n,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(e,n,s,c){return new fx(e,n,s,c)}function mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Si(e,n){var s=e.alternate;return s===null?(s=Ir(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function u0(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function No(e,n,s,c,p,w){var S=0;if(c=e,typeof e=="function")mc(e)&&(S=1);else if(typeof e=="string")S=pp(e,s,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Ir(31,s,n,p),e.elementType=de,e.lanes=w,e;case G:return Vs(s.children,p,w,n);case J:S=8,p|=24;break;case ae:return e=Ir(12,s,n,p|2),e.elementType=ae,e.lanes=w,e;case Le:return e=Ir(13,s,n,p),e.elementType=Le,e.lanes=w,e;case _e:return e=Ir(19,s,n,p),e.elementType=_e,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:S=10;break e;case ue:S=9;break e;case xe:S=11;break e;case ee:S=14;break e;case Me:S=16,c=null;break e}S=29,s=Error(h(130,e===null?"null":typeof e,"")),c=null}return n=Ir(S,s,n,p),n.elementType=e,n.type=c,n.lanes=w,n}function Vs(e,n,s,c){return e=Ir(7,e,c,n),e.lanes=s,e}function xc(e,n,s){return e=Ir(6,e,null,n),e.lanes=s,e}function c0(e){var n=Ir(18,null,null,0);return n.stateNode=e,n}function pc(e,n,s){return n=Ir(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var h0=new WeakMap;function qr(e,n){if(typeof e=="object"&&e!==null){var s=h0.get(e);return s!==void 0?s:(n={value:e,source:n,stack:ke(n)},h0.set(e,n),n)}return{value:e,source:n,stack:ke(n)}}var Ea=[],_a=0,Ro=null,pl=0,Hr=[],Gr=0,ls=null,hi=1,fi="";function Ti(e,n){Ea[_a++]=pl,Ea[_a++]=Ro,Ro=e,pl=n}function f0(e,n,s){Hr[Gr++]=hi,Hr[Gr++]=fi,Hr[Gr++]=ls,ls=e;var c=hi;e=fi;var p=32-Ze(c)-1;c&=~(1<<p),s+=1;var w=32-Ze(n)+p;if(30<w){var S=p-p%5;w=(c&(1<<S)-1).toString(32),c>>=S,p-=S,hi=1<<32-Ze(n)+p|s<<p|c,fi=w+e}else hi=1<<w|s<<p|c,fi=e}function yc(e){e.return!==null&&(Ti(e,1),f0(e,1,0))}function wc(e){for(;e===Ro;)Ro=Ea[--_a],Ea[_a]=null,pl=Ea[--_a],Ea[_a]=null;for(;e===ls;)ls=Hr[--Gr],Hr[Gr]=null,fi=Hr[--Gr],Hr[Gr]=null,hi=Hr[--Gr],Hr[Gr]=null}function d0(e,n){Hr[Gr++]=hi,Hr[Gr++]=fi,Hr[Gr++]=ls,hi=n.id,fi=n.overflow,ls=e}var Xn=null,en=null,wt=!1,os=null,Vr=!1,bc=Error(h(519));function us(e){var n=Error(h(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(qr(n,e)),bc}function g0(e){var n=e.stateNode,s=e.type,c=e.memoizedProps;switch(n[hn]=e,n[It]=c,s){case"dialog":dt("cancel",n),dt("close",n);break;case"iframe":case"object":case"embed":dt("load",n);break;case"video":case"audio":for(s=0;s<Fl.length;s++)dt(Fl[s],n);break;case"source":dt("error",n);break;case"img":case"image":case"link":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"input":dt("invalid",n),K(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":dt("invalid",n);break;case"textarea":dt("invalid",n),ar(n,c.value,c.defaultValue,c.children)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||c.suppressHydrationWarning===!0||I1(n.textContent,s)?(c.popover!=null&&(dt("beforetoggle",n),dt("toggle",n)),c.onScroll!=null&&dt("scroll",n),c.onScrollEnd!=null&&dt("scrollend",n),c.onClick!=null&&(n.onclick=fr),n=!0):n=!1,n||us(e,!0)}function m0(e){for(Xn=e.return;Xn;)switch(Xn.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Xn=Xn.return}}function Aa(e){if(e!==Xn)return!1;if(!wt)return m0(e),wt=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Uh(e.type,e.memoizedProps)),s=!s),s&&en&&us(e),m0(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));en=F1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));en=F1(e)}else n===27?(n=en,_s(e.type)?(e=Hh,Hh=null,en=e):en=n):en=Xn?Yr(e.stateNode.nextSibling):null;return!0}function Xs(){en=Xn=null,wt=!1}function vc(){var e=os;return e!==null&&(yr===null?yr=e:yr.push.apply(yr,e),os=null),e}function yl(e){os===null?os=[e]:os.push(e)}var Ec=H(null),Ys=null,Oi=null;function cs(e,n,s){ve(Ec,n._currentValue),n._currentValue=s}function Ni(e){e._currentValue=Ec.current,le(Ec)}function _c(e,n,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===s)break;e=e.return}}function Ac(e,n,s,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var w=p.dependencies;if(w!==null){var S=p.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=p;for(var U=0;U<n.length;U++)if(D.context===n[U]){w.lanes|=s,D=w.alternate,D!==null&&(D.lanes|=s),_c(w.return,s,e),c||(S=null);break e}w=D.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(h(341));S.lanes|=s,w=S.alternate,w!==null&&(w.lanes|=s),_c(S,s,e),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===e){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ca(e,n,s,c){e=null;for(var p=n,w=!1;p!==null;){if(!w){if((p.flags&524288)!==0)w=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(h(387));if(S=S.memoizedProps,S!==null){var D=p.type;f(p.pendingProps.value,S.value)||(e!==null?e.push(D):e=[D])}}else if(p===ct.current){if(S=p.alternate,S===null)throw Error(h(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Vl):e=[Vl])}p=p.return}e!==null&&Ac(n,e,s,c),n.flags|=262144}function Io(e){for(e=e.firstContext;e!==null;){if(!f(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ks(e){Ys=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Yn(e){return x0(Ys,e)}function Do(e,n){return Ys===null&&Ks(e),x0(e,n)}function x0(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Oi===null){if(e===null)throw Error(h(308));Oi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Oi=Oi.next=n;return s}var dx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},gx=d.unstable_scheduleCallback,mx=d.unstable_NormalPriority,Tn={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cc(){return{controller:new dx,data:new Map,refCount:0}}function wl(e){e.refCount--,e.refCount===0&&gx(mx,function(){e.controller.abort()})}var bl=null,Sc=0,Sa=0,Ta=null;function xx(e,n){if(bl===null){var s=bl=[];Sc=0,Sa=Nh(),Ta={status:"pending",value:void 0,then:function(c){s.push(c)}}}return Sc++,n.then(p0,p0),n}function p0(){if(--Sc===0&&bl!==null){Ta!==null&&(Ta.status="fulfilled");var e=bl;bl=null,Sa=0,Ta=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function px(e,n){var s=[],c={status:"pending",value:null,reason:null,then:function(p){s.push(p)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<s.length;p++)(0,s[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<s.length;p++)(0,s[p])(void 0)}),c}var y0=te.S;te.S=function(e,n){t1=gt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&xx(e,n),y0!==null&&y0(e,n)};var Ws=H(null);function Tc(){var e=Ws.current;return e!==null?e:Kt.pooledCache}function Mo(e,n){n===null?ve(Ws,Ws.current):ve(Ws,n.pool)}function w0(){var e=Tc();return e===null?null:{parent:Tn._currentValue,pool:e}}var Oa=Error(h(460)),Oc=Error(h(474)),Bo=Error(h(542)),ko={then:function(){}};function b0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function v0(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(fr,fr),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_0(e),e;default:if(typeof n.status=="string")n.then(fr,fr);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(h(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_0(e),e}throw Qs=n,Oa}}function Zs(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Qs=s,Oa):s}}var Qs=null;function E0(){if(Qs===null)throw Error(h(459));var e=Qs;return Qs=null,e}function _0(e){if(e===Oa||e===Bo)throw Error(h(483))}var Na=null,vl=0;function Lo(e){var n=vl;return vl+=1,Na===null&&(Na=[]),v0(Na,e,n)}function El(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function jo(e,n){throw n.$$typeof===k?Error(h(525)):(e=Object.prototype.toString.call(n),Error(h(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function A0(e){function n(V,q){if(e){var Z=V.deletions;Z===null?(V.deletions=[q],V.flags|=16):Z.push(q)}}function s(V,q){if(!e)return null;for(;q!==null;)n(V,q),q=q.sibling;return null}function c(V){for(var q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function p(V,q){return V=Si(V,q),V.index=0,V.sibling=null,V}function w(V,q,Z){return V.index=Z,e?(Z=V.alternate,Z!==null?(Z=Z.index,Z<q?(V.flags|=67108866,q):Z):(V.flags|=67108866,q)):(V.flags|=1048576,q)}function S(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function D(V,q,Z,he){return q===null||q.tag!==6?(q=xc(Z,V.mode,he),q.return=V,q):(q=p(q,Z),q.return=V,q)}function U(V,q,Z,he){var Fe=Z.type;return Fe===G?oe(V,q,Z.props.children,he,Z.key):q!==null&&(q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Me&&Zs(Fe)===q.type)?(q=p(q,Z.props),El(q,Z),q.return=V,q):(q=No(Z.type,Z.key,Z.props,null,V.mode,he),El(q,Z),q.return=V,q)}function Q(V,q,Z,he){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=pc(Z,V.mode,he),q.return=V,q):(q=p(q,Z.children||[]),q.return=V,q)}function oe(V,q,Z,he,Fe){return q===null||q.tag!==7?(q=Vs(Z,V.mode,he,Fe),q.return=V,q):(q=p(q,Z),q.return=V,q)}function fe(V,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=xc(""+q,V.mode,Z),q.return=V,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return Z=No(q.type,q.key,q.props,null,V.mode,Z),El(Z,q),Z.return=V,Z;case F:return q=pc(q,V.mode,Z),q.return=V,q;case Me:return q=Zs(q),fe(V,q,Z)}if(re(q)||Oe(q))return q=Vs(q,V.mode,Z,null),q.return=V,q;if(typeof q.then=="function")return fe(V,Lo(q),Z);if(q.$$typeof===W)return fe(V,Do(V,q),Z);jo(V,q)}return null}function $(V,q,Z,he){var Fe=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Fe!==null?null:D(V,q,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:return Z.key===Fe?U(V,q,Z,he):null;case F:return Z.key===Fe?Q(V,q,Z,he):null;case Me:return Z=Zs(Z),$(V,q,Z,he)}if(re(Z)||Oe(Z))return Fe!==null?null:oe(V,q,Z,he,null);if(typeof Z.then=="function")return $(V,q,Lo(Z),he);if(Z.$$typeof===W)return $(V,q,Do(V,Z),he);jo(V,Z)}return null}function se(V,q,Z,he,Fe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return V=V.get(Z)||null,D(q,V,""+he,Fe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case j:return V=V.get(he.key===null?Z:he.key)||null,U(q,V,he,Fe);case F:return V=V.get(he.key===null?Z:he.key)||null,Q(q,V,he,Fe);case Me:return he=Zs(he),se(V,q,Z,he,Fe)}if(re(he)||Oe(he))return V=V.get(Z)||null,oe(q,V,he,Fe,null);if(typeof he.then=="function")return se(V,q,Z,Lo(he),Fe);if(he.$$typeof===W)return se(V,q,Z,Do(q,he),Fe);jo(q,he)}return null}function Re(V,q,Z,he){for(var Fe=null,St=null,De=q,rt=q=0,pt=null;De!==null&&rt<Z.length;rt++){De.index>rt?(pt=De,De=null):pt=De.sibling;var Tt=$(V,De,Z[rt],he);if(Tt===null){De===null&&(De=pt);break}e&&De&&Tt.alternate===null&&n(V,De),q=w(Tt,q,rt),St===null?Fe=Tt:St.sibling=Tt,St=Tt,De=pt}if(rt===Z.length)return s(V,De),wt&&Ti(V,rt),Fe;if(De===null){for(;rt<Z.length;rt++)De=fe(V,Z[rt],he),De!==null&&(q=w(De,q,rt),St===null?Fe=De:St.sibling=De,St=De);return wt&&Ti(V,rt),Fe}for(De=c(De);rt<Z.length;rt++)pt=se(De,V,rt,Z[rt],he),pt!==null&&(e&&pt.alternate!==null&&De.delete(pt.key===null?rt:pt.key),q=w(pt,q,rt),St===null?Fe=pt:St.sibling=pt,St=pt);return e&&De.forEach(function(Os){return n(V,Os)}),wt&&Ti(V,rt),Fe}function He(V,q,Z,he){if(Z==null)throw Error(h(151));for(var Fe=null,St=null,De=q,rt=q=0,pt=null,Tt=Z.next();De!==null&&!Tt.done;rt++,Tt=Z.next()){De.index>rt?(pt=De,De=null):pt=De.sibling;var Os=$(V,De,Tt.value,he);if(Os===null){De===null&&(De=pt);break}e&&De&&Os.alternate===null&&n(V,De),q=w(Os,q,rt),St===null?Fe=Os:St.sibling=Os,St=Os,De=pt}if(Tt.done)return s(V,De),wt&&Ti(V,rt),Fe;if(De===null){for(;!Tt.done;rt++,Tt=Z.next())Tt=fe(V,Tt.value,he),Tt!==null&&(q=w(Tt,q,rt),St===null?Fe=Tt:St.sibling=Tt,St=Tt);return wt&&Ti(V,rt),Fe}for(De=c(De);!Tt.done;rt++,Tt=Z.next())Tt=se(De,V,rt,Tt.value,he),Tt!==null&&(e&&Tt.alternate!==null&&De.delete(Tt.key===null?rt:Tt.key),q=w(Tt,q,rt),St===null?Fe=Tt:St.sibling=Tt,St=Tt);return e&&De.forEach(function(Op){return n(V,Op)}),wt&&Ti(V,rt),Fe}function Ht(V,q,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===G&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:e:{for(var Fe=Z.key;q!==null;){if(q.key===Fe){if(Fe=Z.type,Fe===G){if(q.tag===7){s(V,q.sibling),he=p(q,Z.props.children),he.return=V,V=he;break e}}else if(q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Me&&Zs(Fe)===q.type){s(V,q.sibling),he=p(q,Z.props),El(he,Z),he.return=V,V=he;break e}s(V,q);break}else n(V,q);q=q.sibling}Z.type===G?(he=Vs(Z.props.children,V.mode,he,Z.key),he.return=V,V=he):(he=No(Z.type,Z.key,Z.props,null,V.mode,he),El(he,Z),he.return=V,V=he)}return S(V);case F:e:{for(Fe=Z.key;q!==null;){if(q.key===Fe)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){s(V,q.sibling),he=p(q,Z.children||[]),he.return=V,V=he;break e}else{s(V,q);break}else n(V,q);q=q.sibling}he=pc(Z,V.mode,he),he.return=V,V=he}return S(V);case Me:return Z=Zs(Z),Ht(V,q,Z,he)}if(re(Z))return Re(V,q,Z,he);if(Oe(Z)){if(Fe=Oe(Z),typeof Fe!="function")throw Error(h(150));return Z=Fe.call(Z),He(V,q,Z,he)}if(typeof Z.then=="function")return Ht(V,q,Lo(Z),he);if(Z.$$typeof===W)return Ht(V,q,Do(V,Z),he);jo(V,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,q!==null&&q.tag===6?(s(V,q.sibling),he=p(q,Z),he.return=V,V=he):(s(V,q),he=xc(Z,V.mode,he),he.return=V,V=he),S(V)):s(V,q)}return function(V,q,Z,he){try{vl=0;var Fe=Ht(V,q,Z,he);return Na=null,Fe}catch(De){if(De===Oa||De===Bo)throw De;var St=Ir(29,De,null,V.mode);return St.lanes=he,St.return=V,St}finally{}}}var Js=A0(!0),C0=A0(!1),hs=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ds(e,n,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Mt&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=Oo(e),o0(e,null,s),n}return To(e,c,n,s),Oo(e)}function _l(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,Fn(e,s)}}function Ic(e,n){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var p=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var S={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?p=w=S:w=w.next=S,s=s.next}while(s!==null);w===null?p=w=n:w=w.next=n}else p=w=n;s={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:w,shared:c.shared,callbacks:c.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var Dc=!1;function Al(){if(Dc){var e=Ta;if(e!==null)throw e}}function Cl(e,n,s,c){Dc=!1;var p=e.updateQueue;hs=!1;var w=p.firstBaseUpdate,S=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var U=D,Q=U.next;U.next=null,S===null?w=Q:S.next=Q,S=U;var oe=e.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==S&&(D===null?oe.firstBaseUpdate=Q:D.next=Q,oe.lastBaseUpdate=U))}if(w!==null){var fe=p.baseState;S=0,oe=Q=U=null,D=w;do{var $=D.lane&-536870913,se=$!==D.lane;if(se?(xt&$)===$:(c&$)===$){$!==0&&$===Sa&&(Dc=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Re=e,He=D;$=n;var Ht=s;switch(He.tag){case 1:if(Re=He.payload,typeof Re=="function"){fe=Re.call(Ht,fe,$);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=He.payload,$=typeof Re=="function"?Re.call(Ht,fe,$):Re,$==null)break e;fe=R({},fe,$);break e;case 2:hs=!0}}$=D.callback,$!==null&&(e.flags|=64,se&&(e.flags|=8192),se=p.callbacks,se===null?p.callbacks=[$]:se.push($))}else se={lane:$,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Q=oe=se,U=fe):oe=oe.next=se,S|=$;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;se=D,D=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);oe===null&&(U=fe),p.baseState=U,p.firstBaseUpdate=Q,p.lastBaseUpdate=oe,w===null&&(p.shared.lanes=0),ys|=S,e.lanes=S,e.memoizedState=fe}}function S0(e,n){if(typeof e!="function")throw Error(h(191,e));e.call(n)}function T0(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)S0(s[e],n)}var Ra=H(null),Uo=H(0);function O0(e,n){e=Ui,ve(Uo,e),ve(Ra,n),Ui=e|n.baseLanes}function Mc(){ve(Uo,Ui),ve(Ra,Ra.current)}function Bc(){Ui=Uo.current,le(Ra),le(Uo)}var Dr=H(null),Xr=null;function gs(e){var n=e.alternate;ve(_n,_n.current&1),ve(Dr,e),Xr===null&&(n===null||Ra.current!==null||n.memoizedState!==null)&&(Xr=e)}function kc(e){ve(_n,_n.current),ve(Dr,e),Xr===null&&(Xr=e)}function N0(e){e.tag===22?(ve(_n,_n.current),ve(Dr,e),Xr===null&&(Xr=e)):ms()}function ms(){ve(_n,_n.current),ve(Dr,Dr.current)}function Mr(e){le(Dr),Xr===e&&(Xr=null),le(_n)}var _n=H(0);function Po(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||zh(s)||qh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ri=0,tt=null,zt=null,On=null,Fo=!1,Ia=!1,$s=!1,zo=0,Sl=0,Da=null,yx=0;function xn(){throw Error(h(321))}function Lc(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!f(e[s],n[s]))return!1;return!0}function jc(e,n,s,c,p,w){return Ri=w,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,te.H=e===null||e.memoizedState===null?fd:Jc,$s=!1,w=s(c,p),$s=!1,Ia&&(w=I0(n,s,c,p)),R0(e),w}function R0(e){te.H=Nl;var n=zt!==null&&zt.next!==null;if(Ri=0,On=zt=tt=null,Fo=!1,Sl=0,Da=null,n)throw Error(h(300));e===null||Nn||(e=e.dependencies,e!==null&&Io(e)&&(Nn=!0))}function I0(e,n,s,c){tt=e;var p=0;do{if(Ia&&(Da=null),Sl=0,Ia=!1,25<=p)throw Error(h(301));if(p+=1,On=zt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=dd,w=n(s,c)}while(Ia);return w}function wx(){var e=te.H,n=e.useState()[0];return n=typeof n.then=="function"?Tl(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(tt.flags|=1024),n}function Uc(){var e=zo!==0;return zo=0,e}function Pc(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Fc(e){if(Fo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Fo=!1}Ri=0,On=zt=tt=null,Ia=!1,Sl=zo=0,Da=null}function ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?tt.memoizedState=On=e:On=On.next=e,On}function An(){if(zt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=On===null?tt.memoizedState:On.next;if(n!==null)On=n,zt=e;else{if(e===null)throw tt.alternate===null?Error(h(467)):Error(h(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},On===null?tt.memoizedState=On=e:On=On.next=e}return On}function qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var n=Sl;return Sl+=1,Da===null&&(Da=[]),e=v0(Da,e,n),n=tt,(On===null?n.memoizedState:On.next)===null&&(n=n.alternate,te.H=n===null||n.memoizedState===null?fd:Jc),e}function Ho(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===W)return Yn(e)}throw Error(h(438,String(e)))}function zc(e){var n=null,s=tt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var c=tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=qo(),tt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),c=0;c<e;c++)s[c]=Hn;return n.index++,s}function Ii(e,n){return typeof n=="function"?n(e):n}function Go(e){var n=An();return qc(n,zt,e)}function qc(e,n,s){var c=e.queue;if(c===null)throw Error(h(311));c.lastRenderedReducer=s;var p=e.baseQueue,w=c.pending;if(w!==null){if(p!==null){var S=p.next;p.next=w.next,w.next=S}n.baseQueue=p=w,c.pending=null}if(w=e.baseState,p===null)e.memoizedState=w;else{n=p.next;var D=S=null,U=null,Q=n,oe=!1;do{var fe=Q.lane&-536870913;if(fe!==Q.lane?(xt&fe)===fe:(Ri&fe)===fe){var $=Q.revertLane;if($===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),fe===Sa&&(oe=!0);else if((Ri&$)===$){Q=Q.next,$===Sa&&(oe=!0);continue}else fe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},U===null?(D=U=fe,S=w):U=U.next=fe,tt.lanes|=$,ys|=$;fe=Q.action,$s&&s(w,fe),w=Q.hasEagerState?Q.eagerState:s(w,fe)}else $={lane:fe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},U===null?(D=U=$,S=w):U=U.next=$,tt.lanes|=fe,ys|=fe;Q=Q.next}while(Q!==null&&Q!==n);if(U===null?S=w:U.next=D,!f(w,e.memoizedState)&&(Nn=!0,oe&&(s=Ta,s!==null)))throw s;e.memoizedState=w,e.baseState=S,e.baseQueue=U,c.lastRenderedState=w}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Hc(e){var n=An(),s=n.queue;if(s===null)throw Error(h(311));s.lastRenderedReducer=e;var c=s.dispatch,p=s.pending,w=n.memoizedState;if(p!==null){s.pending=null;var S=p=p.next;do w=e(w,S.action),S=S.next;while(S!==p);f(w,n.memoizedState)||(Nn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,c]}function D0(e,n,s){var c=tt,p=An(),w=wt;if(w){if(s===void 0)throw Error(h(407));s=s()}else s=n();var S=!f((zt||p).memoizedState,s);if(S&&(p.memoizedState=s,Nn=!0),p=p.queue,Xc(k0.bind(null,c,p,e),[e]),p.getSnapshot!==n||S||On!==null&&On.memoizedState.tag&1){if(c.flags|=2048,Ma(9,{destroy:void 0},B0.bind(null,c,p,s,n),null),Kt===null)throw Error(h(349));w||(Ri&127)!==0||M0(c,n,s)}return s}function M0(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=tt.updateQueue,n===null?(n=qo(),tt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function B0(e,n,s,c){n.value=s,n.getSnapshot=c,L0(n)&&j0(e)}function k0(e,n,s){return s(function(){L0(n)&&j0(e)})}function L0(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!f(e,s)}catch{return!0}}function j0(e){var n=Gs(e,2);n!==null&&wr(n,e,2)}function Gc(e){var n=ur();if(typeof e=="function"){var s=e;if(e=s(),$s){Bt(!0);try{s()}finally{Bt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},n}function U0(e,n,s,c){return e.baseState=s,qc(e,zt,typeof c=="function"?c:Ii)}function bx(e,n,s,c,p){if(Yo(e))throw Error(h(485));if(e=n.action,e!==null){var w={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){w.listeners.push(S)}};te.T!==null?s(!0):w.isTransition=!1,c(w),s=n.pending,s===null?(w.next=n.pending=w,P0(n,w)):(w.next=s.next,n.pending=s.next=w)}}function P0(e,n){var s=n.action,c=n.payload,p=e.state;if(n.isTransition){var w=te.T,S={};te.T=S;try{var D=s(p,c),U=te.S;U!==null&&U(S,D),F0(e,n,D)}catch(Q){Vc(e,n,Q)}finally{w!==null&&S.types!==null&&(w.types=S.types),te.T=w}}else try{w=s(p,c),F0(e,n,w)}catch(Q){Vc(e,n,Q)}}function F0(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){z0(e,n,c)},function(c){return Vc(e,n,c)}):z0(e,n,s)}function z0(e,n,s){n.status="fulfilled",n.value=s,q0(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,P0(e,s)))}function Vc(e,n,s){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=s,q0(n),n=n.next;while(n!==c)}e.action=null}function q0(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function H0(e,n){return n}function G0(e,n){if(wt){var s=Kt.formState;if(s!==null){e:{var c=tt;if(wt){if(en){t:{for(var p=en,w=Vr;p.nodeType!==8;){if(!w){p=null;break t}if(p=Yr(p.nextSibling),p===null){p=null;break t}}w=p.data,p=w==="F!"||w==="F"?p:null}if(p){en=Yr(p.nextSibling),c=p.data==="F!";break e}}us(c)}c=!1}c&&(n=s[0])}}return s=ur(),s.memoizedState=s.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:n},s.queue=c,s=ud.bind(null,tt,c),c.dispatch=s,c=Gc(!1),w=Qc.bind(null,tt,!1,c.queue),c=ur(),p={state:n,dispatch:null,action:e,pending:null},c.queue=p,s=bx.bind(null,tt,p,w,s),p.dispatch=s,c.memoizedState=e,[n,s,!1]}function V0(e){var n=An();return X0(n,zt,e)}function X0(e,n,s){if(n=qc(e,n,H0)[0],e=Go(Ii)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Tl(n)}catch(S){throw S===Oa?Bo:S}else c=n;n=An();var p=n.queue,w=p.dispatch;return s!==n.memoizedState&&(tt.flags|=2048,Ma(9,{destroy:void 0},vx.bind(null,p,s),null)),[c,w,e]}function vx(e,n){e.action=n}function Y0(e){var n=An(),s=zt;if(s!==null)return X0(n,s,e);An(),n=n.memoizedState,s=An();var c=s.queue.dispatch;return s.memoizedState=e,[n,c,!1]}function Ma(e,n,s,c){return e={tag:e,create:s,deps:c,inst:n,next:null},n=tt.updateQueue,n===null&&(n=qo(),tt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,n.lastEffect=e),e}function K0(){return An().memoizedState}function Vo(e,n,s,c){var p=ur();tt.flags|=e,p.memoizedState=Ma(1|n,{destroy:void 0},s,c===void 0?null:c)}function Xo(e,n,s,c){var p=An();c=c===void 0?null:c;var w=p.memoizedState.inst;zt!==null&&c!==null&&Lc(c,zt.memoizedState.deps)?p.memoizedState=Ma(n,w,s,c):(tt.flags|=e,p.memoizedState=Ma(1|n,w,s,c))}function W0(e,n){Vo(8390656,8,e,n)}function Xc(e,n){Xo(2048,8,e,n)}function Ex(e){tt.flags|=4;var n=tt.updateQueue;if(n===null)n=qo(),tt.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function Z0(e){var n=An().memoizedState;return Ex({ref:n,nextImpl:e}),function(){if((Mt&2)!==0)throw Error(h(440));return n.impl.apply(void 0,arguments)}}function Q0(e,n){return Xo(4,2,e,n)}function J0(e,n){return Xo(4,4,e,n)}function $0(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ed(e,n,s){s=s!=null?s.concat([e]):null,Xo(4,4,$0.bind(null,n,e),s)}function Yc(){}function td(e,n){var s=An();n=n===void 0?null:n;var c=s.memoizedState;return n!==null&&Lc(n,c[1])?c[0]:(s.memoizedState=[e,n],e)}function nd(e,n){var s=An();n=n===void 0?null:n;var c=s.memoizedState;if(n!==null&&Lc(n,c[1]))return c[0];if(c=e(),$s){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[c,n],c}function Kc(e,n,s){return s===void 0||(Ri&1073741824)!==0&&(xt&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=r1(),tt.lanes|=e,ys|=e,s)}function rd(e,n,s,c){return f(s,n)?s:Ra.current!==null?(e=Kc(e,s,c),f(e,n)||(Nn=!0),e):(Ri&42)===0||(Ri&1073741824)!==0&&(xt&261930)===0?(Nn=!0,e.memoizedState=s):(e=r1(),tt.lanes|=e,ys|=e,n)}function id(e,n,s,c,p){var w=ce.p;ce.p=w!==0&&8>w?w:8;var S=te.T,D={};te.T=D,Qc(e,!1,n,s);try{var U=p(),Q=te.S;if(Q!==null&&Q(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=px(U,c);Ol(e,n,oe,Lr(e))}else Ol(e,n,c,Lr(e))}catch(fe){Ol(e,n,{then:function(){},status:"rejected",reason:fe},Lr())}finally{ce.p=w,S!==null&&D.types!==null&&(S.types=D.types),te.T=S}}function _x(){}function Wc(e,n,s,c){if(e.tag!==5)throw Error(h(476));var p=sd(e).queue;id(e,p,n,Ue,s===null?_x:function(){return ad(e),s(c)})}function sd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:Ue},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function ad(e){var n=sd(e);n.next===null&&(n=e.alternate.memoizedState),Ol(e,n.next.queue,{},Lr())}function Zc(){return Yn(Vl)}function ld(){return An().memoizedState}function od(){return An().memoizedState}function Ax(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Lr();e=fs(s);var c=ds(n,e,s);c!==null&&(wr(c,n,s),_l(c,n,s)),n={cache:Cc()},e.payload=n;return}n=n.return}}function Cx(e,n,s){var c=Lr();s={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Yo(e)?cd(n,s):(s=gc(e,n,s,c),s!==null&&(wr(s,e,c),hd(s,n,c)))}function ud(e,n,s){var c=Lr();Ol(e,n,s,c)}function Ol(e,n,s,c){var p={lane:c,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))cd(n,p);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var S=n.lastRenderedState,D=w(S,s);if(p.hasEagerState=!0,p.eagerState=D,f(D,S))return To(e,n,p,0),Kt===null&&So(),!1}catch{}finally{}if(s=gc(e,n,p,c),s!==null)return wr(s,e,c),hd(s,n,c),!0}return!1}function Qc(e,n,s,c){if(c={lane:2,revertLane:Nh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Yo(e)){if(n)throw Error(h(479))}else n=gc(e,s,c,2),n!==null&&wr(n,e,2)}function Yo(e){var n=e.alternate;return e===tt||n!==null&&n===tt}function cd(e,n){Ia=Fo=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function hd(e,n,s){if((s&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,Fn(e,s)}}var Nl={readContext:Yn,use:Ho,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};Nl.useEffectEvent=xn;var fd={readContext:Yn,use:Ho,useCallback:function(e,n){return ur().memoizedState=[e,n===void 0?null:n],e},useContext:Yn,useEffect:W0,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Vo(4194308,4,$0.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Vo(4194308,4,e,n)},useInsertionEffect:function(e,n){Vo(4,2,e,n)},useMemo:function(e,n){var s=ur();n=n===void 0?null:n;var c=e();if($s){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[c,n],c},useReducer:function(e,n,s){var c=ur();if(s!==void 0){var p=s(n);if($s){Bt(!0);try{s(n)}finally{Bt(!1)}}}else p=n;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=Cx.bind(null,tt,e),[c.memoizedState,e]},useRef:function(e){var n=ur();return e={current:e},n.memoizedState=e},useState:function(e){e=Gc(e);var n=e.queue,s=ud.bind(null,tt,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Yc,useDeferredValue:function(e,n){var s=ur();return Kc(s,e,n)},useTransition:function(){var e=Gc(!1);return e=id.bind(null,tt,e.queue,!0,!1),ur().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var c=tt,p=ur();if(wt){if(s===void 0)throw Error(h(407));s=s()}else{if(s=n(),Kt===null)throw Error(h(349));(xt&127)!==0||M0(c,n,s)}p.memoizedState=s;var w={value:s,getSnapshot:n};return p.queue=w,W0(k0.bind(null,c,w,e),[e]),c.flags|=2048,Ma(9,{destroy:void 0},B0.bind(null,c,w,s,n),null),s},useId:function(){var e=ur(),n=Kt.identifierPrefix;if(wt){var s=fi,c=hi;s=(c&~(1<<32-Ze(c)-1)).toString(32)+s,n="_"+n+"R_"+s,s=zo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=yx++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Zc,useFormState:G0,useActionState:G0,useOptimistic:function(e){var n=ur();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Qc.bind(null,tt,!0,s),s.dispatch=n,[e,n]},useMemoCache:zc,useCacheRefresh:function(){return ur().memoizedState=Ax.bind(null,tt)},useEffectEvent:function(e){var n=ur(),s={impl:e};return n.memoizedState=s,function(){if((Mt&2)!==0)throw Error(h(440));return s.impl.apply(void 0,arguments)}}},Jc={readContext:Yn,use:Ho,useCallback:td,useContext:Yn,useEffect:Xc,useImperativeHandle:ed,useInsertionEffect:Q0,useLayoutEffect:J0,useMemo:nd,useReducer:Go,useRef:K0,useState:function(){return Go(Ii)},useDebugValue:Yc,useDeferredValue:function(e,n){var s=An();return rd(s,zt.memoizedState,e,n)},useTransition:function(){var e=Go(Ii)[0],n=An().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:D0,useId:ld,useHostTransitionStatus:Zc,useFormState:V0,useActionState:V0,useOptimistic:function(e,n){var s=An();return U0(s,zt,e,n)},useMemoCache:zc,useCacheRefresh:od};Jc.useEffectEvent=Z0;var dd={readContext:Yn,use:Ho,useCallback:td,useContext:Yn,useEffect:Xc,useImperativeHandle:ed,useInsertionEffect:Q0,useLayoutEffect:J0,useMemo:nd,useReducer:Hc,useRef:K0,useState:function(){return Hc(Ii)},useDebugValue:Yc,useDeferredValue:function(e,n){var s=An();return zt===null?Kc(s,e,n):rd(s,zt.memoizedState,e,n)},useTransition:function(){var e=Hc(Ii)[0],n=An().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:D0,useId:ld,useHostTransitionStatus:Zc,useFormState:Y0,useActionState:Y0,useOptimistic:function(e,n){var s=An();return zt!==null?U0(s,zt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:zc,useCacheRefresh:od};dd.useEffectEvent=Z0;function $c(e,n,s,c){n=e.memoizedState,s=s(c,n),s=s==null?n:R({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var eh={enqueueSetState:function(e,n,s){e=e._reactInternals;var c=Lr(),p=fs(c);p.payload=n,s!=null&&(p.callback=s),n=ds(e,p,c),n!==null&&(wr(n,e,c),_l(n,e,c))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var c=Lr(),p=fs(c);p.tag=1,p.payload=n,s!=null&&(p.callback=s),n=ds(e,p,c),n!==null&&(wr(n,e,c),_l(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Lr(),c=fs(s);c.tag=2,n!=null&&(c.callback=n),n=ds(e,c,s),n!==null&&(wr(n,e,s),_l(n,e,s))}};function gd(e,n,s,c,p,w,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,w,S):n.prototype&&n.prototype.isPureReactComponent?!m(s,c)||!m(p,w):!0}function md(e,n,s,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,c),n.state!==e&&eh.enqueueReplaceState(n,n.state,null)}function ea(e,n){var s=n;if("ref"in n){s={};for(var c in n)c!=="ref"&&(s[c]=n[c])}if(e=e.defaultProps){s===n&&(s=R({},s));for(var p in e)s[p]===void 0&&(s[p]=e[p])}return s}function xd(e){Co(e)}function pd(e){console.error(e)}function yd(e){Co(e)}function Ko(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function wd(e,n,s){try{var c=e.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function th(e,n,s){return s=fs(s),s.tag=3,s.payload={element:null},s.callback=function(){Ko(e,n)},s}function bd(e){return e=fs(e),e.tag=3,e}function vd(e,n,s,c){var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var w=c.value;e.payload=function(){return p(w)},e.callback=function(){wd(n,s,c)}}var S=s.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){wd(n,s,c),typeof p!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})})}function Sx(e,n,s,c,p){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=s.alternate,n!==null&&Ca(n,s,p,!0),s=Dr.current,s!==null){switch(s.tag){case 31:case 13:return Xr===null?au():s.alternate===null&&pn===0&&(pn=3),s.flags&=-257,s.flags|=65536,s.lanes=p,c===ko?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([c]):n.add(c),Sh(e,c,p)),!1;case 22:return s.flags|=65536,c===ko?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([c]):s.add(c)),Sh(e,c,p)),!1}throw Error(h(435,s.tag))}return Sh(e,c,p),au(),!1}if(wt)return n=Dr.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==bc&&(e=Error(h(422),{cause:c}),yl(qr(e,s)))):(c!==bc&&(n=Error(h(423),{cause:c}),yl(qr(n,s))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=qr(c,s),p=th(e.stateNode,c,p),Ic(e,p),pn!==4&&(pn=2)),!1;var w=Error(h(520),{cause:c});if(w=qr(w,s),jl===null?jl=[w]:jl.push(w),pn!==4&&(pn=2),n===null)return!0;c=qr(c,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=p&-p,s.lanes|=e,e=th(s.stateNode,c,e),Ic(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ws===null||!ws.has(w))))return s.flags|=65536,p&=-p,s.lanes|=p,p=bd(p),vd(p,e,s,c),Ic(s,p),!1}s=s.return}while(s!==null);return!1}var nh=Error(h(461)),Nn=!1;function Kn(e,n,s,c){n.child=e===null?C0(n,null,s,c):Js(n,e.child,s,c)}function Ed(e,n,s,c,p){s=s.render;var w=n.ref;if("ref"in c){var S={};for(var D in c)D!=="ref"&&(S[D]=c[D])}else S=c;return Ks(n),c=jc(e,n,s,S,w,p),D=Uc(),e!==null&&!Nn?(Pc(e,n,p),Di(e,n,p)):(wt&&D&&yc(n),n.flags|=1,Kn(e,n,c,p),n.child)}function _d(e,n,s,c,p){if(e===null){var w=s.type;return typeof w=="function"&&!mc(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,Ad(e,n,w,c,p)):(e=No(s.type,null,c,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!ch(e,p)){var S=w.memoizedProps;if(s=s.compare,s=s!==null?s:m,s(S,c)&&e.ref===n.ref)return Di(e,n,p)}return n.flags|=1,e=Si(w,c),e.ref=n.ref,e.return=n,n.child=e}function Ad(e,n,s,c,p){if(e!==null){var w=e.memoizedProps;if(m(w,c)&&e.ref===n.ref)if(Nn=!1,n.pendingProps=c=w,ch(e,p))(e.flags&131072)!==0&&(Nn=!0);else return n.lanes=e.lanes,Di(e,n,p)}return rh(e,n,s,c,p)}function Cd(e,n,s,c){var p=c.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(c=n.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~w}else c=0,n.child=null;return Sd(e,n,w,s,c)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mo(n,w!==null?w.cachePool:null),w!==null?O0(n,w):Mc(),N0(n);else return c=n.lanes=536870912,Sd(e,n,w!==null?w.baseLanes|s:s,s,c)}else w!==null?(Mo(n,w.cachePool),O0(n,w),ms(),n.memoizedState=null):(e!==null&&Mo(n,null),Mc(),ms());return Kn(e,n,p,s),n.child}function Rl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Sd(e,n,s,c,p){var w=Tc();return w=w===null?null:{parent:Tn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Mo(n,null),Mc(),N0(n),e!==null&&Ca(e,n,c,!0),n.childLanes=p,null}function Wo(e,n){return n=Qo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Td(e,n,s){return Js(n,e.child,null,s),e=Wo(n,n.pendingProps),e.flags|=2,Mr(n),n.memoizedState=null,e}function Tx(e,n,s){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(wt){if(c.mode==="hidden")return e=Wo(n,c),n.lanes=536870912,Rl(null,e);if(kc(n),(e=en)?(e=P1(e,Vr),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ls!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},s=c0(e),s.return=n,n.child=s,Xn=n,en=null)):e=null,e===null)throw us(n);return n.lanes=536870912,null}return Wo(n,c)}var w=e.memoizedState;if(w!==null){var S=w.dehydrated;if(kc(n),p)if(n.flags&256)n.flags&=-257,n=Td(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(h(558));else if(Nn||Ca(e,n,s,!1),p=(s&e.childLanes)!==0,Nn||p){if(c=Kt,c!==null&&(S=zn(c,s),S!==0&&S!==w.retryLane))throw w.retryLane=S,Gs(e,S),wr(c,e,S),nh;au(),n=Td(e,n,s)}else e=w.treeContext,en=Yr(S.nextSibling),Xn=n,wt=!0,os=null,Vr=!1,e!==null&&d0(n,e),n=Wo(n,c),n.flags|=4096;return n}return e=Si(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Zo(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(h(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function rh(e,n,s,c,p){return Ks(n),s=jc(e,n,s,c,void 0,p),c=Uc(),e!==null&&!Nn?(Pc(e,n,p),Di(e,n,p)):(wt&&c&&yc(n),n.flags|=1,Kn(e,n,s,p),n.child)}function Od(e,n,s,c,p,w){return Ks(n),n.updateQueue=null,s=I0(n,c,s,p),R0(e),c=Uc(),e!==null&&!Nn?(Pc(e,n,w),Di(e,n,w)):(wt&&c&&yc(n),n.flags|=1,Kn(e,n,s,w),n.child)}function Nd(e,n,s,c,p){if(Ks(n),n.stateNode===null){var w=va,S=s.contextType;typeof S=="object"&&S!==null&&(w=Yn(S)),w=new s(c,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=eh,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=c,w.state=n.memoizedState,w.refs={},Nc(n),S=s.contextType,w.context=typeof S=="object"&&S!==null?Yn(S):va,w.state=n.memoizedState,S=s.getDerivedStateFromProps,typeof S=="function"&&($c(n,s,S,c),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(S=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),S!==w.state&&eh.enqueueReplaceState(w,w.state,null),Cl(n,c,w,p),Al(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){w=n.stateNode;var D=n.memoizedProps,U=ea(s,D);w.props=U;var Q=w.context,oe=s.contextType;S=va,typeof oe=="object"&&oe!==null&&(S=Yn(oe));var fe=s.getDerivedStateFromProps;oe=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=n.pendingProps!==D,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||Q!==S)&&md(n,w,c,S),hs=!1;var $=n.memoizedState;w.state=$,Cl(n,c,w,p),Al(),Q=n.memoizedState,D||$!==Q||hs?(typeof fe=="function"&&($c(n,s,fe,c),Q=n.memoizedState),(U=hs||gd(n,s,U,c,$,Q,S))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=Q),w.props=c,w.state=Q,w.context=S,c=U):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{w=n.stateNode,Rc(e,n),S=n.memoizedProps,oe=ea(s,S),w.props=oe,fe=n.pendingProps,$=w.context,Q=s.contextType,U=va,typeof Q=="object"&&Q!==null&&(U=Yn(Q)),D=s.getDerivedStateFromProps,(Q=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==fe||$!==U)&&md(n,w,c,U),hs=!1,$=n.memoizedState,w.state=$,Cl(n,c,w,p),Al();var se=n.memoizedState;S!==fe||$!==se||hs||e!==null&&e.dependencies!==null&&Io(e.dependencies)?(typeof D=="function"&&($c(n,s,D,c),se=n.memoizedState),(oe=hs||gd(n,s,oe,c,$,se,U)||e!==null&&e.dependencies!==null&&Io(e.dependencies))?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,se,U),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,se,U)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=se),w.props=c,w.state=se,w.context=U,c=oe):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),c=!1)}return w=c,Zo(e,n),c=(n.flags&128)!==0,w||c?(w=n.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&c?(n.child=Js(n,e.child,null,p),n.child=Js(n,null,s,p)):Kn(e,n,s,p),n.memoizedState=w.state,e=n.child):e=Di(e,n,p),e}function Rd(e,n,s,c){return Xs(),n.flags|=256,Kn(e,n,s,c),n.child}var ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sh(e){return{baseLanes:e,cachePool:w0()}}function ah(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=kr),e}function Id(e,n,s){var c=n.pendingProps,p=!1,w=(n.flags&128)!==0,S;if((S=w)||(S=e!==null&&e.memoizedState===null?!1:(_n.current&2)!==0),S&&(p=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,e===null){if(wt){if(p?gs(n):ms(),(e=en)?(e=P1(e,Vr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ls!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},s=c0(e),s.return=n,n.child=s,Xn=n,en=null)):e=null,e===null)throw us(n);return qh(e)?n.lanes=32:n.lanes=536870912,null}var D=c.children;return c=c.fallback,p?(ms(),p=n.mode,D=Qo({mode:"hidden",children:D},p),c=Vs(c,p,s,null),D.return=n,c.return=n,D.sibling=c,n.child=D,c=n.child,c.memoizedState=sh(s),c.childLanes=ah(e,S,s),n.memoizedState=ih,Rl(null,c)):(gs(n),lh(n,D))}var U=e.memoizedState;if(U!==null&&(D=U.dehydrated,D!==null)){if(w)n.flags&256?(gs(n),n.flags&=-257,n=oh(e,n,s)):n.memoizedState!==null?(ms(),n.child=e.child,n.flags|=128,n=null):(ms(),D=c.fallback,p=n.mode,c=Qo({mode:"visible",children:c.children},p),D=Vs(D,p,s,null),D.flags|=2,c.return=n,D.return=n,c.sibling=D,n.child=c,Js(n,e.child,null,s),c=n.child,c.memoizedState=sh(s),c.childLanes=ah(e,S,s),n.memoizedState=ih,n=Rl(null,c));else if(gs(n),qh(D)){if(S=D.nextSibling&&D.nextSibling.dataset,S)var Q=S.dgst;S=Q,c=Error(h(419)),c.stack="",c.digest=S,yl({value:c,source:null,stack:null}),n=oh(e,n,s)}else if(Nn||Ca(e,n,s,!1),S=(s&e.childLanes)!==0,Nn||S){if(S=Kt,S!==null&&(c=zn(S,s),c!==0&&c!==U.retryLane))throw U.retryLane=c,Gs(e,c),wr(S,e,c),nh;zh(D)||au(),n=oh(e,n,s)}else zh(D)?(n.flags|=192,n.child=e.child,n=null):(e=U.treeContext,en=Yr(D.nextSibling),Xn=n,wt=!0,os=null,Vr=!1,e!==null&&d0(n,e),n=lh(n,c.children),n.flags|=4096);return n}return p?(ms(),D=c.fallback,p=n.mode,U=e.child,Q=U.sibling,c=Si(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,Q!==null?D=Si(Q,D):(D=Vs(D,p,s,null),D.flags|=2),D.return=n,c.return=n,c.sibling=D,n.child=c,Rl(null,c),c=n.child,D=e.child.memoizedState,D===null?D=sh(s):(p=D.cachePool,p!==null?(U=Tn._currentValue,p=p.parent!==U?{parent:U,pool:U}:p):p=w0(),D={baseLanes:D.baseLanes|s,cachePool:p}),c.memoizedState=D,c.childLanes=ah(e,S,s),n.memoizedState=ih,Rl(e.child,c)):(gs(n),s=e.child,e=s.sibling,s=Si(s,{mode:"visible",children:c.children}),s.return=n,s.sibling=null,e!==null&&(S=n.deletions,S===null?(n.deletions=[e],n.flags|=16):S.push(e)),n.child=s,n.memoizedState=null,s)}function lh(e,n){return n=Qo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Qo(e,n){return e=Ir(22,e,null,n),e.lanes=0,e}function oh(e,n,s){return Js(n,e.child,null,s),e=lh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Dd(e,n,s){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),_c(e.return,n,s)}function uh(e,n,s,c,p,w){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:p,treeForkCount:w}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=s,S.tailMode=p,S.treeForkCount=w)}function Md(e,n,s){var c=n.pendingProps,p=c.revealOrder,w=c.tail;c=c.children;var S=_n.current,D=(S&2)!==0;if(D?(S=S&1|2,n.flags|=128):S&=1,ve(_n,S),Kn(e,n,c,s),c=wt?pl:0,!D&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dd(e,s,n);else if(e.tag===19)Dd(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&Po(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),uh(n,!1,p,s,w,c);break;case"backwards":case"unstable_legacy-backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&Po(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}uh(n,!0,s,null,w,c);break;case"together":uh(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Di(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ys|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(Ca(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(h(153));if(n.child!==null){for(e=n.child,s=Si(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Si(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function ch(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Io(e)))}function Ox(e,n,s){switch(n.tag){case 3:st(n,n.stateNode.containerInfo),cs(n,Tn,e.memoizedState.cache),Xs();break;case 27:case 5:un(n);break;case 4:st(n,n.stateNode.containerInfo);break;case 10:cs(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,kc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(gs(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Id(e,n,s):(gs(n),e=Di(e,n,s),e!==null?e.sibling:null);gs(n);break;case 19:var p=(e.flags&128)!==0;if(c=(s&n.childLanes)!==0,c||(Ca(e,n,s,!1),c=(s&n.childLanes)!==0),p){if(c)return Md(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ve(_n,_n.current),c)break;return null;case 22:return n.lanes=0,Cd(e,n,s,n.pendingProps);case 24:cs(n,Tn,e.memoizedState.cache)}return Di(e,n,s)}function Bd(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)Nn=!0;else{if(!ch(e,s)&&(n.flags&128)===0)return Nn=!1,Ox(e,n,s);Nn=(e.flags&131072)!==0}else Nn=!1,wt&&(n.flags&1048576)!==0&&f0(n,pl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(e=Zs(n.elementType),n.type=e,typeof e=="function")mc(e)?(c=ea(e,c),n.tag=1,n=Nd(null,n,e,c,s)):(n.tag=0,n=rh(null,n,e,c,s));else{if(e!=null){var p=e.$$typeof;if(p===xe){n.tag=11,n=Ed(null,n,e,c,s);break e}else if(p===ee){n.tag=14,n=_d(null,n,e,c,s);break e}}throw n=bt(e)||e,Error(h(306,n,""))}}return n;case 0:return rh(e,n,n.type,n.pendingProps,s);case 1:return c=n.type,p=ea(c,n.pendingProps),Nd(e,n,c,p,s);case 3:e:{if(st(n,n.stateNode.containerInfo),e===null)throw Error(h(387));c=n.pendingProps;var w=n.memoizedState;p=w.element,Rc(e,n),Cl(n,c,null,s);var S=n.memoizedState;if(c=S.cache,cs(n,Tn,c),c!==w.cache&&Ac(n,[Tn],s,!0),Al(),c=S.element,w.isDehydrated)if(w={element:c,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=Rd(e,n,c,s);break e}else if(c!==p){p=qr(Error(h(424)),n),yl(p),n=Rd(e,n,c,s);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(en=Yr(e.firstChild),Xn=n,wt=!0,os=null,Vr=!0,s=C0(n,null,c,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Xs(),c===p){n=Di(e,n,s);break e}Kn(e,n,c,s)}n=n.child}return n;case 26:return Zo(e,n),e===null?(s=V1(n.type,null,n.pendingProps,null))?n.memoizedState=s:wt||(s=n.type,e=n.pendingProps,c=du(pe.current).createElement(s),c[hn]=n,c[It]=e,Wn(c,s,e),gn(c),n.stateNode=c):n.memoizedState=V1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return un(n),e===null&&wt&&(c=n.stateNode=q1(n.type,n.pendingProps,pe.current),Xn=n,Vr=!0,p=en,_s(n.type)?(Hh=p,en=Yr(c.firstChild)):en=p),Kn(e,n,n.pendingProps.children,s),Zo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&wt&&((p=c=en)&&(c=ip(c,n.type,n.pendingProps,Vr),c!==null?(n.stateNode=c,Xn=n,en=Yr(c.firstChild),Vr=!1,p=!0):p=!1),p||us(n)),un(n),p=n.type,w=n.pendingProps,S=e!==null?e.memoizedProps:null,c=w.children,Uh(p,w)?c=null:S!==null&&Uh(p,S)&&(n.flags|=32),n.memoizedState!==null&&(p=jc(e,n,wx,null,null,s),Vl._currentValue=p),Zo(e,n),Kn(e,n,c,s),n.child;case 6:return e===null&&wt&&((e=s=en)&&(s=sp(s,n.pendingProps,Vr),s!==null?(n.stateNode=s,Xn=n,en=null,e=!0):e=!1),e||us(n)),null;case 13:return Id(e,n,s);case 4:return st(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=Js(n,null,c,s):Kn(e,n,c,s),n.child;case 11:return Ed(e,n,n.type,n.pendingProps,s);case 7:return Kn(e,n,n.pendingProps,s),n.child;case 8:return Kn(e,n,n.pendingProps.children,s),n.child;case 12:return Kn(e,n,n.pendingProps.children,s),n.child;case 10:return c=n.pendingProps,cs(n,n.type,c.value),Kn(e,n,c.children,s),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,Ks(n),p=Yn(p),c=c(p),n.flags|=1,Kn(e,n,c,s),n.child;case 14:return _d(e,n,n.type,n.pendingProps,s);case 15:return Ad(e,n,n.type,n.pendingProps,s);case 19:return Md(e,n,s);case 31:return Tx(e,n,s);case 22:return Cd(e,n,s,n.pendingProps);case 24:return Ks(n),c=Yn(Tn),e===null?(p=Tc(),p===null&&(p=Kt,w=Cc(),p.pooledCache=w,w.refCount++,w!==null&&(p.pooledCacheLanes|=s),p=w),n.memoizedState={parent:c,cache:p},Nc(n),cs(n,Tn,p)):((e.lanes&s)!==0&&(Rc(e,n),Cl(n,null,null,s),Al()),p=e.memoizedState,w=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),cs(n,Tn,c)):(c=w.cache,cs(n,Tn,c),c!==p.cache&&Ac(n,[Tn],s,!0))),Kn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(h(156,n.tag))}function Mi(e){e.flags|=4}function hh(e,n,s,c,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(l1())e.flags|=8192;else throw Qs=ko,Oc}else e.flags&=-16777217}function kd(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Z1(n))if(l1())e.flags|=8192;else throw Qs=ko,Oc}function Jo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ce():536870912,e.lanes|=n,ja|=n)}function Il(e,n){if(!wt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function tn(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=s,n}function Nx(e,n,s){var c=n.pendingProps;switch(wc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(n),null;case 1:return tn(n),null;case 3:return s=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Ni(Tn),Nt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Aa(n)?Mi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,vc())),tn(n),null;case 26:var p=n.type,w=n.memoizedState;return e===null?(Mi(n),w!==null?(tn(n),kd(n,w)):(tn(n),hh(n,p,null,c,s))):w?w!==e.memoizedState?(Mi(n),tn(n),kd(n,w)):(tn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&Mi(n),tn(n),hh(n,p,e,c,s)),null;case 27:if(Zt(n),s=pe.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Mi(n);else{if(!c){if(n.stateNode===null)throw Error(h(166));return tn(n),null}e=Ee.current,Aa(n)?g0(n):(e=q1(p,c,s),n.stateNode=e,Mi(n))}return tn(n),null;case 5:if(Zt(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Mi(n);else{if(!c){if(n.stateNode===null)throw Error(h(166));return tn(n),null}if(w=Ee.current,Aa(n))g0(n);else{var S=du(pe.current);switch(w){case 1:w=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:w=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":w=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":w=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":w=S.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?w.multiple=!0:c.size&&(w.size=c.size);break;default:w=typeof c.is=="string"?S.createElement(p,{is:c.is}):S.createElement(p)}}w[hn]=n,w[It]=c;e:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)w.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break e;for(;S.sibling===null;){if(S.return===null||S.return===n)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=w;e:switch(Wn(w,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Mi(n)}}return tn(n),hh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&Mi(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(h(166));if(e=pe.current,Aa(n)){if(e=n.stateNode,s=n.memoizedProps,c=null,p=Xn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[hn]=n,e=!!(e.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||I1(e.nodeValue,s)),e||us(n,!0)}else e=du(e).createTextNode(c),e[hn]=n,n.stateNode=e}return tn(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(c=Aa(n),s!==null){if(e===null){if(!c)throw Error(h(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(557));e[hn]=n}else Xs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),e=!1}else s=vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(Mr(n),n):(Mr(n),null);if((n.flags&128)!==0)throw Error(h(558))}return tn(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Aa(n),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(h(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(h(317));p[hn]=n}else Xs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tn(n),p=!1}else p=vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Mr(n),n):(Mr(n),null)}return Mr(n),(n.flags&128)!==0?(n.lanes=s,n):(s=c!==null,e=e!==null&&e.memoizedState!==null,s&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),w=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(w=c.memoizedState.cachePool.pool),w!==p&&(c.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Jo(n,n.updateQueue),tn(n),null);case 4:return Nt(),e===null&&Mh(n.stateNode.containerInfo),tn(n),null;case 10:return Ni(n.type),tn(n),null;case 19:if(le(_n),c=n.memoizedState,c===null)return tn(n),null;if(p=(n.flags&128)!==0,w=c.rendering,w===null)if(p)Il(c,!1);else{if(pn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Po(e),w!==null){for(n.flags|=128,Il(c,!1),e=w.updateQueue,n.updateQueue=e,Jo(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)u0(s,e),s=s.sibling;return ve(_n,_n.current&1|2),wt&&Ti(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&gt()>ru&&(n.flags|=128,p=!0,Il(c,!1),n.lanes=4194304)}else{if(!p)if(e=Po(w),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,Jo(n,e),Il(c,!0),c.tail===null&&c.tailMode==="hidden"&&!w.alternate&&!wt)return tn(n),null}else 2*gt()-c.renderingStartTime>ru&&s!==536870912&&(n.flags|=128,p=!0,Il(c,!1),n.lanes=4194304);c.isBackwards?(w.sibling=n.child,n.child=w):(e=c.last,e!==null?e.sibling=w:n.child=w,c.last=w)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=gt(),e.sibling=null,s=_n.current,ve(_n,p?s&1|2:s&1),wt&&Ti(n,c.treeForkCount),e):(tn(n),null);case 22:case 23:return Mr(n),Bc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(s&536870912)!==0&&(n.flags&128)===0&&(tn(n),n.subtreeFlags&6&&(n.flags|=8192)):tn(n),s=n.updateQueue,s!==null&&Jo(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==s&&(n.flags|=2048),e!==null&&le(Ws),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Ni(Tn),tn(n),null;case 25:return null;case 30:return null}throw Error(h(156,n.tag))}function Rx(e,n){switch(wc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ni(Tn),Nt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Zt(n),null;case 31:if(n.memoizedState!==null){if(Mr(n),n.alternate===null)throw Error(h(340));Xs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Mr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(h(340));Xs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return le(_n),null;case 4:return Nt(),null;case 10:return Ni(n.type),null;case 22:case 23:return Mr(n),Bc(),e!==null&&le(Ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ni(Tn),null;case 25:return null;default:return null}}function Ld(e,n){switch(wc(n),n.tag){case 3:Ni(Tn),Nt();break;case 26:case 27:case 5:Zt(n);break;case 4:Nt();break;case 31:n.memoizedState!==null&&Mr(n);break;case 13:Mr(n);break;case 19:le(_n);break;case 10:Ni(n.type);break;case 22:case 23:Mr(n),Bc(),e!==null&&le(Ws);break;case 24:Ni(Tn)}}function Dl(e,n){try{var s=n.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var p=c.next;s=p;do{if((s.tag&e)===e){c=void 0;var w=s.create,S=s.inst;c=w(),S.destroy=c}s=s.next}while(s!==p)}}catch(D){Pt(n,n.return,D)}}function xs(e,n,s){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var w=p.next;c=w;do{if((c.tag&e)===e){var S=c.inst,D=S.destroy;if(D!==void 0){S.destroy=void 0,p=n;var U=s,Q=D;try{Q()}catch(oe){Pt(p,U,oe)}}}c=c.next}while(c!==w)}}catch(oe){Pt(n,n.return,oe)}}function jd(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{T0(n,s)}catch(c){Pt(e,e.return,c)}}}function Ud(e,n,s){s.props=ea(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(c){Pt(e,n,c)}}function Ml(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof s=="function"?e.refCleanup=s(c):s.current=c}}catch(p){Pt(e,n,p)}}function di(e,n){var s=e.ref,c=e.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(p){Pt(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(p){Pt(e,n,p)}else s.current=null}function Pd(e){var n=e.type,s=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(p){Pt(e,e.return,p)}}function fh(e,n,s){try{var c=e.stateNode;Jx(c,e.type,s,n),c[It]=n}catch(p){Pt(e,e.return,p)}}function Fd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_s(e.type)||e.tag===4}function dh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_s(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gh(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=fr));else if(c!==4&&(c===27&&_s(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(gh(e,n,s),e=e.sibling;e!==null;)gh(e,n,s),e=e.sibling}function $o(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(c!==4&&(c===27&&_s(e.type)&&(s=e.stateNode),e=e.child,e!==null))for($o(e,n,s),e=e.sibling;e!==null;)$o(e,n,s),e=e.sibling}function zd(e){var n=e.stateNode,s=e.memoizedProps;try{for(var c=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Wn(n,c,s),n[hn]=e,n[It]=s}catch(w){Pt(e,e.return,w)}}var Bi=!1,Rn=!1,mh=!1,qd=typeof WeakSet=="function"?WeakSet:Set,qn=null;function Ix(e,n){if(e=e.containerInfo,Lh=bu,e=O(e),I(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var p=c.anchorOffset,w=c.focusNode;c=c.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var S=0,D=-1,U=-1,Q=0,oe=0,fe=e,$=null;t:for(;;){for(var se;fe!==s||p!==0&&fe.nodeType!==3||(D=S+p),fe!==w||c!==0&&fe.nodeType!==3||(U=S+c),fe.nodeType===3&&(S+=fe.nodeValue.length),(se=fe.firstChild)!==null;)$=fe,fe=se;for(;;){if(fe===e)break t;if($===s&&++Q===p&&(D=S),$===w&&++oe===c&&(U=S),(se=fe.nextSibling)!==null)break;fe=$,$=fe.parentNode}fe=se}s=D===-1||U===-1?null:{start:D,end:U}}else s=null}s=s||{start:0,end:0}}else s=null;for(jh={focusedElem:e,selectionRange:s},bu=!1,qn=n;qn!==null;)if(n=qn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,qn=e;else for(;qn!==null;){switch(n=qn,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)p=e[s],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,p=w.memoizedProps,w=w.memoizedState,c=s.stateNode;try{var Re=ea(s.type,p);e=c.getSnapshotBeforeUpdate(Re,w),c.__reactInternalSnapshotBeforeUpdate=e}catch(He){Pt(s,s.return,He)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Fh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Fh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(h(163))}if(e=n.sibling,e!==null){e.return=n.return,qn=e;break}qn=n.return}}function Hd(e,n,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:Li(e,s),c&4&&Dl(5,s);break;case 1:if(Li(e,s),c&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(S){Pt(s,s.return,S)}else{var p=ea(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(S){Pt(s,s.return,S)}}c&64&&jd(s),c&512&&Ml(s,s.return);break;case 3:if(Li(e,s),c&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{T0(e,n)}catch(S){Pt(s,s.return,S)}}break;case 27:n===null&&c&4&&zd(s);case 26:case 5:Li(e,s),n===null&&c&4&&Pd(s),c&512&&Ml(s,s.return);break;case 12:Li(e,s);break;case 31:Li(e,s),c&4&&Xd(e,s);break;case 13:Li(e,s),c&4&&Yd(e,s),c&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Fx.bind(null,s),ap(e,s))));break;case 22:if(c=s.memoizedState!==null||Bi,!c){n=n!==null&&n.memoizedState!==null||Rn,p=Bi;var w=Rn;Bi=c,(Rn=n)&&!w?ji(e,s,(s.subtreeFlags&8772)!==0):Li(e,s),Bi=p,Rn=w}break;case 30:break;default:Li(e,s)}}function Gd(e){var n=e.alternate;n!==null&&(e.alternate=null,Gd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Gn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ln=null,mr=!1;function ki(e,n,s){for(s=s.child;s!==null;)Vd(e,n,s),s=s.sibling}function Vd(e,n,s){if(we&&typeof we.onCommitFiberUnmount=="function")try{we.onCommitFiberUnmount(Ft,s)}catch{}switch(s.tag){case 26:Rn||di(s,n),ki(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Rn||di(s,n);var c=ln,p=mr;_s(s.type)&&(ln=s.stateNode,mr=!1),ki(e,n,s),ql(s.stateNode),ln=c,mr=p;break;case 5:Rn||di(s,n);case 6:if(c=ln,p=mr,ln=null,ki(e,n,s),ln=c,mr=p,ln!==null)if(mr)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(s.stateNode)}catch(w){Pt(s,n,w)}else try{ln.removeChild(s.stateNode)}catch(w){Pt(s,n,w)}break;case 18:ln!==null&&(mr?(e=ln,j1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Va(e)):j1(ln,s.stateNode));break;case 4:c=ln,p=mr,ln=s.stateNode.containerInfo,mr=!0,ki(e,n,s),ln=c,mr=p;break;case 0:case 11:case 14:case 15:xs(2,s,n),Rn||xs(4,s,n),ki(e,n,s);break;case 1:Rn||(di(s,n),c=s.stateNode,typeof c.componentWillUnmount=="function"&&Ud(s,n,c)),ki(e,n,s);break;case 21:ki(e,n,s);break;case 22:Rn=(c=Rn)||s.memoizedState!==null,ki(e,n,s),Rn=c;break;default:ki(e,n,s)}}function Xd(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Va(e)}catch(s){Pt(n,n.return,s)}}}function Yd(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Va(e)}catch(s){Pt(n,n.return,s)}}function Dx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new qd),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new qd),n;default:throw Error(h(435,e.tag))}}function eu(e,n){var s=Dx(e);n.forEach(function(c){if(!s.has(c)){s.add(c);var p=zx.bind(null,e,c);c.then(p,p)}})}function xr(e,n){var s=n.deletions;if(s!==null)for(var c=0;c<s.length;c++){var p=s[c],w=e,S=n,D=S;e:for(;D!==null;){switch(D.tag){case 27:if(_s(D.type)){ln=D.stateNode,mr=!1;break e}break;case 5:ln=D.stateNode,mr=!1;break e;case 3:case 4:ln=D.stateNode.containerInfo,mr=!0;break e}D=D.return}if(ln===null)throw Error(h(160));Vd(w,S,p),ln=null,mr=!1,w=p.alternate,w!==null&&(w.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Kd(n,e),n=n.sibling}var ti=null;function Kd(e,n){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xr(n,e),pr(e),c&4&&(xs(3,e,e.return),Dl(3,e),xs(5,e,e.return));break;case 1:xr(n,e),pr(e),c&512&&(Rn||s===null||di(s,s.return)),c&64&&Bi&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var p=ti;if(xr(n,e),pr(e),c&512&&(Rn||s===null||di(s,s.return)),c&4){var w=s!==null?s.memoizedState:null;if(c=e.memoizedState,s===null)if(c===null)if(e.stateNode===null){e:{c=e.type,s=e.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":w=p.getElementsByTagName("title")[0],(!w||w[yi]||w[hn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=p.createElement(c),p.head.insertBefore(w,p.querySelector("head > title"))),Wn(w,c,s),w[hn]=e,gn(w),c=w;break e;case"link":var S=K1("link","href",p).get(c+(s.href||""));if(S){for(var D=0;D<S.length;D++)if(w=S[D],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){S.splice(D,1);break t}}w=p.createElement(c),Wn(w,c,s),p.head.appendChild(w);break;case"meta":if(S=K1("meta","content",p).get(c+(s.content||""))){for(D=0;D<S.length;D++)if(w=S[D],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){S.splice(D,1);break t}}w=p.createElement(c),Wn(w,c,s),p.head.appendChild(w);break;default:throw Error(h(468,c))}w[hn]=e,gn(w),c=w}e.stateNode=c}else W1(p,e.type,e.stateNode);else e.stateNode=Y1(p,c,e.memoizedProps);else w!==c?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,c===null?W1(p,e.type,e.stateNode):Y1(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&fh(e,e.memoizedProps,s.memoizedProps)}break;case 27:xr(n,e),pr(e),c&512&&(Rn||s===null||di(s,s.return)),s!==null&&c&4&&fh(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xr(n,e),pr(e),c&512&&(Rn||s===null||di(s,s.return)),e.flags&32){p=e.stateNode;try{Ji(p,"")}catch(Re){Pt(e,e.return,Re)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,fh(e,p,s!==null?s.memoizedProps:p)),c&1024&&(mh=!0);break;case 6:if(xr(n,e),pr(e),c&4){if(e.stateNode===null)throw Error(h(162));c=e.memoizedProps,s=e.stateNode;try{s.nodeValue=c}catch(Re){Pt(e,e.return,Re)}}break;case 3:if(xu=null,p=ti,ti=gu(n.containerInfo),xr(n,e),ti=p,pr(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{Va(n.containerInfo)}catch(Re){Pt(e,e.return,Re)}mh&&(mh=!1,Wd(e));break;case 4:c=ti,ti=gu(e.stateNode.containerInfo),xr(n,e),pr(e),ti=c;break;case 12:xr(n,e),pr(e);break;case 31:xr(n,e),pr(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,eu(e,c)));break;case 13:xr(n,e),pr(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(nu=gt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,eu(e,c)));break;case 22:p=e.memoizedState!==null;var U=s!==null&&s.memoizedState!==null,Q=Bi,oe=Rn;if(Bi=Q||p,Rn=oe||U,xr(n,e),Rn=oe,Bi=Q,pr(e),c&8192)e:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(s===null||U||Bi||Rn||ta(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){U=s=n;try{if(w=U.stateNode,p)S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{D=U.stateNode;var fe=U.memoizedProps.style,$=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;D.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Re){Pt(U,U.return,Re)}}}else if(n.tag===6){if(s===null){U=n;try{U.stateNode.nodeValue=p?"":U.memoizedProps}catch(Re){Pt(U,U.return,Re)}}}else if(n.tag===18){if(s===null){U=n;try{var se=U.stateNode;p?U1(se,!0):U1(U.stateNode,!1)}catch(Re){Pt(U,U.return,Re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,eu(e,s))));break;case 19:xr(n,e),pr(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,eu(e,c)));break;case 30:break;case 21:break;default:xr(n,e),pr(e)}}function pr(e){var n=e.flags;if(n&2){try{for(var s,c=e.return;c!==null;){if(Fd(c)){s=c;break}c=c.return}if(s==null)throw Error(h(160));switch(s.tag){case 27:var p=s.stateNode,w=dh(e);$o(e,w,p);break;case 5:var S=s.stateNode;s.flags&32&&(Ji(S,""),s.flags&=-33);var D=dh(e);$o(e,D,S);break;case 3:case 4:var U=s.stateNode.containerInfo,Q=dh(e);gh(e,Q,U);break;default:throw Error(h(161))}}catch(oe){Pt(e,e.return,oe)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Wd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Wd(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Li(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hd(e,n.alternate,n),n=n.sibling}function ta(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:xs(4,n,n.return),ta(n);break;case 1:di(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Ud(n,n.return,s),ta(n);break;case 27:ql(n.stateNode);case 26:case 5:di(n,n.return),ta(n);break;case 22:n.memoizedState===null&&ta(n);break;case 30:ta(n);break;default:ta(n)}e=e.sibling}}function ji(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=e,w=n,S=w.flags;switch(w.tag){case 0:case 11:case 15:ji(p,w,s),Dl(4,w);break;case 1:if(ji(p,w,s),c=w,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){Pt(c,c.return,Q)}if(c=w,p=c.updateQueue,p!==null){var D=c.stateNode;try{var U=p.shared.hiddenCallbacks;if(U!==null)for(p.shared.hiddenCallbacks=null,p=0;p<U.length;p++)S0(U[p],D)}catch(Q){Pt(c,c.return,Q)}}s&&S&64&&jd(w),Ml(w,w.return);break;case 27:zd(w);case 26:case 5:ji(p,w,s),s&&c===null&&S&4&&Pd(w),Ml(w,w.return);break;case 12:ji(p,w,s);break;case 31:ji(p,w,s),s&&S&4&&Xd(p,w);break;case 13:ji(p,w,s),s&&S&4&&Yd(p,w);break;case 22:w.memoizedState===null&&ji(p,w,s),Ml(w,w.return);break;case 30:break;default:ji(p,w,s)}n=n.sibling}}function xh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&wl(s))}function ph(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e))}function ni(e,n,s,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zd(e,n,s,c),n=n.sibling}function Zd(e,n,s,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:ni(e,n,s,c),p&2048&&Dl(9,n);break;case 1:ni(e,n,s,c);break;case 3:ni(e,n,s,c),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e)));break;case 12:if(p&2048){ni(e,n,s,c),e=n.stateNode;try{var w=n.memoizedProps,S=w.id,D=w.onPostCommit;typeof D=="function"&&D(S,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){Pt(n,n.return,U)}}else ni(e,n,s,c);break;case 31:ni(e,n,s,c);break;case 13:ni(e,n,s,c);break;case 23:break;case 22:w=n.stateNode,S=n.alternate,n.memoizedState!==null?w._visibility&2?ni(e,n,s,c):Bl(e,n):w._visibility&2?ni(e,n,s,c):(w._visibility|=2,Ba(e,n,s,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&xh(S,n);break;case 24:ni(e,n,s,c),p&2048&&ph(n.alternate,n);break;default:ni(e,n,s,c)}}function Ba(e,n,s,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,S=n,D=s,U=c,Q=S.flags;switch(S.tag){case 0:case 11:case 15:Ba(w,S,D,U,p),Dl(8,S);break;case 23:break;case 22:var oe=S.stateNode;S.memoizedState!==null?oe._visibility&2?Ba(w,S,D,U,p):Bl(w,S):(oe._visibility|=2,Ba(w,S,D,U,p)),p&&Q&2048&&xh(S.alternate,S);break;case 24:Ba(w,S,D,U,p),p&&Q&2048&&ph(S.alternate,S);break;default:Ba(w,S,D,U,p)}n=n.sibling}}function Bl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,c=n,p=c.flags;switch(c.tag){case 22:Bl(s,c),p&2048&&xh(c.alternate,c);break;case 24:Bl(s,c),p&2048&&ph(c.alternate,c);break;default:Bl(s,c)}n=n.sibling}}var kl=8192;function ka(e,n,s){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)Qd(e,n,s),e=e.sibling}function Qd(e,n,s){switch(e.tag){case 26:ka(e,n,s),e.flags&kl&&e.memoizedState!==null&&yp(s,ti,e.memoizedState,e.memoizedProps);break;case 5:ka(e,n,s);break;case 3:case 4:var c=ti;ti=gu(e.stateNode.containerInfo),ka(e,n,s),ti=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=kl,kl=16777216,ka(e,n,s),kl=c):ka(e,n,s));break;default:ka(e,n,s)}}function Jd(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ll(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];qn=c,e1(c,e)}Jd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$d(e),e=e.sibling}function $d(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&xs(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,tu(e)):Ll(e);break;default:Ll(e)}}function tu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var c=n[s];qn=c,e1(c,e)}Jd(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:xs(8,n,n.return),tu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,tu(n));break;default:tu(n)}e=e.sibling}}function e1(e,n){for(;qn!==null;){var s=qn;switch(s.tag){case 0:case 11:case 15:xs(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:wl(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,qn=c;else e:for(s=e;qn!==null;){c=qn;var p=c.sibling,w=c.return;if(Gd(c),c===s){qn=null;break e}if(p!==null){p.return=w,qn=p;break e}qn=w}}}var Mx={getCacheForType:function(e){var n=Yn(Tn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Yn(Tn).controller.signal}},Bx=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Kt=null,ft=null,xt=0,Ut=0,Br=null,ps=!1,La=!1,yh=!1,Ui=0,pn=0,ys=0,na=0,wh=0,kr=0,ja=0,jl=null,yr=null,bh=!1,nu=0,t1=0,ru=1/0,iu=null,ws=null,Pn=0,bs=null,Ua=null,Pi=0,vh=0,Eh=null,n1=null,Ul=0,_h=null;function Lr(){return(Mt&2)!==0&&xt!==0?xt&-xt:te.T!==null?Nh():dn()}function r1(){if(kr===0)if((xt&536870912)===0||wt){var e=ut;ut<<=1,(ut&3932160)===0&&(ut=262144),kr=e}else kr=536870912;return e=Dr.current,e!==null&&(e.flags|=32),kr}function wr(e,n,s){(e===Kt&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)&&(Pa(e,0),vs(e,xt,kr,!1)),Qe(e,s),((Mt&2)===0||e!==Kt)&&(e===Kt&&((Mt&2)===0&&(na|=s),pn===4&&vs(e,xt,kr,!1)),gi(e))}function i1(e,n,s){if((Mt&6)!==0)throw Error(h(327));var c=!s&&(n&127)===0&&(n&e.expiredLanes)===0||kn(e,n),p=c?jx(e,n):Ch(e,n,!0),w=c;do{if(p===0){La&&!c&&vs(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!kx(s)){p=Ch(e,n,!1),w=!1;continue}if(p===2){if(w=n,e.errorRecoveryDisabledLanes&w)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;e:{var D=e;p=jl;var U=D.current.memoizedState.isDehydrated;if(U&&(Pa(D,S).flags|=256),S=Ch(D,S,!1),S!==2){if(yh&&!U){D.errorRecoveryDisabledLanes|=w,na|=w,p=4;break e}w=yr,yr=p,w!==null&&(yr===null?yr=w:yr.push.apply(yr,w))}p=S}if(w=!1,p!==2)continue}}if(p===1){Pa(e,0),vs(e,n,0,!0);break}e:{switch(c=e,w=p,w){case 0:case 1:throw Error(h(345));case 4:if((n&4194048)!==n)break;case 6:vs(c,n,kr,!ps);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(h(329))}if((n&62914560)===n&&(p=nu+300-gt(),10<p)){if(vs(c,n,kr,!ps),ai(c,0,!0)!==0)break e;Pi=n,c.timeoutHandle=k1(s1.bind(null,c,s,yr,iu,bh,n,kr,na,ja,ps,w,"Throttled",-0,0),p);break e}s1(c,s,yr,iu,bh,n,kr,na,ja,ps,w,null,-0,0)}}break}while(!0);gi(e)}function s1(e,n,s,c,p,w,S,D,U,Q,oe,fe,$,se){if(e.timeoutHandle=-1,fe=n.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fr},Qd(n,w,fe);var Re=(w&62914560)===w?nu-gt():(w&4194048)===w?t1-gt():0;if(Re=wp(fe,Re),Re!==null){Pi=w,e.cancelPendingCommit=Re(d1.bind(null,e,n,w,s,c,p,S,D,U,oe,fe,null,$,se)),vs(e,w,S,!Q);return}}d1(e,n,w,s,c,p,S,D,U)}function kx(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var p=s[c],w=p.getSnapshot;p=p.value;try{if(!f(w(),p))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function vs(e,n,s,c){n&=~wh,n&=~na,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var p=n;0<p;){var w=31-Ze(p),S=1<<w;c[w]=-1,p&=~S}s!==0&&nr(e,s,n)}function su(){return(Mt&6)===0?(Pl(0),!1):!0}function Ah(){if(ft!==null){if(Ut===0)var e=ft.return;else e=ft,Oi=Ys=null,Fc(e),Na=null,vl=0,e=ft;for(;e!==null;)Ld(e.alternate,e),e=e.return;ft=null}}function Pa(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,tp(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Pi=0,Ah(),Kt=e,ft=s=Si(e.current,null),xt=n,Ut=0,Br=null,ps=!1,La=kn(e,n),yh=!1,ja=kr=wh=na=ys=pn=0,yr=jl=null,bh=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var p=31-Ze(c),w=1<<p;n|=e[p],c&=~w}return Ui=n,So(),s}function a1(e,n){tt=null,te.H=Nl,n===Oa||n===Bo?(n=E0(),Ut=3):n===Oc?(n=E0(),Ut=4):Ut=n===nh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Br=n,ft===null&&(pn=1,Ko(e,qr(n,e.current)))}function l1(){var e=Dr.current;return e===null?!0:(xt&4194048)===xt?Xr===null:(xt&62914560)===xt||(xt&536870912)!==0?e===Xr:!1}function o1(){var e=te.H;return te.H=Nl,e===null?Nl:e}function u1(){var e=te.A;return te.A=Mx,e}function au(){pn=4,ps||(xt&4194048)!==xt&&Dr.current!==null||(La=!0),(ys&134217727)===0&&(na&134217727)===0||Kt===null||vs(Kt,xt,kr,!1)}function Ch(e,n,s){var c=Mt;Mt|=2;var p=o1(),w=u1();(Kt!==e||xt!==n)&&(iu=null,Pa(e,n)),n=!1;var S=pn;e:do try{if(Ut!==0&&ft!==null){var D=ft,U=Br;switch(Ut){case 8:Ah(),S=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(n=!0);var Q=Ut;if(Ut=0,Br=null,Fa(e,D,U,Q),s&&La){S=0;break e}break;default:Q=Ut,Ut=0,Br=null,Fa(e,D,U,Q)}}Lx(),S=pn;break}catch(oe){a1(e,oe)}while(!0);return n&&e.shellSuspendCounter++,Oi=Ys=null,Mt=c,te.H=p,te.A=w,ft===null&&(Kt=null,xt=0,So()),S}function Lx(){for(;ft!==null;)c1(ft)}function jx(e,n){var s=Mt;Mt|=2;var c=o1(),p=u1();Kt!==e||xt!==n?(iu=null,ru=gt()+500,Pa(e,n)):La=kn(e,n);e:do try{if(Ut!==0&&ft!==null){n=ft;var w=Br;t:switch(Ut){case 1:Ut=0,Br=null,Fa(e,n,w,1);break;case 2:case 9:if(b0(w)){Ut=0,Br=null,h1(n);break}n=function(){Ut!==2&&Ut!==9||Kt!==e||(Ut=7),gi(e)},w.then(n,n);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:b0(w)?(Ut=0,Br=null,h1(n)):(Ut=0,Br=null,Fa(e,n,w,7));break;case 5:var S=null;switch(ft.tag){case 26:S=ft.memoizedState;case 5:case 27:var D=ft;if(S?Z1(S):D.stateNode.complete){Ut=0,Br=null;var U=D.sibling;if(U!==null)ft=U;else{var Q=D.return;Q!==null?(ft=Q,lu(Q)):ft=null}break t}}Ut=0,Br=null,Fa(e,n,w,5);break;case 6:Ut=0,Br=null,Fa(e,n,w,6);break;case 8:Ah(),pn=6;break e;default:throw Error(h(462))}}Ux();break}catch(oe){a1(e,oe)}while(!0);return Oi=Ys=null,te.H=c,te.A=p,Mt=s,ft!==null?0:(Kt=null,xt=0,So(),pn)}function Ux(){for(;ft!==null&&!vt();)c1(ft)}function c1(e){var n=Bd(e.alternate,e,Ui);e.memoizedProps=e.pendingProps,n===null?lu(e):ft=n}function h1(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=Od(s,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=Od(s,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:Fc(n);default:Ld(s,n),n=ft=u0(n,Ui),n=Bd(s,n,Ui)}e.memoizedProps=e.pendingProps,n===null?lu(e):ft=n}function Fa(e,n,s,c){Oi=Ys=null,Fc(n),Na=null,vl=0;var p=n.return;try{if(Sx(e,p,n,s,xt)){pn=1,Ko(e,qr(s,e.current)),ft=null;return}}catch(w){if(p!==null)throw ft=p,w;pn=1,Ko(e,qr(s,e.current)),ft=null;return}n.flags&32768?(wt||c===1?e=!0:La||(xt&536870912)!==0?e=!1:(ps=e=!0,(c===2||c===9||c===3||c===6)&&(c=Dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),f1(n,e)):lu(n)}function lu(e){var n=e;do{if((n.flags&32768)!==0){f1(n,ps);return}e=n.return;var s=Nx(n.alternate,n,Ui);if(s!==null){ft=s;return}if(n=n.sibling,n!==null){ft=n;return}ft=n=e}while(n!==null);pn===0&&(pn=5)}function f1(e,n){do{var s=Rx(e.alternate,e);if(s!==null){s.flags&=32767,ft=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){ft=e;return}ft=e=s}while(e!==null);pn=6,ft=null}function d1(e,n,s,c,p,w,S,D,U){e.cancelPendingCommit=null;do ou();while(Pn!==0);if((Mt&6)!==0)throw Error(h(327));if(n!==null){if(n===e.current)throw Error(h(177));if(w=n.lanes|n.childLanes,w|=dc,Rt(e,s,w,S,D,U),e===Kt&&(ft=Kt=null,xt=0),Ua=n,bs=e,Pi=s,vh=w,Eh=p,n1=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qx(tr,function(){return y1(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,p=ce.p,ce.p=2,S=Mt,Mt|=4;try{Ix(e,n,s)}finally{Mt=S,ce.p=p,te.T=c}}Pn=1,g1(),m1(),x1()}}function g1(){if(Pn===1){Pn=0;var e=bs,n=Ua,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=te.T,te.T=null;var c=ce.p;ce.p=2;var p=Mt;Mt|=4;try{Kd(n,e);var w=jh,S=O(e.containerInfo),D=w.focusedElem,U=w.selectionRange;if(S!==D&&D&&D.ownerDocument&&C(D.ownerDocument.documentElement,D)){if(U!==null&&I(D)){var Q=U.start,oe=U.end;if(oe===void 0&&(oe=Q),"selectionStart"in D)D.selectionStart=Q,D.selectionEnd=Math.min(oe,D.value.length);else{var fe=D.ownerDocument||document,$=fe&&fe.defaultView||window;if($.getSelection){var se=$.getSelection(),Re=D.textContent.length,He=Math.min(U.start,Re),Ht=U.end===void 0?He:Math.min(U.end,Re);!se.extend&&He>Ht&&(S=Ht,Ht=He,He=S);var V=E(D,He),q=E(D,Ht);if(V&&q&&(se.rangeCount!==1||se.anchorNode!==V.node||se.anchorOffset!==V.offset||se.focusNode!==q.node||se.focusOffset!==q.offset)){var Z=fe.createRange();Z.setStart(V.node,V.offset),se.removeAllRanges(),He>Ht?(se.addRange(Z),se.extend(q.node,q.offset)):(Z.setEnd(q.node,q.offset),se.addRange(Z))}}}}for(fe=[],se=D;se=se.parentNode;)se.nodeType===1&&fe.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<fe.length;D++){var he=fe[D];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}bu=!!Lh,jh=Lh=null}finally{Mt=p,ce.p=c,te.T=s}}e.current=n,Pn=2}}function m1(){if(Pn===2){Pn=0;var e=bs,n=Ua,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=te.T,te.T=null;var c=ce.p;ce.p=2;var p=Mt;Mt|=4;try{Hd(e,n.alternate,n)}finally{Mt=p,ce.p=c,te.T=s}}Pn=3}}function x1(){if(Pn===4||Pn===3){Pn=0,Is();var e=bs,n=Ua,s=Pi,c=n1;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Pn=5:(Pn=0,Ua=bs=null,p1(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(ws=null),Cr(s),n=n.stateNode,we&&typeof we.onCommitFiberRoot=="function")try{we.onCommitFiberRoot(Ft,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=te.T,p=ce.p,ce.p=2,te.T=null;try{for(var w=e.onRecoverableError,S=0;S<c.length;S++){var D=c[S];w(D.value,{componentStack:D.stack})}}finally{te.T=n,ce.p=p}}(Pi&3)!==0&&ou(),gi(e),p=e.pendingLanes,(s&261930)!==0&&(p&42)!==0?e===_h?Ul++:(Ul=0,_h=e):Ul=0,Pl(0)}}function p1(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,wl(n)))}function ou(){return g1(),m1(),x1(),y1()}function y1(){if(Pn!==5)return!1;var e=bs,n=vh;vh=0;var s=Cr(Pi),c=te.T,p=ce.p;try{ce.p=32>s?32:s,te.T=null,s=Eh,Eh=null;var w=bs,S=Pi;if(Pn=0,Ua=bs=null,Pi=0,(Mt&6)!==0)throw Error(h(331));var D=Mt;if(Mt|=4,$d(w.current),Zd(w,w.current,S,s),Mt=D,Pl(0,!1),we&&typeof we.onPostCommitFiberRoot=="function")try{we.onPostCommitFiberRoot(Ft,w)}catch{}return!0}finally{ce.p=p,te.T=c,p1(e,n)}}function w1(e,n,s){n=qr(s,n),n=th(e.stateNode,n,2),e=ds(e,n,2),e!==null&&(Qe(e,2),gi(e))}function Pt(e,n,s){if(e.tag===3)w1(e,e,s);else for(;n!==null;){if(n.tag===3){w1(n,e,s);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ws===null||!ws.has(c))){e=qr(s,e),s=bd(2),c=ds(n,s,2),c!==null&&(vd(s,c,n,e),Qe(c,2),gi(c));break}}n=n.return}}function Sh(e,n,s){var c=e.pingCache;if(c===null){c=e.pingCache=new Bx;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(s)||(yh=!0,p.add(s),e=Px.bind(null,e,n,s),n.then(e,e))}function Px(e,n,s){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Kt===e&&(xt&s)===s&&(pn===4||pn===3&&(xt&62914560)===xt&&300>gt()-nu?(Mt&2)===0&&Pa(e,0):wh|=s,ja===xt&&(ja=0)),gi(e)}function b1(e,n){n===0&&(n=Ce()),e=Gs(e,n),e!==null&&(Qe(e,n),gi(e))}function Fx(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),b1(e,s)}function zx(e,n){var s=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(h(314))}c!==null&&c.delete(n),b1(e,s)}function qx(e,n){return _r(e,n)}var uu=null,za=null,Th=!1,cu=!1,Oh=!1,Es=0;function gi(e){e!==za&&e.next===null&&(za===null?uu=za=e:za=za.next=e),cu=!0,Th||(Th=!0,Gx())}function Pl(e,n){if(!Oh&&cu){Oh=!0;do for(var s=!1,c=uu;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var w=0;else{var S=c.suspendedLanes,D=c.pingedLanes;w=(1<<31-Ze(42|e)+1)-1,w&=p&~(S&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,A1(c,w))}else w=xt,w=ai(c,c===Kt?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(w&3)===0||kn(c,w)||(s=!0,A1(c,w));c=c.next}while(s);Oh=!1}}function Hx(){v1()}function v1(){cu=Th=!1;var e=0;Es!==0&&ep()&&(e=Es);for(var n=gt(),s=null,c=uu;c!==null;){var p=c.next,w=E1(c,n);w===0?(c.next=null,s===null?uu=p:s.next=p,p===null&&(za=s)):(s=c,(e!==0||(w&3)!==0)&&(cu=!0)),c=p}Pn!==0&&Pn!==5||Pl(e),Es!==0&&(Es=0)}function E1(e,n){for(var s=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var S=31-Ze(w),D=1<<S,U=p[S];U===-1?((D&s)===0||(D&c)!==0)&&(p[S]=Y(D,n)):U<=n&&(e.expiredLanes|=D),w&=~D}if(n=Kt,s=xt,s=ai(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,s===0||e===n&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Te(c),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||kn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(c!==null&&Te(c),Cr(s)){case 2:case 8:s=Ms;break;case 32:s=tr;break;case 268435456:s=Bs;break;default:s=tr}return c=_1.bind(null,e),s=_r(s,c),e.callbackPriority=n,e.callbackNode=s,n}return c!==null&&c!==null&&Te(c),e.callbackPriority=2,e.callbackNode=null,2}function _1(e,n){if(Pn!==0&&Pn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ou()&&e.callbackNode!==s)return null;var c=xt;return c=ai(e,e===Kt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(i1(e,c,n),E1(e,gt()),e.callbackNode!=null&&e.callbackNode===s?_1.bind(null,e):null)}function A1(e,n){if(ou())return null;i1(e,n,!0)}function Gx(){np(function(){(Mt&6)!==0?_r(Jn,Hx):v1()})}function Nh(){if(Es===0){var e=Sa;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Es=e}return Es}function C1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$i(""+e)}function S1(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function Vx(e,n,s,c,p){if(n==="submit"&&s&&s.stateNode===p){var w=C1((p[It]||null).action),S=c.submitter;S&&(n=(n=S[It]||null)?C1(n.formAction):S.getAttribute("formAction"),n!==null&&(w=n,S=null));var D=new Ln("action","action",null,c,p);e.push({event:D,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Es!==0){var U=S?S1(p,S):new FormData(p);Wc(s,{pending:!0,data:U,method:p.method,action:w},null,U)}}else typeof w=="function"&&(D.preventDefault(),U=S?S1(p,S):new FormData(p),Wc(s,{pending:!0,data:U,method:p.method,action:w},w,U))},currentTarget:p}]})}}for(var Rh=0;Rh<xl.length;Rh++){var Ih=xl[Rh],Xx=Ih.toLowerCase(),Yx=Ih[0].toUpperCase()+Ih.slice(1);ei(Xx,"on"+Yx)}ei(gr,"onAnimationEnd"),ei(Vn,"onAnimationIteration"),ei(jt,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Un,"onTransitionRun"),ei(or,"onTransitionStart"),ei(as,"onTransitionCancel"),ei(Ci,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function T1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],p=c.event;c=c.listeners;e:{var w=void 0;if(n)for(var S=c.length-1;0<=S;S--){var D=c[S],U=D.instance,Q=D.currentTarget;if(D=D.listener,U!==w&&p.isPropagationStopped())break e;w=D,p.currentTarget=Q;try{w(p)}catch(oe){Co(oe)}p.currentTarget=null,w=U}else for(S=0;S<c.length;S++){if(D=c[S],U=D.instance,Q=D.currentTarget,D=D.listener,U!==w&&p.isPropagationStopped())break e;w=D,p.currentTarget=Q;try{w(p)}catch(oe){Co(oe)}p.currentTarget=null,w=U}}}}function dt(e,n){var s=n[hr];s===void 0&&(s=n[hr]=new Set);var c=e+"__bubble";s.has(c)||(O1(n,e,2,!1),s.add(c))}function Dh(e,n,s){var c=0;n&&(c|=4),O1(s,e,c,n)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Mh(e){if(!e[hu]){e[hu]=!0,ge.forEach(function(s){s!=="selectionchange"&&(Kx.has(s)||Dh(s,!1,e),Dh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[hu]||(n[hu]=!0,Dh("selectionchange",!1,n))}}function O1(e,n,s,c){switch(rg(n)){case 2:var p=Ep;break;case 8:p=_p;break;default:p=Kh}s=p.bind(null,n,s,e),p=void 0,!ul||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function Bh(e,n,s,c,p){var w=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var D=c.stateNode.containerInfo;if(D===p)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;D!==null;){if(S=Qt(D),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=w=S;continue e}D=D.parentNode}}c=c.return}go(function(){var Q=w,oe=ol(s),fe=[];e:{var $=Ao.get(e);if($!==void 0){var se=Ln,Re=e;switch(e){case"keypress":if(li(s)===0)break e;case"keydown":case"keyup":se=pa;break;case"focusin":Re="focus",se=fl;break;case"focusout":Re="blur",se=fl;break;case"beforeblur":case"afterblur":se=fl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=ma;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=cc;break;case gr:case Vn:case jt:se=nt;break;case Ci:se=vi;break;case"scroll":case"scrollend":se=mo;break;case"wheel":se=hc;break;case"copy":case"cut":case"paste":se=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Lt;break;case"toggle":case"beforetoggle":se=gl}var He=(n&4)!==0,Ht=!He&&(e==="scroll"||e==="scrollend"),V=He?$!==null?$+"Capture":null:$;He=[];for(var q=Q,Z;q!==null;){var he=q;if(Z=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Z===null||V===null||(he=Ye(q,V),he!=null&&He.push(zl(q,he,Z))),Ht)break;q=q.return}0<He.length&&($=new se($,Re,null,s,oe),fe.push({event:$,listeners:He}))}}if((n&7)===0){e:{if($=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",$&&s!==Ls&&(Re=s.relatedTarget||s.fromElement)&&(Qt(Re)||Re[rr]))break e;if((se||$)&&($=oe.window===oe?oe:($=oe.ownerDocument)?$.defaultView||$.parentWindow:window,se?(Re=s.relatedTarget||s.toElement,se=Q,Re=Re?Qt(Re):null,Re!==null&&(Ht=g(Re),He=Re.tag,Re!==Ht||He!==5&&He!==27&&He!==6)&&(Re=null)):(se=null,Re=Q),se!==Re)){if(He=Dt,he="onMouseLeave",V="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(He=Lt,he="onPointerLeave",V="onPointerEnter",q="pointer"),Ht=se==null?$:Ki(se),Z=Re==null?$:Ki(Re),$=new He(he,q+"leave",se,s,oe),$.target=Ht,$.relatedTarget=Z,he=null,Qt(oe)===Q&&(He=new He(V,q+"enter",Re,s,oe),He.target=Z,He.relatedTarget=Ht,he=He),Ht=he,se&&Re)t:{for(He=Wx,V=se,q=Re,Z=0,he=V;he;he=He(he))Z++;he=0;for(var Fe=q;Fe;Fe=He(Fe))he++;for(;0<Z-he;)V=He(V),Z--;for(;0<he-Z;)q=He(q),he--;for(;Z--;){if(V===q||q!==null&&V===q.alternate){He=V;break t}V=He(V),q=He(q)}He=null}else He=null;se!==null&&N1(fe,$,se,He,!1),Re!==null&&Ht!==null&&N1(fe,Ht,Re,He,!0)}}e:{if($=Q?Ki(Q):window,se=$.nodeName&&$.nodeName.toLowerCase(),se==="select"||se==="input"&&$.type==="file")var St=Rr;else if(ml($))if(_o)St=o;else{St=r;var De=t}else se=$.nodeName,!se||se.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Q&&Vt(Q.elementType)&&(St=Rr):St=i;if(St&&(St=St(e,Q))){Nr(fe,St,s,oe);break e}De&&De(e,$,Q),e==="focusout"&&Q&&$.type==="number"&&Q.memoizedProps.value!=null&&B($,"number",$.value)}switch(De=Q?Ki(Q):window,e){case"focusin":(ml(De)||De.contentEditable==="true")&&(P=De,z=Q,X=null);break;case"focusout":X=z=P=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,be(fe,s,oe);break;case"selectionchange":if(L)break;case"keydown":case"keyup":be(fe,s,oe)}var rt;if(Ps)e:{switch(e){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else ss?Eo(e,s)&&(pt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(pt="onCompositionStart");pt&&(vo&&s.locale!=="ko"&&(ss||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&ss&&(rt=es()):(Jr=oe,$r="value"in Jr?Jr.value:Jr.textContent,ss=!0)),De=fu(Q,pt),0<De.length&&(pt=new yo(pt,e,null,s,oe),fe.push({event:pt,listeners:De}),rt?pt.data=rt:(rt=is(s),rt!==null&&(pt.data=rt)))),(rt=bo?ci(e,s):wa(e,s))&&(pt=fu(Q,"onBeforeInput"),0<pt.length&&(De=new yo("onBeforeInput","beforeinput",null,s,oe),fe.push({event:De,listeners:pt}),De.data=rt)),Vx(fe,e,Q,s,oe)}T1(fe,n)})}function zl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function fu(e,n){for(var s=n+"Capture",c=[];e!==null;){var p=e,w=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||w===null||(p=Ye(e,s),p!=null&&c.unshift(zl(e,p,w)),p=Ye(e,n),p!=null&&c.push(zl(e,p,w))),e.tag===3)return c;e=e.return}return[]}function Wx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function N1(e,n,s,c,p){for(var w=n._reactName,S=[];s!==null&&s!==c;){var D=s,U=D.alternate,Q=D.stateNode;if(D=D.tag,U!==null&&U===c)break;D!==5&&D!==26&&D!==27||Q===null||(U=Q,p?(Q=Ye(s,w),Q!=null&&S.unshift(zl(s,Q,U))):p||(Q=Ye(s,w),Q!=null&&S.push(zl(s,Q,U)))),s=s.return}S.length!==0&&e.push({event:n,listeners:S})}var Zx=/\r\n?/g,Qx=/\u0000|\uFFFD/g;function R1(e){return(typeof e=="string"?e:""+e).replace(Zx,`
`).replace(Qx,"")}function I1(e,n){return n=R1(n),R1(e)===n}function qt(e,n,s,c,p,w){switch(s){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Ji(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Ji(e,""+c);break;case"className":Zi(e,"class",c);break;case"tabIndex":Zi(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Zi(e,s,c);break;case"style":Pe(e,c,w);break;case"data":if(n!=="object"){Zi(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=$i(""+c),e.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&qt(e,n,"name",p.name,p,null),qt(e,n,"formEncType",p.formEncType,p,null),qt(e,n,"formMethod",p.formMethod,p,null),qt(e,n,"formTarget",p.formTarget,p,null)):(qt(e,n,"encType",p.encType,p,null),qt(e,n,"method",p.method,p,null),qt(e,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(s);break}c=$i(""+c),e.setAttribute(s,c);break;case"onClick":c!=null&&(e.onclick=fr);break;case"onScroll":c!=null&&dt("scroll",e);break;case"onScrollEnd":c!=null&&dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(h(61));if(s=c.__html,s!=null){if(p.children!=null)throw Error(h(60));e.innerHTML=s}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}s=$i(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""+c):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":c===!0?e.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(s,c):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(s,c):e.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(s):e.setAttribute(s,c);break;case"popover":dt("beforetoggle",e),dt("toggle",e),Wi(e,"popover",c);break;case"xlinkActuate":Tr(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Tr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Tr(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Tr(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Tr(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Tr(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Tr(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Tr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Tr(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Wi(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=fo.get(s)||s,Wi(e,s,c))}}function kh(e,n,s,c,p,w){switch(s){case"style":Pe(e,c,w);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(h(61));if(s=c.__html,s!=null){if(p.children!=null)throw Error(h(60));e.innerHTML=s}}break;case"children":typeof c=="string"?Ji(e,c):(typeof c=="number"||typeof c=="bigint")&&Ji(e,""+c);break;case"onScroll":c!=null&&dt("scroll",e);break;case"onScrollEnd":c!=null&&dt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ho.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(p=s.endsWith("Capture"),n=s.slice(2,p?s.length-7:void 0),w=e[It]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,p),typeof c=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,c,p);break e}s in e?e[s]=c:c===!0?e.setAttribute(s,""):Wi(e,s,c)}}}function Wn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",e),dt("load",e);var c=!1,p=!1,w;for(w in s)if(s.hasOwnProperty(w)){var S=s[w];if(S!=null)switch(w){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:qt(e,n,w,S,s,null)}}p&&qt(e,n,"srcSet",s.srcSet,s,null),c&&qt(e,n,"src",s.src,s,null);return;case"input":dt("invalid",e);var D=w=S=p=null,U=null,Q=null;for(c in s)if(s.hasOwnProperty(c)){var oe=s[c];if(oe!=null)switch(c){case"name":p=oe;break;case"type":S=oe;break;case"checked":U=oe;break;case"defaultChecked":Q=oe;break;case"value":w=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(h(137,n));break;default:qt(e,n,c,oe,s,null)}}K(e,w,D,U,Q,S,p,!1);return;case"select":dt("invalid",e),c=S=w=null;for(p in s)if(s.hasOwnProperty(p)&&(D=s[p],D!=null))switch(p){case"value":w=D;break;case"defaultValue":S=D;break;case"multiple":c=D;default:qt(e,n,p,D,s,null)}n=w,s=S,e.multiple=!!c,n!=null?Ie(e,!!c,n,!1):s!=null&&Ie(e,!!c,s,!0);return;case"textarea":dt("invalid",e),w=p=c=null;for(S in s)if(s.hasOwnProperty(S)&&(D=s[S],D!=null))switch(S){case"value":c=D;break;case"defaultValue":p=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(h(91));break;default:qt(e,n,S,D,s,null)}ar(e,c,p,w);return;case"option":for(U in s)if(s.hasOwnProperty(U)&&(c=s[U],c!=null))switch(U){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:qt(e,n,U,c,s,null)}return;case"dialog":dt("beforetoggle",e),dt("toggle",e),dt("cancel",e),dt("close",e);break;case"iframe":case"object":dt("load",e);break;case"video":case"audio":for(c=0;c<Fl.length;c++)dt(Fl[c],e);break;case"image":dt("error",e),dt("load",e);break;case"details":dt("toggle",e);break;case"embed":case"source":case"link":dt("error",e),dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in s)if(s.hasOwnProperty(Q)&&(c=s[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:qt(e,n,Q,c,s,null)}return;default:if(Vt(n)){for(oe in s)s.hasOwnProperty(oe)&&(c=s[oe],c!==void 0&&kh(e,n,oe,c,s,void 0));return}}for(D in s)s.hasOwnProperty(D)&&(c=s[D],c!=null&&qt(e,n,D,c,s,null))}function Jx(e,n,s,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,w=null,S=null,D=null,U=null,Q=null,oe=null;for(se in s){var fe=s[se];if(s.hasOwnProperty(se)&&fe!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":U=fe;default:c.hasOwnProperty(se)||qt(e,n,se,null,c,fe)}}for(var $ in c){var se=c[$];if(fe=s[$],c.hasOwnProperty($)&&(se!=null||fe!=null))switch($){case"type":w=se;break;case"name":p=se;break;case"checked":Q=se;break;case"defaultChecked":oe=se;break;case"value":S=se;break;case"defaultValue":D=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(h(137,n));break;default:se!==fe&&qt(e,n,$,se,c,fe)}}Cn(e,S,D,U,Q,oe,w,p);return;case"select":se=S=D=$=null;for(w in s)if(U=s[w],s.hasOwnProperty(w)&&U!=null)switch(w){case"value":break;case"multiple":se=U;default:c.hasOwnProperty(w)||qt(e,n,w,null,c,U)}for(p in c)if(w=c[p],U=s[p],c.hasOwnProperty(p)&&(w!=null||U!=null))switch(p){case"value":$=w;break;case"defaultValue":D=w;break;case"multiple":S=w;default:w!==U&&qt(e,n,p,w,c,U)}n=D,s=S,c=se,$!=null?Ie(e,!!s,$,!1):!!c!=!!s&&(n!=null?Ie(e,!!s,n,!0):Ie(e,!!s,s?[]:"",!1));return;case"textarea":se=$=null;for(D in s)if(p=s[D],s.hasOwnProperty(D)&&p!=null&&!c.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:qt(e,n,D,null,c,p)}for(S in c)if(p=c[S],w=s[S],c.hasOwnProperty(S)&&(p!=null||w!=null))switch(S){case"value":$=p;break;case"defaultValue":se=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(h(91));break;default:p!==w&&qt(e,n,S,p,c,w)}vn(e,$,se);return;case"option":for(var Re in s)if($=s[Re],s.hasOwnProperty(Re)&&$!=null&&!c.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:qt(e,n,Re,null,c,$)}for(U in c)if($=c[U],se=s[U],c.hasOwnProperty(U)&&$!==se&&($!=null||se!=null))switch(U){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:qt(e,n,U,$,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in s)$=s[He],s.hasOwnProperty(He)&&$!=null&&!c.hasOwnProperty(He)&&qt(e,n,He,null,c,$);for(Q in c)if($=c[Q],se=s[Q],c.hasOwnProperty(Q)&&$!==se&&($!=null||se!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(h(137,n));break;default:qt(e,n,Q,$,c,se)}return;default:if(Vt(n)){for(var Ht in s)$=s[Ht],s.hasOwnProperty(Ht)&&$!==void 0&&!c.hasOwnProperty(Ht)&&kh(e,n,Ht,void 0,c,$);for(oe in c)$=c[oe],se=s[oe],!c.hasOwnProperty(oe)||$===se||$===void 0&&se===void 0||kh(e,n,oe,$,c,se);return}}for(var V in s)$=s[V],s.hasOwnProperty(V)&&$!=null&&!c.hasOwnProperty(V)&&qt(e,n,V,null,c,$);for(fe in c)$=c[fe],se=s[fe],!c.hasOwnProperty(fe)||$===se||$==null&&se==null||qt(e,n,fe,$,c,se)}function D1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $x(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),c=0;c<s.length;c++){var p=s[c],w=p.transferSize,S=p.initiatorType,D=p.duration;if(w&&D&&D1(S)){for(S=0,D=p.responseEnd,c+=1;c<s.length;c++){var U=s[c],Q=U.startTime;if(Q>D)break;var oe=U.transferSize,fe=U.initiatorType;oe&&D1(fe)&&(U=U.responseEnd,S+=oe*(U<D?1:(D-Q)/(U-Q)))}if(--c,n+=8*(w+S)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Lh=null,jh=null;function du(e){return e.nodeType===9?e:e.ownerDocument}function M1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Uh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ph=null;function ep(){var e=window.event;return e&&e.type==="popstate"?e===Ph?!1:(Ph=e,!0):(Ph=null,!1)}var k1=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,L1=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof L1<"u"?function(e){return L1.resolve(null).then(e).catch(rp)}:k1;function rp(e){setTimeout(function(){throw e})}function _s(e){return e==="head"}function j1(e,n){var s=n,c=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"||s==="/&"){if(c===0){e.removeChild(p),Va(n);return}c--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")c++;else if(s==="html")ql(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ql(s);for(var w=s.firstChild;w;){var S=w.nextSibling,D=w.nodeName;w[yi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=S}}else s==="body"&&ql(e.ownerDocument.body);s=p}while(s);Va(n)}function U1(e,n){var s=e;e=0;do{var c=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=c}while(s)}function Fh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Fh(s),Gn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ip(e,n,s,c){for(;e.nodeType===1;){var p=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[yi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Yr(e.nextSibling),e===null)break}return null}function sp(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Yr(e.nextSibling),e===null))return null;return e}function P1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Yr(e.nextSibling),e===null))return null;return e}function zh(e){return e.data==="$?"||e.data==="$~"}function qh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ap(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var c=function(){n(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Yr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Hh=null;function F1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Yr(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function z1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function q1(e,n,s){switch(n=du(s),e){case"html":if(e=n.documentElement,!e)throw Error(h(452));return e;case"head":if(e=n.head,!e)throw Error(h(453));return e;case"body":if(e=n.body,!e)throw Error(h(454));return e;default:throw Error(h(451))}}function ql(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Gn(e)}var Kr=new Map,H1=new Set;function gu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fi=ce.d;ce.d={f:lp,r:op,D:up,C:cp,L:hp,m:fp,X:gp,S:dp,M:mp};function lp(){var e=Fi.f(),n=su();return e||n}function op(e){var n=yt(e);n!==null&&n.tag===5&&n.type==="form"?ad(n):Fi.r(e)}var qa=typeof document>"u"?null:document;function G1(e,n,s){var c=qa;if(c&&typeof n=="string"&&n){var p=lt(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof s=="string"&&(p+='[crossorigin="'+s+'"]'),H1.has(p)||(H1.add(p),e={rel:e,crossOrigin:s,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),Wn(n,"link",e),gn(n),c.head.appendChild(n)))}}function up(e){Fi.D(e),G1("dns-prefetch",e,null)}function cp(e,n){Fi.C(e,n),G1("preconnect",e,n)}function hp(e,n,s){Fi.L(e,n,s);var c=qa;if(c&&e&&n){var p='link[rel="preload"][as="'+lt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(p+='[imagesrcset="'+lt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(p+='[imagesizes="'+lt(s.imageSizes)+'"]')):p+='[href="'+lt(e)+'"]';var w=p;switch(n){case"style":w=Ha(e);break;case"script":w=Ga(e)}Kr.has(w)||(e=R({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Kr.set(w,e),c.querySelector(p)!==null||n==="style"&&c.querySelector(Hl(w))||n==="script"&&c.querySelector(Gl(w))||(n=c.createElement("link"),Wn(n,"link",e),gn(n),c.head.appendChild(n)))}}function fp(e,n){Fi.m(e,n);var s=qa;if(s&&e){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+lt(c)+'"][href="'+lt(e)+'"]',w=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ga(e)}if(!Kr.has(w)&&(e=R({rel:"modulepreload",href:e},n),Kr.set(w,e),s.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Gl(w)))return}c=s.createElement("link"),Wn(c,"link",e),gn(c),s.head.appendChild(c)}}}function dp(e,n,s){Fi.S(e,n,s);var c=qa;if(c&&e){var p=sr(c).hoistableStyles,w=Ha(e);n=n||"default";var S=p.get(w);if(!S){var D={loading:0,preload:null};if(S=c.querySelector(Hl(w)))D.loading=5;else{e=R({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Kr.get(w))&&Gh(e,s);var U=S=c.createElement("link");gn(U),Wn(U,"link",e),U._p=new Promise(function(Q,oe){U.onload=Q,U.onerror=oe}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,mu(S,n,c)}S={type:"stylesheet",instance:S,count:1,state:D},p.set(w,S)}}}function gp(e,n){Fi.X(e,n);var s=qa;if(s&&e){var c=sr(s).hoistableScripts,p=Ga(e),w=c.get(p);w||(w=s.querySelector(Gl(p)),w||(e=R({src:e,async:!0},n),(n=Kr.get(p))&&Vh(e,n),w=s.createElement("script"),gn(w),Wn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},c.set(p,w))}}function mp(e,n){Fi.M(e,n);var s=qa;if(s&&e){var c=sr(s).hoistableScripts,p=Ga(e),w=c.get(p);w||(w=s.querySelector(Gl(p)),w||(e=R({src:e,async:!0,type:"module"},n),(n=Kr.get(p))&&Vh(e,n),w=s.createElement("script"),gn(w),Wn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},c.set(p,w))}}function V1(e,n,s,c){var p=(p=pe.current)?gu(p):null;if(!p)throw Error(h(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Ha(s.href),s=sr(p).hoistableStyles,c=s.get(n),c||(c={type:"style",instance:null,count:0,state:null},s.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Ha(s.href);var w=sr(p).hoistableStyles,S=w.get(e);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,S),(w=p.querySelector(Hl(e)))&&!w._p&&(S.instance=w,S.state.loading=5),Kr.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Kr.set(e,s),w||xp(p,e,s,S.state))),n&&c===null)throw Error(h(528,""));return S}if(n&&c!==null)throw Error(h(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ga(s),s=sr(p).hoistableScripts,c=s.get(n),c||(c={type:"script",instance:null,count:0,state:null},s.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,e))}}function Ha(e){return'href="'+lt(e)+'"'}function Hl(e){return'link[rel="stylesheet"]['+e+"]"}function X1(e){return R({},e,{"data-precedence":e.precedence,precedence:null})}function xp(e,n,s,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Wn(n,"link",s),gn(n),e.head.appendChild(n))}function Ga(e){return'[src="'+lt(e)+'"]'}function Gl(e){return"script[async]"+e}function Y1(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+lt(s.href)+'"]');if(c)return n.instance=c,gn(c),c;var p=R({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),gn(c),Wn(c,"style",p),mu(c,s.precedence,e),n.instance=c;case"stylesheet":p=Ha(s.href);var w=e.querySelector(Hl(p));if(w)return n.state.loading|=4,n.instance=w,gn(w),w;c=X1(s),(p=Kr.get(p))&&Gh(c,p),w=(e.ownerDocument||e).createElement("link"),gn(w);var S=w;return S._p=new Promise(function(D,U){S.onload=D,S.onerror=U}),Wn(w,"link",c),n.state.loading|=4,mu(w,s.precedence,e),n.instance=w;case"script":return w=Ga(s.src),(p=e.querySelector(Gl(w)))?(n.instance=p,gn(p),p):(c=s,(p=Kr.get(w))&&(c=R({},s),Vh(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),gn(p),Wn(p,"link",c),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(h(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,mu(c,s.precedence,e));return n.instance}function mu(e,n,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,w=p,S=0;S<c.length;S++){var D=c[S];if(D.dataset.precedence===n)w=D;else if(w!==p)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Gh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Vh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var xu=null;function K1(e,n,s){if(xu===null){var c=new Map,p=xu=new Map;p.set(s,c)}else p=xu,c=p.get(s),c||(c=new Map,p.set(s,c));if(c.has(e))return c;for(c.set(e,null),s=s.getElementsByTagName(e),p=0;p<s.length;p++){var w=s[p];if(!(w[yi]||w[hn]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var S=w.getAttribute(n)||"";S=e+S;var D=c.get(S);D?D.push(w):c.set(S,[w])}}return c}function W1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function pp(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Z1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function yp(e,n,s,c){if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Ha(c.href),w=n.querySelector(Hl(p));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=pu.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,gn(w);return}w=n.ownerDocument||n,c=X1(c),(p=Kr.get(p))&&Gh(c,p),w=w.createElement("link"),gn(w);var S=w;S._p=new Promise(function(D,U){S.onload=D,S.onerror=U}),Wn(w,"link",c),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=pu.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Xh=0;function wp(e,n){return e.stylesheets&&e.count===0&&wu(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var c=setTimeout(function(){if(e.stylesheets&&wu(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Xh===0&&(Xh=62500*$x());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wu(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Xh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function pu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yu=null;function wu(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yu=new Map,n.forEach(bp,e),yu=null,pu.call(e))}function bp(e,n){if(!(n.state.loading&4)){var s=yu.get(e);if(s)var c=s.get(null);else{s=new Map,yu.set(e,s);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<p.length;w++){var S=p[w];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(s.set(S.dataset.precedence,S),c=S)}c&&s.set(null,c)}p=n.instance,S=p.getAttribute("data-precedence"),w=s.get(S)||c,w===c&&s.set(null,p),s.set(S,p),this.count++,c=pu.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),w?w.parentNode.insertBefore(p,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Vl={$$typeof:W,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function vp(e,n,s,c,p,w,S,D,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=w,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Q1(e,n,s,c,p,w,S,D,U,Q,oe,fe){return e=new vp(e,n,s,S,U,Q,oe,fe,D),n=1,w===!0&&(n|=24),w=Ir(3,null,null,n),e.current=w,w.stateNode=e,n=Cc(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:c,isDehydrated:s,cache:n},Nc(w),e}function J1(e){return e?(e=va,e):va}function $1(e,n,s,c,p,w){p=J1(p),c.context===null?c.context=p:c.pendingContext=p,c=fs(n),c.payload={element:s},w=w===void 0?null:w,w!==null&&(c.callback=w),s=ds(e,c,n),s!==null&&(wr(s,e,n),_l(s,e,n))}function eg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Yh(e,n){eg(e,n),(e=e.alternate)&&eg(e,n)}function tg(e){if(e.tag===13||e.tag===31){var n=Gs(e,67108864);n!==null&&wr(n,e,67108864),Yh(e,67108864)}}function ng(e){if(e.tag===13||e.tag===31){var n=Lr();n=sn(n);var s=Gs(e,n);s!==null&&wr(s,e,n),Yh(e,n)}}var bu=!0;function Ep(e,n,s,c){var p=te.T;te.T=null;var w=ce.p;try{ce.p=2,Kh(e,n,s,c)}finally{ce.p=w,te.T=p}}function _p(e,n,s,c){var p=te.T;te.T=null;var w=ce.p;try{ce.p=8,Kh(e,n,s,c)}finally{ce.p=w,te.T=p}}function Kh(e,n,s,c){if(bu){var p=Wh(c);if(p===null)Bh(e,n,c,vu,s),ig(e,c);else if(Cp(p,e,n,s,c))c.stopPropagation();else if(ig(e,c),n&4&&-1<Ap.indexOf(e)){for(;p!==null;){var w=yt(p);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var S=Ar(w.pendingLanes);if(S!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;S;){var U=1<<31-Ze(S);D.entanglements[1]|=U,S&=~U}gi(w),(Mt&6)===0&&(ru=gt()+500,Pl(0))}}break;case 31:case 13:D=Gs(w,2),D!==null&&wr(D,w,2),su(),Yh(w,2)}if(w=Wh(c),w===null&&Bh(e,n,c,vu,s),w===p)break;p=w}p!==null&&c.stopPropagation()}else Bh(e,n,c,null,s)}}function Wh(e){return e=ol(e),Zh(e)}var vu=null;function Zh(e){if(vu=null,e=Qt(e),e!==null){var n=g(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=b(n),e!==null)return e;e=null}else if(s===31){if(e=A(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return vu=e,null}function rg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ds()){case Jn:return 2;case Ms:return 8;case tr:case Bn:return 32;case Bs:return 268435456;default:return 32}default:return 32}}var Qh=!1,As=null,Cs=null,Ss=null,Xl=new Map,Yl=new Map,Ts=[],Ap="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ig(e,n){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Xl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(n.pointerId)}}function Kl(e,n,s,c,p,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:c,nativeEvent:w,targetContainers:[p]},n!==null&&(n=yt(n),n!==null&&tg(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Cp(e,n,s,c,p){switch(n){case"focusin":return As=Kl(As,e,n,s,c,p),!0;case"dragenter":return Cs=Kl(Cs,e,n,s,c,p),!0;case"mouseover":return Ss=Kl(Ss,e,n,s,c,p),!0;case"pointerover":var w=p.pointerId;return Xl.set(w,Kl(Xl.get(w)||null,e,n,s,c,p)),!0;case"gotpointercapture":return w=p.pointerId,Yl.set(w,Kl(Yl.get(w)||null,e,n,s,c,p)),!0}return!1}function sg(e){var n=Qt(e.target);if(n!==null){var s=g(n);if(s!==null){if(n=s.tag,n===13){if(n=b(s),n!==null){e.blockedOn=n,Ae(e.priority,function(){ng(s)});return}}else if(n===31){if(n=A(s),n!==null){e.blockedOn=n,Ae(e.priority,function(){ng(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Wh(e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);Ls=c,s.target.dispatchEvent(c),Ls=null}else return n=yt(s),n!==null&&tg(n),e.blockedOn=s,!1;n.shift()}return!0}function ag(e,n,s){Eu(e)&&s.delete(n)}function Sp(){Qh=!1,As!==null&&Eu(As)&&(As=null),Cs!==null&&Eu(Cs)&&(Cs=null),Ss!==null&&Eu(Ss)&&(Ss=null),Xl.forEach(ag),Yl.forEach(ag)}function _u(e,n){e.blockedOn===n&&(e.blockedOn=null,Qh||(Qh=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Sp)))}var Au=null;function lg(e){Au!==e&&(Au=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Au===e&&(Au=null);for(var n=0;n<e.length;n+=3){var s=e[n],c=e[n+1],p=e[n+2];if(typeof c!="function"){if(Zh(c||s)===null)continue;break}var w=yt(s);w!==null&&(e.splice(n,3),n-=3,Wc(w,{pending:!0,data:p,method:s.method,action:c},c,p))}}))}function Va(e){function n(U){return _u(U,e)}As!==null&&_u(As,e),Cs!==null&&_u(Cs,e),Ss!==null&&_u(Ss,e),Xl.forEach(n),Yl.forEach(n);for(var s=0;s<Ts.length;s++){var c=Ts[s];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ts.length&&(s=Ts[0],s.blockedOn===null);)sg(s),s.blockedOn===null&&Ts.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var p=s[c],w=s[c+1],S=p[It]||null;if(typeof w=="function")S||lg(s);else if(S){var D=null;if(w&&w.hasAttribute("formAction")){if(p=w,S=w[It]||null)D=S.formAction;else if(Zh(p)!==null)continue}else D=S.action;typeof D=="function"?s[c+1]=D:(s.splice(c,3),c-=3),lg(s)}}}function og(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(s,20)}function s(){if(!c&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function Jh(e){this._internalRoot=e}Cu.prototype.render=Jh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(h(409));var s=n.current,c=Lr();$1(s,c,e,n,null,null)},Cu.prototype.unmount=Jh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;$1(e.current,2,null,e,null,null),su(),n[rr]=null}};function Cu(e){this._internalRoot=e}Cu.prototype.unstable_scheduleHydration=function(e){if(e){var n=dn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Ts.length&&n!==0&&n<Ts[s].priority;s++);Ts.splice(s,0,e),s===0&&sg(e)}};var ug=a.version;if(ug!=="19.2.1")throw Error(h(527,ug,"19.2.1"));ce.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(h(188)):(e=Object.keys(e).join(","),Error(h(268,e)));return e=v(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var Tp={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Ft=Su.inject(Tp),we=Su}catch{}}return Zl.createRoot=function(e,n){if(!x(e))throw Error(h(299));var s=!1,c="",p=xd,w=pd,S=yd;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=Q1(e,1,!1,null,null,s,c,null,p,w,S,og),e[rr]=n.current,Mh(e),new Jh(n)},Zl.hydrateRoot=function(e,n,s){if(!x(e))throw Error(h(299));var c=!1,p="",w=xd,S=pd,D=yd,U=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.formState!==void 0&&(U=s.formState)),n=Q1(e,1,!0,n,s??null,c,p,U,w,S,D,og),n.context=J1(null),s=n.current,c=Lr(),c=sn(c),p=fs(c),p.callback=null,ds(s,p,c),s=c,n.current.lanes=s,Qe(n,s),gi(n),e[rr]=n.current,Mh(e),new Cu(n)},Zl.version="19.2.1",Zl}var wg;function Up(){if(wg)return tf.exports;wg=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(a){console.error(a)}}return d(),tf.exports=jp(),tf.exports}var Pp=Up();const Fp=ao(Pp);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qp=d=>d.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,l,h)=>h?h.toUpperCase():l.toLowerCase()),bg=d=>{const a=qp(d);return a.charAt(0).toUpperCase()+a.slice(1)},D2=(...d)=>d.filter((a,l,h)=>!!a&&a.trim()!==""&&h.indexOf(a)===l).join(" ").trim(),Hp=d=>{for(const a in d)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=it.forwardRef(({color:d="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:x="",children:g,iconNode:b,...A},_)=>it.createElement("svg",{ref:_,...Gp,width:a,height:a,stroke:d,strokeWidth:h?Number(l)*24/Number(a):l,className:D2("lucide",x),...!g&&!Hp(A)&&{"aria-hidden":"true"},...A},[...b.map(([v,N])=>it.createElement(v,N)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=(d,a)=>{const l=it.forwardRef(({className:h,...x},g)=>it.createElement(Vp,{ref:g,iconNode:a,className:D2(`lucide-${zp(bg(d))}`,`lucide-${d}`,h),...x}));return l.displayName=bg(d),l};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Yp=Ot("arrow-down",Xp);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wp=Ot("arrow-right",Kp);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Qp=Ot("arrow-up",Zp);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],vg=Ot("box",Jp);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Eg=Ot("calendar",$p);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ty=Ot("camera",ey);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ry=Ot("circle-alert",ny);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sy=Ot("circle-check-big",iy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ly=Ot("circle-x",ay);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],uy=Ot("clipboard-list",oy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],hy=Ot("database",cy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dy=Ot("file-text",fy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],my=Ot("hash",gy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],_g=Ot("history",xy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yy=Ot("info",py);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M5 12h14",key:"1ays0h"}]],af=Ot("minus",wy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ag=Ot("package",by);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ql=Ot("plus",vy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],_y=Ot("printer",Ey);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],lf=Ot("qr-code",Ay);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Sy=Ot("refresh-cw",Cy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Oy=Ot("scan-line",Ty);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cg=Ot("search",Ny);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Iy=Ot("settings",Ry);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Sg=Ot("shopping-cart",Dy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],By=Ot("square-check-big",My);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ly=Ot("square-pen",ky);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tg=Ot("trash-2",jy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Py=Ot("triangle-alert",Uy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Og=Ot("upload",Fy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qy=Ot("user",zy);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qu=Ot("x",Hy);var zi={},Ou={},Rf=function(d,a){return Rf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(l[x]=h[x])},Rf(d,a)};function M2(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Rf(d,a);function l(){this.constructor=d}d.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var Hu=function(){return Hu=Object.assign||function(a){for(var l,h=1,x=arguments.length;h<x;h++){l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(a[g]=l[g])}return a},Hu.apply(this,arguments)};function il(d,a){var l={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&a.indexOf(h)<0&&(l[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,h=Object.getOwnPropertySymbols(d);x<h.length;x++)a.indexOf(h[x])<0&&Object.prototype.propertyIsEnumerable.call(d,h[x])&&(l[h[x]]=d[h[x]]);return l}function B2(d,a,l,h){var x=arguments.length,g=x<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,l):h,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,a,l,h);else for(var A=d.length-1;A>=0;A--)(b=d[A])&&(g=(x<3?b(g):x>3?b(a,l,g):b(a,l))||g);return x>3&&g&&Object.defineProperty(a,l,g),g}function k2(d,a){return function(l,h){a(l,h,d)}}function L2(d,a,l,h,x,g){function b(ae){if(ae!==void 0&&typeof ae!="function")throw new TypeError("Function expected");return ae}for(var A=h.kind,_=A==="getter"?"get":A==="setter"?"set":"value",v=!a&&d?h.static?d:d.prototype:null,N=a||(v?Object.getOwnPropertyDescriptor(v,h.name):{}),R,k=!1,j=l.length-1;j>=0;j--){var F={};for(var G in h)F[G]=G==="access"?{}:h[G];for(var G in h.access)F.access[G]=h.access[G];F.addInitializer=function(ae){if(k)throw new TypeError("Cannot add initializers after decoration has completed");g.push(b(ae||null))};var J=(0,l[j])(A==="accessor"?{get:N.get,set:N.set}:N[_],F);if(A==="accessor"){if(J===void 0)continue;if(J===null||typeof J!="object")throw new TypeError("Object expected");(R=b(J.get))&&(N.get=R),(R=b(J.set))&&(N.set=R),(R=b(J.init))&&x.unshift(R)}else(R=b(J))&&(A==="field"?x.unshift(R):N[_]=R)}v&&Object.defineProperty(v,h.name,N),k=!0}function j2(d,a,l){for(var h=arguments.length>2,x=0;x<a.length;x++)l=h?a[x].call(d,l):a[x].call(d);return h?l:void 0}function U2(d){return typeof d=="symbol"?d:"".concat(d)}function P2(d,a,l){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:l?"".concat(l," ",a):a})}function F2(d,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,a)}function Ne(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})}function z2(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return b.next=A(0),b.throw=A(1),b.return=A(2),typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var tc=Object.create?(function(d,a,l,h){h===void 0&&(h=l);var x=Object.getOwnPropertyDescriptor(a,l);(!x||("get"in x?!a.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(d,h,x)}):(function(d,a,l,h){h===void 0&&(h=l),d[h]=a[l]});function q2(d,a){for(var l in d)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&tc(a,d,l)}function Gu(d){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&d[a],h=0;if(l)return l.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&h>=d.length&&(d=void 0),{value:d&&d[h++],done:!d}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wf(d,a){var l=typeof Symbol=="function"&&d[Symbol.iterator];if(!l)return d;var h=l.call(d),x,g=[],b;try{for(;(a===void 0||a-- >0)&&!(x=h.next()).done;)g.push(x.value)}catch(A){b={error:A}}finally{try{x&&!x.done&&(l=h.return)&&l.call(h)}finally{if(b)throw b.error}}return g}function H2(){for(var d=[],a=0;a<arguments.length;a++)d=d.concat(Wf(arguments[a]));return d}function G2(){for(var d=0,a=0,l=arguments.length;a<l;a++)d+=arguments[a].length;for(var h=Array(d),x=0,a=0;a<l;a++)for(var g=arguments[a],b=0,A=g.length;b<A;b++,x++)h[x]=g[b];return h}function V2(d,a,l){if(l||arguments.length===2)for(var h=0,x=a.length,g;h<x;h++)(g||!(h in a))&&(g||(g=Array.prototype.slice.call(a,0,h)),g[h]=a[h]);return d.concat(g||Array.prototype.slice.call(a))}function nl(d){return this instanceof nl?(this.v=d,this):new nl(d)}function X2(d,a,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h=l.apply(d,a||[]),x,g=[];return x=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),A("next"),A("throw"),A("return",b),x[Symbol.asyncIterator]=function(){return this},x;function b(j){return function(F){return Promise.resolve(F).then(j,R)}}function A(j,F){h[j]&&(x[j]=function(G){return new Promise(function(J,ae){g.push([j,G,J,ae])>1||_(j,G)})},F&&(x[j]=F(x[j])))}function _(j,F){try{v(h[j](F))}catch(G){k(g[0][3],G)}}function v(j){j.value instanceof nl?Promise.resolve(j.value.v).then(N,R):k(g[0][2],j)}function N(j){_("next",j)}function R(j){_("throw",j)}function k(j,F){j(F),g.shift(),g.length&&_(g[0][0],g[0][1])}}function Y2(d){var a,l;return a={},h("next"),h("throw",function(x){throw x}),h("return"),a[Symbol.iterator]=function(){return this},a;function h(x,g){a[x]=d[x]?function(b){return(l=!l)?{value:nl(d[x](b)),done:!1}:g?g(b):b}:g}}function K2(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=d[Symbol.asyncIterator],l;return a?a.call(d):(d=typeof Gu=="function"?Gu(d):d[Symbol.iterator](),l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l);function h(g){l[g]=d[g]&&function(b){return new Promise(function(A,_){b=d[g](b),x(A,_,b.done,b.value)})}}function x(g,b,A,_){Promise.resolve(_).then(function(v){g({value:v,done:A})},b)}}function W2(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}var Gy=Object.create?(function(d,a){Object.defineProperty(d,"default",{enumerable:!0,value:a})}):function(d,a){d.default=a},If=function(d){return If=Object.getOwnPropertyNames||function(a){var l=[];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(l[l.length]=h);return l},If(d)};function Z2(d){if(d&&d.__esModule)return d;var a={};if(d!=null)for(var l=If(d),h=0;h<l.length;h++)l[h]!=="default"&&tc(a,d,l[h]);return Gy(a,d),a}function Q2(d){return d&&d.__esModule?d:{default:d}}function J2(d,a,l,h){if(l==="a"&&!h)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?d!==a||!h:!a.has(d))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?h:l==="a"?h.call(d):h?h.value:a.get(d)}function $2(d,a,l,h,x){if(h==="m")throw new TypeError("Private method is not writable");if(h==="a"&&!x)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?d!==a||!x:!a.has(d))throw new TypeError("Cannot write private member to an object whose class did not declare it");return h==="a"?x.call(d,l):x?x.value=l:a.set(d,l),l}function em(d,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof d=="function"?a===d:d.has(a)}function tm(d,a,l){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var h,x;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");h=a[Symbol.asyncDispose]}if(h===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");h=a[Symbol.dispose],l&&(x=h)}if(typeof h!="function")throw new TypeError("Object not disposable.");x&&(h=function(){try{x.call(this)}catch(g){return Promise.reject(g)}}),d.stack.push({value:a,dispose:h,async:l})}else l&&d.stack.push({async:!0});return a}var Vy=typeof SuppressedError=="function"?SuppressedError:function(d,a,l){var h=new Error(l);return h.name="SuppressedError",h.error=d,h.suppressed=a,h};function nm(d){function a(g){d.error=d.hasError?new Vy(g,d.error,"An error was suppressed during disposal."):g,d.hasError=!0}var l,h=0;function x(){for(;l=d.stack.pop();)try{if(!l.async&&h===1)return h=0,d.stack.push(l),Promise.resolve().then(x);if(l.dispose){var g=l.dispose.call(l.value);if(l.async)return h|=2,Promise.resolve(g).then(x,function(b){return a(b),x()})}else h|=1}catch(b){a(b)}if(h===1)return d.hasError?Promise.reject(d.error):Promise.resolve();if(d.hasError)throw d.error}return x()}function rm(d,a){return typeof d=="string"&&/^\.\.?\//.test(d)?d.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(l,h,x,g,b){return h?a?".jsx":".js":x&&(!g||!b)?l:x+g+"."+b.toLowerCase()+"js"}):d}const Xy={__extends:M2,__assign:Hu,__rest:il,__decorate:B2,__param:k2,__esDecorate:L2,__runInitializers:j2,__propKey:U2,__setFunctionName:P2,__metadata:F2,__awaiter:Ne,__generator:z2,__createBinding:tc,__exportStar:q2,__values:Gu,__read:Wf,__spread:H2,__spreadArrays:G2,__spreadArray:V2,__await:nl,__asyncGenerator:X2,__asyncDelegator:Y2,__asyncValues:K2,__makeTemplateObject:W2,__importStar:Z2,__importDefault:Q2,__classPrivateFieldGet:J2,__classPrivateFieldSet:$2,__classPrivateFieldIn:em,__addDisposableResource:tm,__disposeResources:nm,__rewriteRelativeImportExtension:rm},Yy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:tm,get __assign(){return Hu},__asyncDelegator:Y2,__asyncGenerator:X2,__asyncValues:K2,__await:nl,__awaiter:Ne,__classPrivateFieldGet:J2,__classPrivateFieldIn:em,__classPrivateFieldSet:$2,__createBinding:tc,__decorate:B2,__disposeResources:nm,__esDecorate:L2,__exportStar:q2,__extends:M2,__generator:z2,__importDefault:Q2,__importStar:Z2,__makeTemplateObject:W2,__metadata:F2,__param:k2,__propKey:U2,__read:Wf,__rest:il,__rewriteRelativeImportExtension:rm,__runInitializers:j2,__setFunctionName:P2,__spread:H2,__spreadArray:V2,__spreadArrays:G2,__values:Gu,default:Xy},Symbol.toStringTag,{value:"Module"})),Ky=d=>d?(...a)=>d(...a):(...a)=>fetch(...a);let nc=class extends Error{constructor(a,l="FunctionsError",h){super(a),this.name=l,this.context=h}},im=class extends nc{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}},Df=class extends nc{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}},Mf=class extends nc{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}};var Vu;(function(d){d.Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2"})(Vu||(Vu={}));class Wy{constructor(a,{headers:l={},customFetch:h,region:x=Vu.Any}={}){this.url=a,this.headers=l,this.region=x,this.fetch=Ky(h)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Ne(this,arguments,void 0,function*(l,h={}){var x;let g,b;try{const{headers:A,method:_,body:v,signal:N,timeout:R}=h;let k={},{region:j}=h;j||(j=this.region);const F=new URL(`${this.url}/${l}`);j&&j!=="any"&&(k["x-region"]=j,F.searchParams.set("forceFunctionRegion",j));let G;v&&(A&&!Object.prototype.hasOwnProperty.call(A,"Content-Type")||!A)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",G=v):typeof v=="string"?(k["Content-Type"]="text/plain",G=v):typeof FormData<"u"&&v instanceof FormData?G=v:(k["Content-Type"]="application/json",G=JSON.stringify(v)):G=v;let J=N;R&&(b=new AbortController,g=setTimeout(()=>b.abort(),R),N?(J=b.signal,N.addEventListener("abort",()=>b.abort())):J=b.signal);const ae=yield this.fetch(F.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),A),body:G,signal:J}).catch(Le=>{throw new im(Le)}),ue=ae.headers.get("x-relay-error");if(ue&&ue==="true")throw new Df(ae);if(!ae.ok)throw new Mf(ae);let W=((x=ae.headers.get("Content-Type"))!==null&&x!==void 0?x:"text/plain").split(";")[0].trim(),xe;return W==="application/json"?xe=yield ae.json():W==="application/octet-stream"||W==="application/pdf"?xe=yield ae.blob():W==="text/event-stream"?xe=ae:W==="multipart/form-data"?xe=yield ae.formData():xe=yield ae.text(),{data:xe,error:null,response:ae}}catch(A){return{data:null,error:A,response:A instanceof Mf||A instanceof Df?A.context:void 0}}finally{g&&clearTimeout(g)}})}}const Zy=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Vu},FunctionsClient:Wy,FunctionsError:nc,FunctionsFetchError:im,FunctionsHttpError:Mf,FunctionsRelayError:Df},Symbol.toStringTag,{value:"Module"})),sm=lo(Zy);var er={};const sl=lo(Yy);var Nu={},Ru={},Iu={},Du={},Mu={},Bu={},Ng;function am(){if(Ng)return Bu;Ng=1,Object.defineProperty(Bu,"__esModule",{value:!0});class d extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return Bu.default=d,Bu}var Rg;function lm(){if(Rg)return Mu;Rg=1,Object.defineProperty(Mu,"__esModule",{value:!0});const a=sl.__importDefault(am());let l=class{constructor(x){var g,b;this.shouldThrowOnError=!1,this.method=x.method,this.url=x.url,this.headers=new Headers(x.headers),this.schema=x.schema,this.body=x.body,this.shouldThrowOnError=(g=x.shouldThrowOnError)!==null&&g!==void 0?g:!1,this.signal=x.signal,this.isMaybeSingle=(b=x.isMaybeSingle)!==null&&b!==void 0?b:!1,x.fetch?this.fetch=x.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(x,g){return this.headers=new Headers(this.headers),this.headers.set(x,g),this}then(x,g){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const b=this.fetch;let A=b(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var v,N,R,k;let j=null,F=null,G=null,J=_.status,ae=_.statusText;if(_.ok){if(this.method!=="HEAD"){const Le=await _.text();Le===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?F=Le:F=JSON.parse(Le))}const W=(N=this.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),xe=(R=_.headers.get("content-range"))===null||R===void 0?void 0:R.split("/");W&&xe&&xe.length>1&&(G=parseInt(xe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(F)&&(F.length>1?(j={code:"PGRST116",details:`Results contain ${F.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},F=null,G=null,J=406,ae="Not Acceptable"):F.length===1?F=F[0]:F=null)}else{const W=await _.text();try{j=JSON.parse(W),Array.isArray(j)&&_.status===404&&(F=[],j=null,J=200,ae="OK")}catch{_.status===404&&W===""?(J=204,ae="No Content"):j={message:W}}if(j&&this.isMaybeSingle&&(!((k=j==null?void 0:j.details)===null||k===void 0)&&k.includes("0 rows"))&&(j=null,J=200,ae="OK"),j&&this.shouldThrowOnError)throw new a.default(j)}return{error:j,data:F,count:G,status:J,statusText:ae}});return this.shouldThrowOnError||(A=A.catch(_=>{var v,N,R,k,j,F;let G="";const J=_==null?void 0:_.cause;if(J){const ae=(v=J==null?void 0:J.message)!==null&&v!==void 0?v:"",ue=(N=J==null?void 0:J.code)!==null&&N!==void 0?N:"";G=`${(R=_==null?void 0:_.name)!==null&&R!==void 0?R:"FetchError"}: ${_==null?void 0:_.message}`,G+=`

Caused by: ${(k=J==null?void 0:J.name)!==null&&k!==void 0?k:"Error"}: ${ae}`,ue&&(G+=` (${ue})`),J!=null&&J.stack&&(G+=`
${J.stack}`)}else G=(j=_==null?void 0:_.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(F=_==null?void 0:_.name)!==null&&F!==void 0?F:"FetchError"}: ${_==null?void 0:_.message}`,details:G,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),A.then(x,g)}returns(){return this}overrideTypes(){return this}};return Mu.default=l,Mu}var Ig;function om(){if(Ig)return Du;Ig=1,Object.defineProperty(Du,"__esModule",{value:!0});const a=sl.__importDefault(lm());let l=class extends a.default{select(x){let g=!1;const b=(x??"*").split("").map(A=>/\s/.test(A)&&!g?"":(A==='"'&&(g=!g),A)).join("");return this.url.searchParams.set("select",b),this.headers.append("Prefer","return=representation"),this}order(x,{ascending:g=!0,nullsFirst:b,foreignTable:A,referencedTable:_=A}={}){const v=_?`${_}.order`:"order",N=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${N?`${N},`:""}${x}.${g?"asc":"desc"}${b===void 0?"":b?".nullsfirst":".nullslast"}`),this}limit(x,{foreignTable:g,referencedTable:b=g}={}){const A=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(A,`${x}`),this}range(x,g,{foreignTable:b,referencedTable:A=b}={}){const _=typeof A>"u"?"offset":`${A}.offset`,v=typeof A>"u"?"limit":`${A}.limit`;return this.url.searchParams.set(_,`${x}`),this.url.searchParams.set(v,`${g-x+1}`),this}abortSignal(x){return this.signal=x,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:x=!1,verbose:g=!1,settings:b=!1,buffers:A=!1,wal:_=!1,format:v="text"}={}){var N;const R=[x?"analyze":null,g?"verbose":null,b?"settings":null,A?"buffers":null,_?"wal":null].filter(Boolean).join("|"),k=(N=this.headers.get("Accept"))!==null&&N!==void 0?N:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${k}"; options=${R};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(x){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${x}`),this}};return Du.default=l,Du}var Dg;function Zf(){if(Dg)return Iu;Dg=1,Object.defineProperty(Iu,"__esModule",{value:!0});const a=sl.__importDefault(om()),l=new RegExp("[,()]");let h=class extends a.default{eq(g,b){return this.url.searchParams.append(g,`eq.${b}`),this}neq(g,b){return this.url.searchParams.append(g,`neq.${b}`),this}gt(g,b){return this.url.searchParams.append(g,`gt.${b}`),this}gte(g,b){return this.url.searchParams.append(g,`gte.${b}`),this}lt(g,b){return this.url.searchParams.append(g,`lt.${b}`),this}lte(g,b){return this.url.searchParams.append(g,`lte.${b}`),this}like(g,b){return this.url.searchParams.append(g,`like.${b}`),this}likeAllOf(g,b){return this.url.searchParams.append(g,`like(all).{${b.join(",")}}`),this}likeAnyOf(g,b){return this.url.searchParams.append(g,`like(any).{${b.join(",")}}`),this}ilike(g,b){return this.url.searchParams.append(g,`ilike.${b}`),this}ilikeAllOf(g,b){return this.url.searchParams.append(g,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(g,b){return this.url.searchParams.append(g,`ilike(any).{${b.join(",")}}`),this}regexMatch(g,b){return this.url.searchParams.append(g,`match.${b}`),this}regexIMatch(g,b){return this.url.searchParams.append(g,`imatch.${b}`),this}is(g,b){return this.url.searchParams.append(g,`is.${b}`),this}isDistinct(g,b){return this.url.searchParams.append(g,`isdistinct.${b}`),this}in(g,b){const A=Array.from(new Set(b)).map(_=>typeof _=="string"&&l.test(_)?`"${_}"`:`${_}`).join(",");return this.url.searchParams.append(g,`in.(${A})`),this}contains(g,b){return typeof b=="string"?this.url.searchParams.append(g,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(g,`cs.{${b.join(",")}}`):this.url.searchParams.append(g,`cs.${JSON.stringify(b)}`),this}containedBy(g,b){return typeof b=="string"?this.url.searchParams.append(g,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(g,`cd.{${b.join(",")}}`):this.url.searchParams.append(g,`cd.${JSON.stringify(b)}`),this}rangeGt(g,b){return this.url.searchParams.append(g,`sr.${b}`),this}rangeGte(g,b){return this.url.searchParams.append(g,`nxl.${b}`),this}rangeLt(g,b){return this.url.searchParams.append(g,`sl.${b}`),this}rangeLte(g,b){return this.url.searchParams.append(g,`nxr.${b}`),this}rangeAdjacent(g,b){return this.url.searchParams.append(g,`adj.${b}`),this}overlaps(g,b){return typeof b=="string"?this.url.searchParams.append(g,`ov.${b}`):this.url.searchParams.append(g,`ov.{${b.join(",")}}`),this}textSearch(g,b,{config:A,type:_}={}){let v="";_==="plain"?v="pl":_==="phrase"?v="ph":_==="websearch"&&(v="w");const N=A===void 0?"":`(${A})`;return this.url.searchParams.append(g,`${v}fts${N}.${b}`),this}match(g){return Object.entries(g).forEach(([b,A])=>{this.url.searchParams.append(b,`eq.${A}`)}),this}not(g,b,A){return this.url.searchParams.append(g,`not.${b}.${A}`),this}or(g,{foreignTable:b,referencedTable:A=b}={}){const _=A?`${A}.or`:"or";return this.url.searchParams.append(_,`(${g})`),this}filter(g,b,A){return this.url.searchParams.append(g,`${b}.${A}`),this}};return Iu.default=h,Iu}var Mg;function um(){if(Mg)return Ru;Mg=1,Object.defineProperty(Ru,"__esModule",{value:!0});const a=sl.__importDefault(Zf());let l=class{constructor(x,{headers:g={},schema:b,fetch:A}){this.url=x,this.headers=new Headers(g),this.schema=b,this.fetch=A}select(x,g){const{head:b=!1,count:A}=g??{},_=b?"HEAD":"GET";let v=!1;const N=(x??"*").split("").map(R=>/\s/.test(R)&&!v?"":(R==='"'&&(v=!v),R)).join("");return this.url.searchParams.set("select",N),A&&this.headers.append("Prefer",`count=${A}`),new a.default({method:_,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(x,{count:g,defaultToNull:b=!0}={}){var A;const _="POST";if(g&&this.headers.append("Prefer",`count=${g}`),b||this.headers.append("Prefer","missing=default"),Array.isArray(x)){const v=x.reduce((N,R)=>N.concat(Object.keys(R)),[]);if(v.length>0){const N=[...new Set(v)].map(R=>`"${R}"`);this.url.searchParams.set("columns",N.join(","))}}return new a.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:x,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}upsert(x,{onConflict:g,ignoreDuplicates:b=!1,count:A,defaultToNull:_=!0}={}){var v;const N="POST";if(this.headers.append("Prefer",`resolution=${b?"ignore":"merge"}-duplicates`),g!==void 0&&this.url.searchParams.set("on_conflict",g),A&&this.headers.append("Prefer",`count=${A}`),_||this.headers.append("Prefer","missing=default"),Array.isArray(x)){const R=x.reduce((k,j)=>k.concat(Object.keys(j)),[]);if(R.length>0){const k=[...new Set(R)].map(j=>`"${j}"`);this.url.searchParams.set("columns",k.join(","))}}return new a.default({method:N,url:this.url,headers:this.headers,schema:this.schema,body:x,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(x,{count:g}={}){var b;const A="PATCH";return g&&this.headers.append("Prefer",`count=${g}`),new a.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:x,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}delete({count:x}={}){var g;const b="DELETE";return x&&this.headers.append("Prefer",`count=${x}`),new a.default({method:b,url:this.url,headers:this.headers,schema:this.schema,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return Ru.default=l,Ru}var Bg;function Qy(){if(Bg)return Nu;Bg=1,Object.defineProperty(Nu,"__esModule",{value:!0});const d=sl,a=d.__importDefault(um()),l=d.__importDefault(Zf());let h=class cm{constructor(g,{headers:b={},schema:A,fetch:_}={}){this.url=g,this.headers=new Headers(b),this.schemaName=A,this.fetch=_}from(g){if(!g||typeof g!="string"||g.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const b=new URL(`${this.url}/${g}`);return new a.default(b,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(g){return new cm(this.url,{headers:this.headers,schema:g,fetch:this.fetch})}rpc(g,b={},{head:A=!1,get:_=!1,count:v}={}){var N;let R;const k=new URL(`${this.url}/rpc/${g}`);let j;A||_?(R=A?"HEAD":"GET",Object.entries(b).filter(([G,J])=>J!==void 0).map(([G,J])=>[G,Array.isArray(J)?`{${J.join(",")}}`:`${J}`]).forEach(([G,J])=>{k.searchParams.append(G,J)})):(R="POST",j=b);const F=new Headers(this.headers);return v&&F.set("Prefer",`count=${v}`),new l.default({method:R,url:k,headers:F,schema:this.schemaName,body:j,fetch:(N=this.fetch)!==null&&N!==void 0?N:fetch})}};return Nu.default=h,Nu}var kg;function hm(){if(kg)return er;kg=1,Object.defineProperty(er,"__esModule",{value:!0}),er.PostgrestError=er.PostgrestBuilder=er.PostgrestTransformBuilder=er.PostgrestFilterBuilder=er.PostgrestQueryBuilder=er.PostgrestClient=void 0;const d=sl,a=d.__importDefault(Qy());er.PostgrestClient=a.default;const l=d.__importDefault(um());er.PostgrestQueryBuilder=l.default;const h=d.__importDefault(Zf());er.PostgrestFilterBuilder=h.default;const x=d.__importDefault(om());er.PostgrestTransformBuilder=x.default;const g=d.__importDefault(lm());er.PostgrestBuilder=g.default;const b=d.__importDefault(am());return er.PostgrestError=b.default,er.default={PostgrestClient:a.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:h.default,PostgrestTransformBuilder:x.default,PostgrestBuilder:g.default,PostgrestError:b.default},er}class fm{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const h=l.node,x=parseInt(h.replace(/^v/,"").split(".")[0]);return x>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${x} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${x} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let l=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(l+=`

Suggested solution: ${a.workaround}`),new Error(l)}static createWebSocket(a,l){const h=this.getWebSocketConstructor();return new h(a,l)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Jy="2.87.1",$y=`realtime-js/${Jy}`,dm="1.0.0",ew="2.0.0",Lg=dm,Bf=1e4,tw=1e3,nw=100;var oa;(function(d){d[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed"})(oa||(oa={}));var In;(function(d){d.closed="closed",d.errored="errored",d.joined="joined",d.joining="joining",d.leaving="leaving"})(In||(In={}));var si;(function(d){d.close="phx_close",d.error="phx_error",d.join="phx_join",d.reply="phx_reply",d.leave="phx_leave",d.access_token="access_token"})(si||(si={}));var kf;(function(d){d.websocket="websocket"})(kf||(kf={}));var ua;(function(d){d.Connecting="connecting",d.Open="open",d.Closing="closing",d.Closed="closed"})(ua||(ua={}));class rw{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,l){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(a));let h=[a.join_ref,a.ref,a.topic,a.event,a.payload];return l(JSON.stringify(h))}_binaryEncodeUserBroadcastPush(a){var l;return this._isArrayBuffer((l=a.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var l,h;const x=(h=(l=a.payload)===null||l===void 0?void 0:l.payload)!==null&&h!==void 0?h:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,x)}_encodeJsonUserBroadcastPush(a){var l,h;const x=(h=(l=a.payload)===null||l===void 0?void 0:l.payload)!==null&&h!==void 0?h:{},b=new TextEncoder().encode(JSON.stringify(x)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,b)}_encodeUserBroadcastPush(a,l,h){var x,g;const b=a.topic,A=(x=a.ref)!==null&&x!==void 0?x:"",_=(g=a.join_ref)!==null&&g!==void 0?g:"",v=a.payload.event,N=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},R=Object.keys(N).length===0?"":JSON.stringify(N);if(_.length>255)throw new Error(`joinRef length ${_.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`ref length ${A.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`topic length ${b.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(R.length>255)throw new Error(`metadata length ${R.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+A.length+b.length+v.length+R.length,j=new ArrayBuffer(this.HEADER_LENGTH+k);let F=new DataView(j),G=0;F.setUint8(G++,this.KINDS.userBroadcastPush),F.setUint8(G++,_.length),F.setUint8(G++,A.length),F.setUint8(G++,b.length),F.setUint8(G++,v.length),F.setUint8(G++,R.length),F.setUint8(G++,l),Array.from(_,ae=>F.setUint8(G++,ae.charCodeAt(0))),Array.from(A,ae=>F.setUint8(G++,ae.charCodeAt(0))),Array.from(b,ae=>F.setUint8(G++,ae.charCodeAt(0))),Array.from(v,ae=>F.setUint8(G++,ae.charCodeAt(0))),Array.from(R,ae=>F.setUint8(G++,ae.charCodeAt(0)));var J=new Uint8Array(j.byteLength+h.byteLength);return J.set(new Uint8Array(j),0),J.set(new Uint8Array(h),j.byteLength),J.buffer}decode(a,l){if(this._isArrayBuffer(a)){let h=this._binaryDecode(a);return l(h)}if(typeof a=="string"){const h=JSON.parse(a),[x,g,b,A,_]=h;return l({join_ref:x,ref:g,topic:b,event:A,payload:_})}return l({})}_binaryDecode(a){const l=new DataView(a),h=l.getUint8(0),x=new TextDecoder;switch(h){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,l,x)}}_decodeUserBroadcast(a,l,h){const x=l.getUint8(1),g=l.getUint8(2),b=l.getUint8(3),A=l.getUint8(4);let _=this.HEADER_LENGTH+4;const v=h.decode(a.slice(_,_+x));_=_+x;const N=h.decode(a.slice(_,_+g));_=_+g;const R=h.decode(a.slice(_,_+b));_=_+b;const k=a.slice(_,a.byteLength),j=A===this.JSON_ENCODING?JSON.parse(h.decode(k)):k,F={type:this.BROADCAST_EVENT,event:N,payload:j};return b>0&&(F.meta=JSON.parse(R)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:F}}_isArrayBuffer(a){var l;return a instanceof ArrayBuffer||((l=a==null?void 0:a.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(a,l){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([h])=>l.includes(h)))}}class gm{constructor(a,l){this.callback=a,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wt;(function(d){d.abstime="abstime",d.bool="bool",d.date="date",d.daterange="daterange",d.float4="float4",d.float8="float8",d.int2="int2",d.int4="int4",d.int4range="int4range",d.int8="int8",d.int8range="int8range",d.json="json",d.jsonb="jsonb",d.money="money",d.numeric="numeric",d.oid="oid",d.reltime="reltime",d.text="text",d.time="time",d.timestamp="timestamp",d.timestamptz="timestamptz",d.timetz="timetz",d.tsrange="tsrange",d.tstzrange="tstzrange"})(Wt||(Wt={}));const jg=(d,a,l={})=>{var h;const x=(h=l.skipTypes)!==null&&h!==void 0?h:[];return a?Object.keys(a).reduce((g,b)=>(g[b]=iw(b,d,a,x),g),{}):{}},iw=(d,a,l,h)=>{const x=a.find(A=>A.name===d),g=x==null?void 0:x.type,b=l[d];return g&&!h.includes(g)?mm(g,b):Lf(b)},mm=(d,a)=>{if(d.charAt(0)==="_"){const l=d.slice(1,d.length);return ow(a,l)}switch(d){case Wt.bool:return sw(a);case Wt.float4:case Wt.float8:case Wt.int2:case Wt.int4:case Wt.int8:case Wt.numeric:case Wt.oid:return aw(a);case Wt.json:case Wt.jsonb:return lw(a);case Wt.timestamp:return uw(a);case Wt.abstime:case Wt.date:case Wt.daterange:case Wt.int4range:case Wt.int8range:case Wt.money:case Wt.reltime:case Wt.text:case Wt.time:case Wt.timestamptz:case Wt.timetz:case Wt.tsrange:case Wt.tstzrange:return Lf(a);default:return Lf(a)}},Lf=d=>d,sw=d=>{switch(d){case"t":return!0;case"f":return!1;default:return d}},aw=d=>{if(typeof d=="string"){const a=parseFloat(d);if(!Number.isNaN(a))return a}return d},lw=d=>{if(typeof d=="string")try{return JSON.parse(d)}catch(a){return console.log(`JSON parse error: ${a}`),d}return d},ow=(d,a)=>{if(typeof d!="string")return d;const l=d.length-1,h=d[l];if(d[0]==="{"&&h==="}"){let g;const b=d.slice(1,l);try{g=JSON.parse("["+b+"]")}catch{g=b?b.split(","):[]}return g.map(A=>mm(a,A))}return d},uw=d=>typeof d=="string"?d.replace(" ","T"):d,xm=d=>{const a=new URL(d);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class of{constructor(a,l,h={},x=Bf){this.channel=a,this.event=l,this.payload=h,this.timeout=x,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,l){var h;return this._hasReceived(a)&&l((h=this.receivedResp)===null||h===void 0?void 0:h.response),this.recHooks.push({status:a,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:l}){this.recHooks.filter(h=>h.status===a).forEach(h=>h.callback(l))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var jf;(function(d){d.SYNC="sync",d.JOIN="join",d.LEAVE="leave"})(jf||(jf={}));let pm=class Uu{constructor(a,l){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const h=(l==null?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(h.state,{},x=>{const{onJoin:g,onLeave:b,onSync:A}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uu.syncState(this.state,x,g,b),this.pendingDiffs.forEach(_=>{this.state=Uu.syncDiff(this.state,_,g,b)}),this.pendingDiffs=[],A()}),this.channel._on(h.diff,{},x=>{const{onJoin:g,onLeave:b,onSync:A}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(x):(this.state=Uu.syncDiff(this.state,x,g,b),A())}),this.onJoin((x,g,b)=>{this.channel._trigger("presence",{event:"join",key:x,currentPresences:g,newPresences:b})}),this.onLeave((x,g,b)=>{this.channel._trigger("presence",{event:"leave",key:x,currentPresences:g,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,l,h,x){const g=this.cloneDeep(a),b=this.transformState(l),A={},_={};return this.map(g,(v,N)=>{b[v]||(_[v]=N)}),this.map(b,(v,N)=>{const R=g[v];if(R){const k=N.map(J=>J.presence_ref),j=R.map(J=>J.presence_ref),F=N.filter(J=>j.indexOf(J.presence_ref)<0),G=R.filter(J=>k.indexOf(J.presence_ref)<0);F.length>0&&(A[v]=F),G.length>0&&(_[v]=G)}else A[v]=N}),this.syncDiff(g,{joins:A,leaves:_},h,x)}static syncDiff(a,l,h,x){const{joins:g,leaves:b}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return h||(h=()=>{}),x||(x=()=>{}),this.map(g,(A,_)=>{var v;const N=(v=a[A])!==null&&v!==void 0?v:[];if(a[A]=this.cloneDeep(_),N.length>0){const R=a[A].map(j=>j.presence_ref),k=N.filter(j=>R.indexOf(j.presence_ref)<0);a[A].unshift(...k)}h(A,N,_)}),this.map(b,(A,_)=>{let v=a[A];if(!v)return;const N=_.map(R=>R.presence_ref);v=v.filter(R=>N.indexOf(R.presence_ref)<0),a[A]=v,x(A,v,_),v.length===0&&delete a[A]}),a}static map(a,l){return Object.getOwnPropertyNames(a).map(h=>l(h,a[h]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((l,h)=>{const x=a[h];return"metas"in x?l[h]=x.metas.map(g=>(g.presence_ref=g.phx_ref,delete g.phx_ref,delete g.phx_ref_prev,g)):l[h]=x,l},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Uf;(function(d){d.ALL="*",d.INSERT="INSERT",d.UPDATE="UPDATE",d.DELETE="DELETE"})(Uf||(Uf={}));var el;(function(d){d.BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system"})(el||(el={}));var mi;(function(d){d.SUBSCRIBED="SUBSCRIBED",d.TIMED_OUT="TIMED_OUT",d.CLOSED="CLOSED",d.CHANNEL_ERROR="CHANNEL_ERROR"})(mi||(mi={}));const cw=In;let ym=class eo{constructor(a,l={config:{}},h){var x,g;if(this.topic=a,this.params=l,this.socket=h,this.bindings={},this.state=In.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new of(this,si.join,this.params,this.timeout),this.rejoinTimer=new gm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=In.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(b=>b.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=In.closed,this.socket._remove(this)}),this._onError(b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",b=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,b),this.state=In.errored,this.rejoinTimer.scheduleTimeout())}),this._on(si.reply,{},(b,A)=>{this._trigger(this._replyEventName(A),b)}),this.presence=new pm(this),this.broadcastEndpointURL=xm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((g=(x=this.params.config)===null||x===void 0?void 0:x.broadcast)===null||g===void 0)&&g.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,l=this.timeout){var h,x,g;if(this.socket.isConnected()||this.socket.connect(),this.state==In.closed){const{config:{broadcast:b,presence:A,private:_}}=this.params,v=(x=(h=this.bindings.postgres_changes)===null||h===void 0?void 0:h.map(j=>j.filter))!==null&&x!==void 0?x:[],N=!!this.bindings[el.PRESENCE]&&this.bindings[el.PRESENCE].length>0||((g=this.params.config.presence)===null||g===void 0?void 0:g.enabled)===!0,R={},k={broadcast:b,presence:Object.assign(Object.assign({},A),{enabled:N}),postgres_changes:v,private:_};this.socket.accessTokenValue&&(R.access_token=this.socket.accessTokenValue),this._onError(j=>a==null?void 0:a(mi.CHANNEL_ERROR,j)),this._onClose(()=>a==null?void 0:a(mi.CLOSED)),this.updateJoinPayload(Object.assign({config:k},R)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:j})=>{var F;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){a==null||a(mi.SUBSCRIBED);return}else{const G=this.bindings.postgres_changes,J=(F=G==null?void 0:G.length)!==null&&F!==void 0?F:0,ae=[];for(let ue=0;ue<J;ue++){const W=G[ue],{filter:{event:xe,schema:Le,table:_e,filter:ee}}=W,Me=j&&j[ue];if(Me&&Me.event===xe&&eo.isFilterValueEqual(Me.schema,Le)&&eo.isFilterValueEqual(Me.table,_e)&&eo.isFilterValueEqual(Me.filter,ee))ae.push(Object.assign(Object.assign({},W),{id:Me.id}));else{this.unsubscribe(),this.state=In.errored,a==null||a(mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ae,a&&a(mi.SUBSCRIBED);return}}).receive("error",j=>{this.state=In.errored,a==null||a(mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,l={}){return await this.send({type:"presence",event:"track",payload:a},l.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,l,h){return this.state===In.joined&&a===el.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,l,h)}async httpSend(a,l,h={}){var x;const g=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(l==null)return Promise.reject("Payload is required for httpSend()");const b={method:"POST",headers:{Authorization:g,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})},A=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(x=h.timeout)!==null&&x!==void 0?x:this.timeout);if(A.status===202)return{success:!0};let _=A.statusText;try{const v=await A.json();_=v.error||v.message||_}catch{}return Promise.reject(new Error(_))}async send(a,l={}){var h,x;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:g,payload:b}=a,_={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:g,payload:b,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(h=l.timeout)!==null&&h!==void 0?h:this.timeout);return await((x=v.body)===null||x===void 0?void 0:x.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(g=>{var b,A,_;const v=this._push(a.type,a,l.timeout||this.timeout);a.type==="broadcast"&&!(!((_=(A=(b=this.params)===null||b===void 0?void 0:b.config)===null||A===void 0?void 0:A.broadcast)===null||_===void 0)&&_.ack)&&g("ok"),v.receive("ok",()=>g("ok")),v.receive("error",()=>g("error")),v.receive("timeout",()=>g("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=In.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(si.close,"leave",this._joinRef())};this.joinPush.destroy();let h=null;return new Promise(x=>{h=new of(this,si.leave,{},a),h.receive("ok",()=>{l(),x("ok")}).receive("timeout",()=>{l(),x("timed out")}).receive("error",()=>{x("error")}),h.send(),this._canPush()||h.trigger("ok",{})}).finally(()=>{h==null||h.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=In.closed,this.bindings={}}async _fetchWithTimeout(a,l,h){const x=new AbortController,g=setTimeout(()=>x.abort(),h),b=await this.socket.fetch(a,Object.assign(Object.assign({},l),{signal:x.signal}));return clearTimeout(g),b}_push(a,l,h=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let x=new of(this,a,l,h);return this._canPush()?x.send():this._addToPushBuffer(x),x}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>nw){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(a,l,h){return l}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,l,h){var x,g;const b=a.toLocaleLowerCase(),{close:A,error:_,leave:v,join:N}=si;if(h&&[A,_,v,N].indexOf(b)>=0&&h!==this._joinRef())return;let k=this._onMessage(b,l,h);if(l&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(x=this.bindings.postgres_changes)===null||x===void 0||x.filter(j=>{var F,G,J;return((F=j.filter)===null||F===void 0?void 0:F.event)==="*"||((J=(G=j.filter)===null||G===void 0?void 0:G.event)===null||J===void 0?void 0:J.toLocaleLowerCase())===b}).map(j=>j.callback(k,h)):(g=this.bindings[b])===null||g===void 0||g.filter(j=>{var F,G,J,ae,ue,W;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in j){const xe=j.id,Le=(F=j.filter)===null||F===void 0?void 0:F.event;return xe&&((G=l.ids)===null||G===void 0?void 0:G.includes(xe))&&(Le==="*"||(Le==null?void 0:Le.toLocaleLowerCase())===((J=l.data)===null||J===void 0?void 0:J.type.toLocaleLowerCase()))}else{const xe=(ue=(ae=j==null?void 0:j.filter)===null||ae===void 0?void 0:ae.event)===null||ue===void 0?void 0:ue.toLocaleLowerCase();return xe==="*"||xe===((W=l==null?void 0:l.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===b}).map(j=>{if(typeof k=="object"&&"ids"in k){const F=k.data,{schema:G,table:J,commit_timestamp:ae,type:ue,errors:W}=F;k=Object.assign(Object.assign({},{schema:G,table:J,commit_timestamp:ae,eventType:ue,new:{},old:{},errors:W}),this._getPayloadRecords(F))}j.callback(k,h)})}_isClosed(){return this.state===In.closed}_isJoined(){return this.state===In.joined}_isJoining(){return this.state===In.joining}_isLeaving(){return this.state===In.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,l,h){const x=a.toLocaleLowerCase(),g={type:x,filter:l,callback:h};return this.bindings[x]?this.bindings[x].push(g):this.bindings[x]=[g],this}_off(a,l){const h=a.toLocaleLowerCase();return this.bindings[h]&&(this.bindings[h]=this.bindings[h].filter(x=>{var g;return!(((g=x.type)===null||g===void 0?void 0:g.toLocaleLowerCase())===h&&eo.isEqual(x.filter,l))})),this}static isEqual(a,l){if(Object.keys(a).length!==Object.keys(l).length)return!1;for(const h in a)if(a[h]!==l[h])return!1;return!0}static isFilterValueEqual(a,l){return(a??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(si.close,{},a)}_onError(a){this._on(si.error,{},l=>a(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=In.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const l={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(l.new=jg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(l.old=jg(a.columns,a.old_record)),l}};const uf=()=>{},ku={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hw=[1e3,2e3,5e3,1e4],fw=1e4,dw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let gw=class{constructor(a,l){var h;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bf,this.transport=null,this.heartbeatIntervalMs=ku.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uf,this.ref=0,this.reconnectTimer=null,this.vsn=Lg,this.logger=uf,this.conn=null,this.sendBuffer=[],this.serializer=new rw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=x=>x?(...g)=>x(...g):(...g)=>fetch(...g),!(!((h=l==null?void 0:l.params)===null||h===void 0)&&h.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${a}/${kf.websocket}`,this.httpEndpoint=xm(a),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l==null?void 0:l.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fm.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const l=a.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const h=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(h),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const l=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const a=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,l,h){this.logger(a,l,h)}connectionState(){switch(this.conn&&this.conn.readyState){case oa.connecting:return ua.Connecting;case oa.open:return ua.Open;case oa.closing:return ua.Closing;default:return ua.Closed}}isConnected(){return this.connectionState()===ua.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,l={config:{}}){const h=`realtime:${a}`,x=this.getChannels().find(g=>g.topic===h);if(x)return x;{const g=new ym(`realtime:${a}`,l,this);return this.channels.push(g),g}}push(a){const{topic:l,event:h,payload:x,ref:g}=a,b=()=>{this.encode(a,A=>{var _;(_=this.conn)===null||_===void 0||_.send(A)})};this.log("push",`${l} ${h} (${g})`,x),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(tw,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},ku.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let l=this.channels.find(h=>h.topic===a&&(h._isJoined()||h._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${a}"`),l.unsubscribe())}_remove(a){this.channels=this.channels.filter(l=>l.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:h,event:x,payload:g,ref:b}=l,A=b?`(${b})`:"",_=g.status||"";this.log("receive",`${_} ${h} ${x} ${A}`.trim(),g),this.channels.filter(v=>v._isMember(h)).forEach(v=>v._trigger(x,g,b)),this._triggerStateCallbacks("message",l)})}_clearTimer(a){var l;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){if(this.conn){if(this.conn.readyState===oa.open||this.conn.readyState===oa.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var l;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(si.error))}_appendParams(a,l){if(Object.keys(l).length===0)return a;const h=a.match(/\?/)?"&":"?",x=new URLSearchParams(l);return`${a}${h}${x}`}_workerObjectUrl(a){let l;if(a)l=a;else{const h=new Blob([dw],{type:"application/javascript"});l=URL.createObjectURL(h)}return l}_setConnectionState(a,l=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(a=null){let l,h=!1;if(a)l=a,h=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(x){this.log("error","Error fetching access token from callback",x),l=this.accessTokenValue}else l=this.accessTokenValue;h?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(x=>{const g={access_token:l,version:$y};l&&x.updateJoinPayload(g),x.joinedOnce&&x._isJoined()&&x._push(si.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${a}`,l)})}_triggerStateCallbacks(a,l){try{this.stateChangeCallbacks[a].forEach(h=>{try{h(l)}catch(x){this.log("error",`error in ${a} callback`,x)}})}catch(h){this.log("error",`error triggering ${a} callbacks`,h)}}_setupReconnectionTimer(){this.reconnectTimer=new gm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ku.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var l,h,x,g,b,A,_,v,N,R,k,j;switch(this.transport=(l=a==null?void 0:a.transport)!==null&&l!==void 0?l:null,this.timeout=(h=a==null?void 0:a.timeout)!==null&&h!==void 0?h:Bf,this.heartbeatIntervalMs=(x=a==null?void 0:a.heartbeatIntervalMs)!==null&&x!==void 0?x:ku.HEARTBEAT_INTERVAL,this.worker=(g=a==null?void 0:a.worker)!==null&&g!==void 0?g:!1,this.accessToken=(b=a==null?void 0:a.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=(A=a==null?void 0:a.heartbeatCallback)!==null&&A!==void 0?A:uf,this.vsn=(_=a==null?void 0:a.vsn)!==null&&_!==void 0?_:Lg,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=a==null?void 0:a.reconnectAfterMs)!==null&&v!==void 0?v:(F=>hw[F-1]||fw),this.vsn){case dm:this.encode=(N=a==null?void 0:a.encode)!==null&&N!==void 0?N:((F,G)=>G(JSON.stringify(F))),this.decode=(R=a==null?void 0:a.decode)!==null&&R!==void 0?R:((F,G)=>G(JSON.parse(F)));break;case ew:this.encode=(k=a==null?void 0:a.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(j=a==null?void 0:a.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}};const mw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:cw,get REALTIME_LISTEN_TYPES(){return el},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Uf},get REALTIME_PRESENCE_LISTEN_EVENTS(){return jf},get REALTIME_SUBSCRIBE_STATES(){return mi},RealtimeChannel:ym,RealtimeClient:gw,RealtimePresence:pm,WebSocketFactory:fm},Symbol.toStringTag,{value:"Module"})),wm=lo(mw);class uo extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function on(d){return typeof d=="object"&&d!==null&&"__isStorageError"in d}class bm extends uo{constructor(a,l,h){super(a),this.name="StorageApiError",this.status=l,this.statusCode=h}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xu extends uo{constructor(a,l){super(a),this.name="StorageUnknownError",this.originalError=l}}const Qf=d=>d?(...a)=>d(...a):(...a)=>fetch(...a),xw=()=>Response,Pf=d=>{if(Array.isArray(d))return d.map(l=>Pf(l));if(typeof d=="function"||d!==Object(d))return d;const a={};return Object.entries(d).forEach(([l,h])=>{const x=l.replace(/([-_][a-z])/gi,g=>g.toUpperCase().replace(/[-_]/g,""));a[x]=Pf(h)}),a},pw=d=>{if(typeof d!="object"||d===null)return!1;const a=Object.getPrototypeOf(d);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},yw=d=>!d||typeof d!="string"||d.length===0||d.length>100||d.trim()!==d||d.includes("/")||d.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(d),cf=d=>{var a;return d.msg||d.message||d.error_description||(typeof d.error=="string"?d.error:(a=d.error)===null||a===void 0?void 0:a.message)||JSON.stringify(d)},ww=(d,a,l)=>Ne(void 0,void 0,void 0,function*(){const h=yield xw();d instanceof h&&!(l!=null&&l.noResolveJson)?d.json().then(x=>{const g=d.status||500,b=(x==null?void 0:x.statusCode)||g+"";a(new bm(cf(x),g,b))}).catch(x=>{a(new Xu(cf(x),x))}):a(new Xu(cf(d),d))}),bw=(d,a,l,h)=>{const x={method:d,headers:(a==null?void 0:a.headers)||{}};return d==="GET"||!h?x:(pw(h)?(x.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),x.body=JSON.stringify(h)):x.body=h,a!=null&&a.duplex&&(x.duplex=a.duplex),Object.assign(Object.assign({},x),l))};function co(d,a,l,h,x,g){return Ne(this,void 0,void 0,function*(){return new Promise((b,A)=>{d(l,bw(a,h,x,g)).then(_=>{if(!_.ok)throw _;return h!=null&&h.noResolveJson?_:_.json()}).then(_=>b(_)).catch(_=>ww(_,A,h))})})}function io(d,a,l,h){return Ne(this,void 0,void 0,function*(){return co(d,"GET",a,l,h)})}function ii(d,a,l,h,x){return Ne(this,void 0,void 0,function*(){return co(d,"POST",a,h,x,l)})}function Ff(d,a,l,h,x){return Ne(this,void 0,void 0,function*(){return co(d,"PUT",a,h,x,l)})}function vw(d,a,l,h){return Ne(this,void 0,void 0,function*(){return co(d,"HEAD",a,Object.assign(Object.assign({},l),{noResolveJson:!0}),h)})}function Jf(d,a,l,h,x){return Ne(this,void 0,void 0,function*(){return co(d,"DELETE",a,h,x,l)})}class Ew{constructor(a,l){this.downloadFn=a,this.shouldThrowOnError=l}then(a,l){return this.execute().then(a,l)}execute(){return Ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(on(a))return{data:null,error:a};throw a}})}}var vm;class _w{constructor(a,l){this.downloadFn=a,this.shouldThrowOnError=l,this[vm]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ew(this.downloadFn,this.shouldThrowOnError)}then(a,l){return this.getPromise().then(a,l)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(on(a))return{data:null,error:a};throw a}})}}vm=Symbol.toStringTag;const Aw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ug={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cw{constructor(a,l={},h,x){this.shouldThrowOnError=!1,this.url=a,this.headers=l,this.bucketId=h,this.fetch=Qf(x)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,l,h,x){return Ne(this,void 0,void 0,function*(){try{let g;const b=Object.assign(Object.assign({},Ug),x);let A=Object.assign(Object.assign({},this.headers),a==="POST"&&{"x-upsert":String(b.upsert)});const _=b.metadata;typeof Blob<"u"&&h instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),_&&g.append("metadata",this.encodeMetadata(_)),g.append("",h)):typeof FormData<"u"&&h instanceof FormData?(g=h,g.has("cacheControl")||g.append("cacheControl",b.cacheControl),_&&!g.has("metadata")&&g.append("metadata",this.encodeMetadata(_))):(g=h,A["cache-control"]=`max-age=${b.cacheControl}`,A["content-type"]=b.contentType,_&&(A["x-metadata"]=this.toBase64(this.encodeMetadata(_))),(typeof ReadableStream<"u"&&g instanceof ReadableStream||g&&typeof g=="object"&&"pipe"in g&&typeof g.pipe=="function")&&!b.duplex&&(b.duplex="half")),x!=null&&x.headers&&(A=Object.assign(Object.assign({},A),x.headers));const v=this._removeEmptyFolders(l),N=this._getFinalPath(v),R=yield(a=="PUT"?Ff:ii)(this.fetch,`${this.url}/object/${N}`,g,Object.assign({headers:A},b!=null&&b.duplex?{duplex:b.duplex}:{}));return{data:{path:v,id:R.Id,fullPath:R.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(on(g))return{data:null,error:g};throw g}})}upload(a,l,h){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,l,h)})}uploadToSignedUrl(a,l,h,x){return Ne(this,void 0,void 0,function*(){const g=this._removeEmptyFolders(a),b=this._getFinalPath(g),A=new URL(this.url+`/object/upload/sign/${b}`);A.searchParams.set("token",l);try{let _;const v=Object.assign({upsert:Ug.upsert},x),N=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&h instanceof Blob?(_=new FormData,_.append("cacheControl",v.cacheControl),_.append("",h)):typeof FormData<"u"&&h instanceof FormData?(_=h,_.append("cacheControl",v.cacheControl)):(_=h,N["cache-control"]=`max-age=${v.cacheControl}`,N["content-type"]=v.contentType);const R=yield Ff(this.fetch,A.toString(),_,{headers:N});return{data:{path:g,fullPath:R.Key},error:null}}catch(_){if(this.shouldThrowOnError)throw _;if(on(_))return{data:null,error:_};throw _}})}createSignedUploadUrl(a,l){return Ne(this,void 0,void 0,function*(){try{let h=this._getFinalPath(a);const x=Object.assign({},this.headers);l!=null&&l.upsert&&(x["x-upsert"]="true");const g=yield ii(this.fetch,`${this.url}/object/upload/sign/${h}`,{},{headers:x}),b=new URL(this.url+g.url),A=b.searchParams.get("token");if(!A)throw new uo("No token returned by API");return{data:{signedUrl:b.toString(),path:a,token:A},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(on(h))return{data:null,error:h};throw h}})}update(a,l,h){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,l,h)})}move(a,l,h){return Ne(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:h==null?void 0:h.destinationBucket},{headers:this.headers}),error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}copy(a,l,h){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:l,destinationBucket:h==null?void 0:h.destinationBucket},{headers:this.headers})).Key},error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}createSignedUrl(a,l,h){return Ne(this,void 0,void 0,function*(){try{let x=this._getFinalPath(a),g=yield ii(this.fetch,`${this.url}/object/sign/${x}`,Object.assign({expiresIn:l},h!=null&&h.transform?{transform:h.transform}:{}),{headers:this.headers});const b=h!=null&&h.download?`&download=${h.download===!0?"":h.download}`:"";return g={signedUrl:encodeURI(`${this.url}${g.signedURL}${b}`)},{data:g,error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}createSignedUrls(a,l,h){return Ne(this,void 0,void 0,function*(){try{const x=yield ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:l,paths:a},{headers:this.headers}),g=h!=null&&h.download?`&download=${h.download===!0?"":h.download}`:"";return{data:x.map(b=>Object.assign(Object.assign({},b),{signedUrl:b.signedURL?encodeURI(`${this.url}${b.signedURL}${g}`):null})),error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}download(a,l){const x=typeof(l==null?void 0:l.transform)<"u"?"render/image/authenticated":"object",g=this.transformOptsToQueryString((l==null?void 0:l.transform)||{}),b=g?`?${g}`:"",A=this._getFinalPath(a),_=()=>io(this.fetch,`${this.url}/${x}/${A}${b}`,{headers:this.headers,noResolveJson:!0});return new _w(_,this.shouldThrowOnError)}info(a){return Ne(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{const h=yield io(this.fetch,`${this.url}/object/info/${l}`,{headers:this.headers});return{data:Pf(h),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(on(h))return{data:null,error:h};throw h}})}exists(a){return Ne(this,void 0,void 0,function*(){const l=this._getFinalPath(a);try{return yield vw(this.fetch,`${this.url}/object/${l}`,{headers:this.headers}),{data:!0,error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(on(h)&&h instanceof Xu){const x=h.originalError;if([400,404].includes(x==null?void 0:x.status))return{data:!1,error:h}}throw h}})}getPublicUrl(a,l){const h=this._getFinalPath(a),x=[],g=l!=null&&l.download?`download=${l.download===!0?"":l.download}`:"";g!==""&&x.push(g);const A=typeof(l==null?void 0:l.transform)<"u"?"render/image":"object",_=this.transformOptsToQueryString((l==null?void 0:l.transform)||{});_!==""&&x.push(_);let v=x.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${A}/public/${h}${v}`)}}}remove(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}list(a,l,h){return Ne(this,void 0,void 0,function*(){try{const x=Object.assign(Object.assign(Object.assign({},Aw),l),{prefix:a||""});return{data:yield ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,x,{headers:this.headers},h),error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}listV2(a,l){return Ne(this,void 0,void 0,function*(){try{const h=Object.assign({},a);return{data:yield ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,h,{headers:this.headers},l),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(on(h))return{data:null,error:h};throw h}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const l=[];return a.width&&l.push(`width=${a.width}`),a.height&&l.push(`height=${a.height}`),a.resize&&l.push(`resize=${a.resize}`),a.format&&l.push(`format=${a.format}`),a.quality&&l.push(`quality=${a.quality}`),l.join("&")}}const Em="2.87.1",_m={"X-Client-Info":`storage-js/${Em}`};class Sw{constructor(a,l={},h,x){this.shouldThrowOnError=!1;const g=new URL(a);x!=null&&x.useNewHostname&&/supabase\.(co|in|red)$/.test(g.hostname)&&!g.hostname.includes("storage.supabase.")&&(g.hostname=g.hostname.replace("supabase.","storage.supabase.")),this.url=g.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_m),l),this.fetch=Qf(h)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return Ne(this,void 0,void 0,function*(){try{const l=this.listBucketOptionsToQueryString(a);return{data:yield io(this.fetch,`${this.url}/bucket${l}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}getBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}createBucket(a){return Ne(this,arguments,void 0,function*(l,h={public:!1}){try{return{data:yield ii(this.fetch,`${this.url}/bucket`,{id:l,name:l,type:h.type,public:h.public,file_size_limit:h.fileSizeLimit,allowed_mime_types:h.allowedMimeTypes},{headers:this.headers}),error:null}}catch(x){if(this.shouldThrowOnError)throw x;if(on(x))return{data:null,error:x};throw x}})}updateBucket(a,l){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(on(h))return{data:null,error:h};throw h}})}emptyBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}deleteBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}listBucketOptionsToQueryString(a){const l={};return a&&("limit"in a&&(l.limit=String(a.limit)),"offset"in a&&(l.offset=String(a.offset)),a.search&&(l.search=a.search),a.sortColumn&&(l.sortColumn=a.sortColumn),a.sortOrder&&(l.sortOrder=a.sortOrder)),Object.keys(l).length>0?"?"+new URLSearchParams(l).toString():""}}var so=class extends Error{constructor(d,a){var l;super(d),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&((l=a.icebergType)==null?void 0:l.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Tw(d,a,l){const h=new URL(a,d);if(l)for(const[x,g]of Object.entries(l))g!==void 0&&h.searchParams.set(x,g);return h.toString()}async function Ow(d){return!d||d.type==="none"?{}:d.type==="bearer"?{Authorization:`Bearer ${d.token}`}:d.type==="header"?{[d.name]:d.value}:d.type==="custom"?await d.getHeaders():{}}function Nw(d){const a=d.fetchImpl??globalThis.fetch;return{async request({method:l,path:h,query:x,body:g,headers:b}){const A=Tw(d.baseUrl,h,x),_=await Ow(d.auth),v=await a(A,{method:l,headers:{...g?{"Content-Type":"application/json"}:{},..._,...b},body:g?JSON.stringify(g):void 0}),N=await v.text(),R=(v.headers.get("content-type")||"").includes("application/json"),k=R&&N?JSON.parse(N):N;if(!v.ok){const j=R?k:void 0,F=j==null?void 0:j.error;throw new so((F==null?void 0:F.message)??`Request failed with status ${v.status}`,{status:v.status,icebergType:F==null?void 0:F.type,icebergCode:F==null?void 0:F.code,details:j})}return{status:v.status,headers:v.headers,data:k}}}}function Lu(d){return d.join("")}var Rw=class{constructor(d,a=""){this.client=d,this.prefix=a}async listNamespaces(d){const a=d?{parent:Lu(d.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(h=>({namespace:h}))}async createNamespace(d,a){const l={namespace:d.namespace,properties:a==null?void 0:a.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(d){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lu(d.namespace)}`})}async loadNamespaceMetadata(d){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lu(d.namespace)}`})).data.properties}}async namespaceExists(d){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lu(d.namespace)}`}),!0}catch(a){if(a instanceof so&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(d,a){try{return await this.createNamespace(d,a)}catch(l){if(l instanceof so&&l.status===409)return;throw l}}};function Xa(d){return d.join("")}var Iw=class{constructor(d,a="",l){this.client=d,this.prefix=a,this.accessDelegation=l}async listTables(d){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables`})).data.identifiers}async createTable(d,a){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables`,body:a,headers:l})).data.metadata}async updateTable(d,a){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables/${d.name}`,body:a});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(d,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables/${d.name}`,query:{purgeRequested:String((a==null?void 0:a.purge)??!1)}})}async loadTable(d){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables/${d.name}`,headers:a})).data.metadata}async tableExists(d){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xa(d.namespace)}/tables/${d.name}`,headers:a}),!0}catch(l){if(l instanceof so&&l.status===404)return!1;throw l}}async createTableIfNotExists(d,a){try{return await this.createTable(d,a)}catch(l){if(l instanceof so&&l.status===409)return await this.loadTable({namespace:d.namespace,name:a.name});throw l}}},Dw=class{constructor(d){var h;let a="v1";d.catalogName&&(a+=`/${d.catalogName}`);const l=d.baseUrl.endsWith("/")?d.baseUrl:`${d.baseUrl}/`;this.client=Nw({baseUrl:l,auth:d.auth,fetchImpl:d.fetch}),this.accessDelegation=(h=d.accessDelegation)==null?void 0:h.join(","),this.namespaceOps=new Rw(this.client,a),this.tableOps=new Iw(this.client,a,this.accessDelegation)}async listNamespaces(d){return this.namespaceOps.listNamespaces(d)}async createNamespace(d,a){return this.namespaceOps.createNamespace(d,a)}async dropNamespace(d){await this.namespaceOps.dropNamespace(d)}async loadNamespaceMetadata(d){return this.namespaceOps.loadNamespaceMetadata(d)}async listTables(d){return this.tableOps.listTables(d)}async createTable(d,a){return this.tableOps.createTable(d,a)}async updateTable(d,a){return this.tableOps.updateTable(d,a)}async dropTable(d,a){await this.tableOps.dropTable(d,a)}async loadTable(d){return this.tableOps.loadTable(d)}async namespaceExists(d){return this.namespaceOps.namespaceExists(d)}async tableExists(d){return this.tableOps.tableExists(d)}async createNamespaceIfNotExists(d,a){return this.namespaceOps.createNamespaceIfNotExists(d,a)}async createTableIfNotExists(d,a){return this.tableOps.createTableIfNotExists(d,a)}};class Am{constructor(a,l={},h){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_m),l),this.fetch=Qf(h)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}listBuckets(a){return Ne(this,void 0,void 0,function*(){try{const l=new URLSearchParams;(a==null?void 0:a.limit)!==void 0&&l.set("limit",a.limit.toString()),(a==null?void 0:a.offset)!==void 0&&l.set("offset",a.offset.toString()),a!=null&&a.sortColumn&&l.set("sortColumn",a.sortColumn),a!=null&&a.sortOrder&&l.set("sortOrder",a.sortOrder),a!=null&&a.search&&l.set("search",a.search);const h=l.toString(),x=h?`${this.url}/bucket?${h}`:`${this.url}/bucket`;return{data:yield io(this.fetch,x,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}deleteBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}from(a){if(!yw(a))throw new uo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Dw({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:()=>Ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),h=this.shouldThrowOnError;return new Proxy(l,{get(g,b){const A=g[b];return typeof A!="function"?A:(..._)=>Ne(this,void 0,void 0,function*(){try{return{data:yield A.apply(g,_),error:null}}catch(v){if(h)throw v;return{data:null,error:v}}})}})}}const $f={"X-Client-Info":`storage-js/${Em}`,"Content-Type":"application/json"};class e0 extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vr(d){return typeof d=="object"&&d!==null&&"__isStorageVectorsError"in d}class Pu extends e0{constructor(a,l,h){super(a),this.name="StorageVectorsApiError",this.status=l,this.statusCode=h}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cm extends e0{constructor(a,l){super(a),this.name="StorageVectorsUnknownError",this.originalError=l}}var zf;(function(d){d.InternalError="InternalError",d.S3VectorConflictException="S3VectorConflictException",d.S3VectorNotFoundException="S3VectorNotFoundException",d.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",d.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",d.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(zf||(zf={}));const rc=d=>d?(...a)=>d(...a):(...a)=>fetch(...a),Mw=()=>Response,Sm=d=>{if(typeof d!="object"||d===null)return!1;const a=Object.getPrototypeOf(d);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},Bw=d=>Array.from(new Float32Array(d)),kw=(d,a)=>{if(a!==void 0&&d.float32.length!==a)throw new Error(`Vector dimension mismatch: expected ${a}, got ${d.float32.length}`)},Pg=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Lw=(d,a,l)=>Ne(void 0,void 0,void 0,function*(){if(d&&typeof d=="object"&&"status"in d&&"ok"in d&&typeof d.status=="number"&&!(l!=null&&l.noResolveJson)){const x=d.status||500,g=d;if(typeof g.json=="function")g.json().then(b=>{const A=(b==null?void 0:b.statusCode)||(b==null?void 0:b.code)||x+"";a(new Pu(Pg(b),x,A))}).catch(()=>{const b=x+"",A=g.statusText||`HTTP ${x} error`;a(new Pu(A,x,b))});else{const b=x+"",A=g.statusText||`HTTP ${x} error`;a(new Pu(A,x,b))}}else a(new Cm(Pg(d),d))}),jw=(d,a,l,h)=>{const x={method:d,headers:(a==null?void 0:a.headers)||{}};return h?(Sm(h)?(x.headers=Object.assign({"Content-Type":"application/json"},a==null?void 0:a.headers),x.body=JSON.stringify(h)):x.body=h,Object.assign(Object.assign({},x),l)):x};function Uw(d,a,l,h,x,g){return Ne(this,void 0,void 0,function*(){return new Promise((b,A)=>{d(l,jw(a,h,x,g)).then(_=>{if(!_.ok)throw _;if(h!=null&&h.noResolveJson)return _;const v=_.headers.get("content-type");return!v||!v.includes("application/json")?{}:_.json()}).then(_=>b(_)).catch(_=>Lw(_,A,h))})})}function Ur(d,a,l,h,x){return Ne(this,void 0,void 0,function*(){return Uw(d,"POST",a,h,x,l)})}class Tm{constructor(a,l={},h){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$f),l),this.fetch=rc(h)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return Ne(this,void 0,void 0,function*(){try{return{data:(yield Ur(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}getIndex(a,l){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:l},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(vr(h))return{data:null,error:h};throw h}})}listIndexes(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}deleteIndex(a,l){return Ne(this,void 0,void 0,function*(){try{return{data:(yield Ur(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:l},{headers:this.headers}))||{},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(vr(h))return{data:null,error:h};throw h}})}}class Om{constructor(a,l={},h){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$f),l),this.fetch=rc(h)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return Ne(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ur(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}getVectors(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}listVectors(a){return Ne(this,void 0,void 0,function*(){try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield Ur(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}queryVectors(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}deleteVectors(a){return Ne(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ur(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}}class Nm{constructor(a,l={},h){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$f),l),this.fetch=rc(h)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:(yield Ur(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}getBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}listBuckets(){return Ne(this,arguments,void 0,function*(a={}){try{return{data:yield Ur(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}deleteBucket(a){return Ne(this,void 0,void 0,function*(){try{return{data:(yield Ur(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(vr(l))return{data:null,error:l};throw l}})}}class Rm extends Nm{constructor(a,l={}){super(a,l.headers||{},l.fetch)}from(a){return new Im(this.url,this.headers,a,this.fetch)}createBucket(a){const l=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ne(this,void 0,void 0,function*(){return l.createBucket.call(this,a)})}getBucket(a){const l=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ne(this,void 0,void 0,function*(){return l.getBucket.call(this,a)})}listBuckets(){const a=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ne(this,arguments,void 0,function*(l={}){return a.listBuckets.call(this,l)})}deleteBucket(a){const l=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ne(this,void 0,void 0,function*(){return l.deleteBucket.call(this,a)})}}class Im extends Tm{constructor(a,l,h,x){super(a,l,x),this.vectorBucketName=h}createIndex(a){const l=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ne(this,void 0,void 0,function*(){return l.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ne(this,arguments,void 0,function*(l={}){return a.listIndexes.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){const l=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ne(this,void 0,void 0,function*(){return l.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){const l=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ne(this,void 0,void 0,function*(){return l.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new Dm(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class Dm extends Om{constructor(a,l,h,x,g){super(a,l,g),this.vectorBucketName=h,this.indexName=x}putVectors(a){const l=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ne(this,void 0,void 0,function*(){return l.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){const l=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ne(this,void 0,void 0,function*(){return l.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ne(this,arguments,void 0,function*(l={}){return a.listVectors.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){const l=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ne(this,void 0,void 0,function*(){return l.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){const l=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ne(this,void 0,void 0,function*(){return l.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Pw extends Sw{constructor(a,l={},h,x){super(a,l,h,x)}from(a){return new Cw(this.url,this.headers,a,this.fetch)}get vectors(){return new Rm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Am(this.url+"/iceberg",this.headers,this.fetch)}}const Fw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Am,StorageApiError:bm,StorageClient:Pw,StorageError:uo,StorageUnknownError:Xu,StorageVectorsApiError:Pu,StorageVectorsClient:Rm,StorageVectorsError:e0,get StorageVectorsErrorCode(){return zf},StorageVectorsUnknownError:Cm,VectorBucketApi:Nm,VectorBucketScope:Im,VectorDataApi:Om,VectorIndexApi:Tm,VectorIndexScope:Dm,isPlainObject:Sm,isStorageError:on,isStorageVectorsError:vr,normalizeToFloat32:Bw,resolveFetch:rc,resolveResponse:Mw,validateVectorDimension:kw},Symbol.toStringTag,{value:"Module"})),zw=lo(Fw);var hf={},Jl={},Fg;function qw(){return Fg||(Fg=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.version=void 0,Jl.version="2.87.1"),Jl}var zg;function Hw(){return zg||(zg=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.DEFAULT_REALTIME_OPTIONS=d.DEFAULT_AUTH_OPTIONS=d.DEFAULT_DB_OPTIONS=d.DEFAULT_GLOBAL_OPTIONS=d.DEFAULT_HEADERS=void 0;const a=qw();let l="";typeof Deno<"u"?l="deno":typeof document<"u"?l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?l="react-native":l="node",d.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${l}/${a.version}`},d.DEFAULT_GLOBAL_OPTIONS={headers:d.DEFAULT_HEADERS},d.DEFAULT_DB_OPTIONS={schema:"public"},d.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d.DEFAULT_REALTIME_OPTIONS={}})(hf)),hf}var ff={},qg;function Gw(){return qg||(qg=1,(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.fetchWithAuth=d.resolveHeadersConstructor=d.resolveFetch=void 0;const a=x=>x?(...g)=>x(...g):(...g)=>fetch(...g);d.resolveFetch=a;const l=()=>Headers;d.resolveHeadersConstructor=l;const h=(x,g,b)=>{const A=(0,d.resolveFetch)(b),_=(0,d.resolveHeadersConstructor)();return async(v,N)=>{var R;const k=(R=await g())!==null&&R!==void 0?R:x;let j=new _(N==null?void 0:N.headers);return j.has("apikey")||j.set("apikey",x),j.has("Authorization")||j.set("Authorization",`Bearer ${k}`),A(v,Object.assign(Object.assign({},N),{headers:j}))}};d.fetchWithAuth=h})(ff)),ff}var qi={},Hg;function Vw(){if(Hg)return qi;Hg=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.isBrowser=void 0,qi.uuid=d,qi.ensureTrailingSlash=a,qi.applySettingDefaults=h,qi.validateSupabaseUrl=x;function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var b=Math.random()*16|0,A=g=="x"?b:b&3|8;return A.toString(16)})}function a(g){return g.endsWith("/")?g:g+"/"}const l=()=>typeof window<"u";qi.isBrowser=l;function h(g,b){var A,_;const{db:v,auth:N,realtime:R,global:k}=g,{db:j,auth:F,realtime:G,global:J}=b,ae={db:Object.assign(Object.assign({},j),v),auth:Object.assign(Object.assign({},F),N),realtime:Object.assign(Object.assign({},G),R),storage:{},global:Object.assign(Object.assign(Object.assign({},J),k),{headers:Object.assign(Object.assign({},(A=J==null?void 0:J.headers)!==null&&A!==void 0?A:{}),(_=k==null?void 0:k.headers)!==null&&_!==void 0?_:{})}),accessToken:async()=>""};return g.accessToken?ae.accessToken=g.accessToken:delete ae.accessToken,ae}function x(g){const b=g==null?void 0:g.trim();if(!b)throw new Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(a(b))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return qi}var $l={};const Mm="2.87.1",Qa=30*1e3,qf=3,df=qf*Qa,Xw="http://localhost:9999",Yw="supabase.auth.token",Kw={"X-Client-Info":`gotrue-js/${Mm}`},Hf="X-Supabase-Api-Version",Bm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ww=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zw=600*1e3;let rl=class extends Error{constructor(a,l,h){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=h}};function Be(d){return typeof d=="object"&&d!==null&&"__isAuthError"in d}let km=class extends rl{constructor(a,l,h){super(a,l,h),this.name="AuthApiError",this.status=l,this.code=h}};function Lm(d){return Be(d)&&d.name==="AuthApiError"}let Ns=class extends rl{constructor(a,l){super(a),this.name="AuthUnknownError",this.originalError=l}},Gi=class extends rl{constructor(a,l,h,x){super(a,h,x),this.name=l,this.status=h}},br=class extends Gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function jm(d){return Be(d)&&d.name==="AuthSessionMissingError"}let sa=class extends Gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},to=class extends Gi{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}},no=class extends Gi{constructor(a,l=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Um(d){return Be(d)&&d.name==="AuthImplicitGrantRedirectError"}let Gf=class extends Gi{constructor(a,l=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Yu=class extends Gi{constructor(a,l){super(a,"AuthRetryableFetchError",l,void 0)}};function Fu(d){return Be(d)&&d.name==="AuthRetryableFetchError"}let Vf=class extends Gi{constructor(a,l,h){super(a,"AuthWeakPasswordError",l,"weak_password"),this.reasons=h}};function Qw(d){return Be(d)&&d.name==="AuthWeakPasswordError"}let Ku=class extends Gi{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}};const Wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gg=` 	
\r=`.split(""),Jw=(()=>{const d=new Array(128);for(let a=0;a<d.length;a+=1)d[a]=-1;for(let a=0;a<Gg.length;a+=1)d[Gg[a].charCodeAt(0)]=-2;for(let a=0;a<Wu.length;a+=1)d[Wu[a].charCodeAt(0)]=a;return d})();function Vg(d,a,l){if(d!==null)for(a.queue=a.queue<<8|d,a.queuedBits+=8;a.queuedBits>=6;){const h=a.queue>>a.queuedBits-6&63;l(Wu[h]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const h=a.queue>>a.queuedBits-6&63;l(Wu[h]),a.queuedBits-=6}}function Pm(d,a,l){const h=Jw[d];if(h>-1)for(a.queue=a.queue<<6|h,a.queuedBits+=6;a.queuedBits>=8;)l(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(h===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(d)}"`)}}function Xg(d){const a=[],l=b=>{a.push(String.fromCodePoint(b))},h={utf8seq:0,codepoint:0},x={queue:0,queuedBits:0},g=b=>{tb(b,h,l)};for(let b=0;b<d.length;b+=1)Pm(d.charCodeAt(b),x,g);return a.join("")}function $w(d,a){if(d<=127){a(d);return}else if(d<=2047){a(192|d>>6),a(128|d&63);return}else if(d<=65535){a(224|d>>12),a(128|d>>6&63),a(128|d&63);return}else if(d<=1114111){a(240|d>>18),a(128|d>>12&63),a(128|d>>6&63),a(128|d&63);return}throw new Error(`Unrecognized Unicode codepoint: ${d.toString(16)}`)}function eb(d,a){for(let l=0;l<d.length;l+=1){let h=d.charCodeAt(l);if(h>55295&&h<=56319){const x=(h-55296)*1024&65535;h=(d.charCodeAt(l+1)-56320&65535|x)+65536,l+=1}$w(h,a)}}function tb(d,a,l){if(a.utf8seq===0){if(d<=127){l(d);return}for(let h=1;h<6;h+=1)if((d>>7-h&1)===0){a.utf8seq=h;break}if(a.utf8seq===2)a.codepoint=d&31;else if(a.utf8seq===3)a.codepoint=d&15;else if(a.utf8seq===4)a.codepoint=d&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(d<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|d&63,a.utf8seq-=1,a.utf8seq===0&&l(a.codepoint)}}function tl(d){const a=[],l={queue:0,queuedBits:0},h=x=>{a.push(x)};for(let x=0;x<d.length;x+=1)Pm(d.charCodeAt(x),l,h);return new Uint8Array(a)}function nb(d){const a=[];return eb(d,l=>a.push(l)),new Uint8Array(a)}function ca(d){const a=[],l={queue:0,queuedBits:0},h=x=>{a.push(x)};return d.forEach(x=>Vg(x,l,h)),Vg(null,l,h),a.join("")}function rb(d){return Math.round(Date.now()/1e3)+d}function ib(){return Symbol("auth-callback")}const Qn=()=>typeof window<"u"&&typeof document<"u",ra={tested:!1,writable:!1},Fm=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ra.tested)return ra.writable;const d=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(d,d),globalThis.localStorage.removeItem(d),ra.tested=!0,ra.writable=!0}catch{ra.tested=!0,ra.writable=!1}return ra.writable};function sb(d){const a={},l=new URL(d);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((x,g)=>{a[g]=x})}catch{}return l.searchParams.forEach((h,x)=>{a[x]=h}),a}const zm=d=>d?(...a)=>d(...a):(...a)=>fetch(...a),ab=d=>typeof d=="object"&&d!==null&&"status"in d&&"ok"in d&&"json"in d&&typeof d.json=="function",Ja=async(d,a,l)=>{await d.setItem(a,JSON.stringify(l))},ia=async(d,a)=>{const l=await d.getItem(a);if(!l)return null;try{return JSON.parse(l)}catch{return l}},Zn=async(d,a)=>{await d.removeItem(a)};class ic{constructor(){this.promise=new ic.promiseConstructor((a,l)=>{this.resolve=a,this.reject=l})}}ic.promiseConstructor=Promise;function gf(d){const a=d.split(".");if(a.length!==3)throw new Ku("Invalid JWT structure");for(let h=0;h<a.length;h++)if(!Ww.test(a[h]))throw new Ku("JWT not in base64url format");return{header:JSON.parse(Xg(a[0])),payload:JSON.parse(Xg(a[1])),signature:tl(a[2]),raw:{header:a[0],payload:a[1]}}}async function lb(d){return await new Promise(a=>{setTimeout(()=>a(null),d)})}function ob(d,a){return new Promise((h,x)=>{(async()=>{for(let g=0;g<1/0;g++)try{const b=await d(g);if(!a(g,null,b)){h(b);return}}catch(b){if(!a(g,b)){x(b);return}}})()})}function ub(d){return("0"+d.toString(16)).substr(-2)}function cb(){const a=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",h=l.length;let x="";for(let g=0;g<56;g++)x+=l.charAt(Math.floor(Math.random()*h));return x}return crypto.getRandomValues(a),Array.from(a,ub).join("")}async function hb(d){const l=new TextEncoder().encode(d),h=await crypto.subtle.digest("SHA-256",l),x=new Uint8Array(h);return Array.from(x).map(g=>String.fromCharCode(g)).join("")}async function fb(d){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),d;const l=await hb(d);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ya(d,a,l=!1){const h=cb();let x=h;l&&(x+="/PASSWORD_RECOVERY"),await Ja(d,`${a}-code-verifier`,x);const g=await fb(h);return[g,h===g?"plain":"s256"]}const db=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gb(d){const a=d.headers.get(Hf);if(!a||!a.match(db))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function mb(d){if(!d)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(d<=a)throw new Error("JWT has expired")}function xb(d){switch(d){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ka(d){if(!pb.test(d))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mf(){const d={};return new Proxy(d,{get:(a,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yb(d,a){return new Proxy(d,{get:(l,h,x)=>{if(h==="__isInsecureUserWarningProxy")return!0;if(typeof h=="symbol"){const g=h.toString();if(g==="Symbol(Symbol.toPrimitive)"||g==="Symbol(Symbol.toStringTag)"||g==="Symbol(util.inspect.custom)"||g==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,h,x)}return!a.value&&typeof h=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(l,h,x)}})}function Yg(d){return JSON.parse(JSON.stringify(d))}const aa=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),wb=[502,503,504];async function Kg(d){var a;if(!ab(d))throw new Yu(aa(d),0);if(wb.includes(d.status))throw new Yu(aa(d),d.status);let l;try{l=await d.json()}catch(g){throw new Ns(aa(g),g)}let h;const x=gb(d);if(x&&x.getTime()>=Bm["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?h=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(h=l.error_code),h){if(h==="weak_password")throw new Vf(aa(l),d.status,((a=l.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(h==="session_not_found")throw new br}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((g,b)=>g&&typeof b=="string",!0))throw new Vf(aa(l),d.status,l.weak_password.reasons);throw new km(aa(l),d.status||500,h)}const bb=(d,a,l,h)=>{const x={method:d,headers:(a==null?void 0:a.headers)||{}};return d==="GET"?x:(x.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),x.body=JSON.stringify(h),Object.assign(Object.assign({},x),l))};async function Ge(d,a,l,h){var x;const g=Object.assign({},h==null?void 0:h.headers);g[Hf]||(g[Hf]=Bm["2024-01-01"].name),h!=null&&h.jwt&&(g.Authorization=`Bearer ${h.jwt}`);const b=(x=h==null?void 0:h.query)!==null&&x!==void 0?x:{};h!=null&&h.redirectTo&&(b.redirect_to=h.redirectTo);const A=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",_=await vb(d,a,l+A,{headers:g,noResolveJson:h==null?void 0:h.noResolveJson},{},h==null?void 0:h.body);return h!=null&&h.xform?h==null?void 0:h.xform(_):{data:Object.assign({},_),error:null}}async function vb(d,a,l,h,x,g){const b=bb(a,h,x,g);let A;try{A=await d(l,Object.assign({},b))}catch(_){throw console.error(_),new Yu(aa(_),0)}if(A.ok||await Kg(A),h!=null&&h.noResolveJson)return A;try{return await A.json()}catch(_){await Kg(_)}}function ri(d){var a;let l=null;Ab(d)&&(l=Object.assign({},d),d.expires_at||(l.expires_at=rb(d.expires_in)));const h=(a=d.user)!==null&&a!==void 0?a:d;return{data:{session:l,user:h},error:null}}function Wg(d){const a=ri(d);return!a.error&&d.weak_password&&typeof d.weak_password=="object"&&Array.isArray(d.weak_password.reasons)&&d.weak_password.reasons.length&&d.weak_password.message&&typeof d.weak_password.message=="string"&&d.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0)&&(a.data.weak_password=d.weak_password),a}function Rs(d){var a;return{data:{user:(a=d.user)!==null&&a!==void 0?a:d},error:null}}function Eb(d){return{data:d,error:null}}function _b(d){const{action_link:a,email_otp:l,hashed_token:h,redirect_to:x,verification_type:g}=d,b=il(d,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),A={action_link:a,email_otp:l,hashed_token:h,redirect_to:x,verification_type:g},_=Object.assign({},b);return{data:{properties:A,user:_},error:null}}function Zg(d){return d}function Ab(d){return d.access_token&&d.refresh_token&&d.expires_in}const zu=["global","local","others"];let t0=class{constructor({url:a="",headers:l={},fetch:h}){this.url=a,this.headers=l,this.fetch=zm(h),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,l=zu[0]){if(zu.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zu.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(h){if(Be(h))return{data:null,error:h};throw h}}async inviteUserByEmail(a,l={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Rs})}catch(h){if(Be(h))return{data:{user:null},error:h};throw h}}async generateLink(a){try{const{options:l}=a,h=il(a,["options"]),x=Object.assign(Object.assign({},h),l);return"newEmail"in h&&(x.new_email=h==null?void 0:h.newEmail,delete x.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:x,headers:this.headers,xform:_b,redirectTo:l==null?void 0:l.redirectTo})}catch(l){if(Be(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(a){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Rs})}catch(l){if(Be(l))return{data:{user:null},error:l};throw l}}async listUsers(a){var l,h,x,g,b,A,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(l=a==null?void 0:a.page)===null||l===void 0?void 0:l.toString())!==null&&h!==void 0?h:"",per_page:(g=(x=a==null?void 0:a.perPage)===null||x===void 0?void 0:x.toString())!==null&&g!==void 0?g:""},xform:Zg});if(N.error)throw N.error;const R=await N.json(),k=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,j=(_=(A=N.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&_!==void 0?_:[];return j.length>0&&(j.forEach(F=>{const G=parseInt(F.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(F.split(";")[1].split("=")[1]);v[`${J}Page`]=G}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},R),v),error:null}}catch(v){if(Be(v))return{data:{users:[]},error:v};throw v}}async getUserById(a){Ka(a);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Rs})}catch(l){if(Be(l))return{data:{user:null},error:l};throw l}}async updateUserById(a,l){Ka(a);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:l,headers:this.headers,xform:Rs})}catch(h){if(Be(h))return{data:{user:null},error:h};throw h}}async deleteUser(a,l=!1){Ka(a);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:l},xform:Rs})}catch(h){if(Be(h))return{data:{user:null},error:h};throw h}}async _listFactors(a){Ka(a.userId);try{const{data:l,error:h}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:x=>({data:{factors:x},error:null})});return{data:l,error:h}}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _deleteFactor(a){Ka(a.userId),Ka(a.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _listOAuthClients(a){var l,h,x,g,b,A,_;try{const v={nextPage:null,lastPage:0,total:0},N=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(l=a==null?void 0:a.page)===null||l===void 0?void 0:l.toString())!==null&&h!==void 0?h:"",per_page:(g=(x=a==null?void 0:a.perPage)===null||x===void 0?void 0:x.toString())!==null&&g!==void 0?g:""},xform:Zg});if(N.error)throw N.error;const R=await N.json(),k=(b=N.headers.get("x-total-count"))!==null&&b!==void 0?b:0,j=(_=(A=N.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&_!==void 0?_:[];return j.length>0&&(j.forEach(F=>{const G=parseInt(F.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(F.split(";")[1].split("=")[1]);v[`${J}Page`]=G}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},R),v),error:null}}catch(v){if(Be(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(a){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _getOAuthClient(a){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _updateOAuthClient(a,l){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:l,headers:this.headers,xform:h=>({data:h,error:null})})}catch(h){if(Be(h))return{data:null,error:h};throw h}}async _deleteOAuthClient(a){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Be(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(a){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Be(l))return{data:null,error:l};throw l}}};function Qg(d={}){return{getItem:a=>d[a]||null,setItem:(a,l)=>{d[a]=l},removeItem:a=>{delete d[a]}}}const la={debug:!!(globalThis&&Fm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class n0 extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}let qm=class extends n0{};class Cb extends n0{}async function Hm(d,a,l){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",d,a);const h=new globalThis.AbortController;return a>0&&setTimeout(()=>{h.abort(),la.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",d)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(d,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:h.signal},async x=>{if(x){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",d,x.name);try{return await l()}finally{la.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",d,x.name)}}else{if(a===0)throw la.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",d),new qm(`Acquiring an exclusive Navigator LockManager lock "${d}" immediately failed`);if(la.debug)try{const g=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(g,null,"  "))}catch(g){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",g)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}const Jg={};async function Sb(d,a,l){var h;const x=(h=Jg[d])!==null&&h!==void 0?h:Promise.resolve(),g=Promise.race([x.catch(()=>null),a>=0?new Promise((b,A)=>{setTimeout(()=>{A(new Cb(`Acquring process lock with name "${d}" timed out`))},a)}):null].filter(b=>b)).catch(b=>{if(b&&b.isAcquireTimeout)throw b;return null}).then(async()=>await l());return Jg[d]=g.catch(async b=>{if(b&&b.isAcquireTimeout)return await x,null;throw b}),await g}function Tb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Gm(d){if(!/^0x[a-fA-F0-9]{40}$/.test(d))throw new Error(`@supabase/auth-js: Address "${d}" is invalid.`);return d.toLowerCase()}function Ob(d){return parseInt(d,16)}function Nb(d){const a=new TextEncoder().encode(d);return"0x"+Array.from(a,h=>h.toString(16).padStart(2,"0")).join("")}function Rb(d){var a;const{chainId:l,domain:h,expirationTime:x,issuedAt:g=new Date,nonce:b,notBefore:A,requestId:_,resources:v,scheme:N,uri:R,version:k}=d;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(b&&b.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${b}`);if(!R)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((a=d.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${d.statement}`)}const j=Gm(d.address),F=N?`${N}://${h}`:h,G=d.statement?`${d.statement}
`:"",J=`${F} wants you to sign in with your Ethereum account:
${j}

${G}`;let ae=`URI: ${R}
Version: ${k}
Chain ID: ${l}${b?`
Nonce: ${b}`:""}
Issued At: ${g.toISOString()}`;if(x&&(ae+=`
Expiration Time: ${x.toISOString()}`),A&&(ae+=`
Not Before: ${A.toISOString()}`),_&&(ae+=`
Request ID: ${_}`),v){let ue=`
Resources:`;for(const W of v){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);ue+=`
- ${W}`}ae+=ue}return`${J}
${ae}`}class Dn extends Error{constructor({message:a,code:l,cause:h,name:x}){var g;super(a,{cause:h}),this.__isWebAuthnError=!0,this.name=(g=x??(h instanceof Error?h.name:void 0))!==null&&g!==void 0?g:"Unknown Error",this.code=l}}class Zu extends Dn{constructor(a,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:a}),this.name="WebAuthnUnknownError",this.originalError=l}}function Ib({error:d,options:a}){var l,h,x;const{publicKey:g}=a;if(!g)throw Error("options was missing required publicKey property");if(d.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:d})}else if(d.name==="ConstraintError"){if(((l=g.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new Dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:d});if(a.mediation==="conditional"&&((h=g.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new Dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:d});if(((x=g.authenticatorSelection)===null||x===void 0?void 0:x.userVerification)==="required")return new Dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:d})}else{if(d.name==="InvalidStateError")return new Dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:d});if(d.name==="NotAllowedError")return new Dn({message:d.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d});if(d.name==="NotSupportedError")return g.pubKeyCredParams.filter(A=>A.type==="public-key").length===0?new Dn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:d}):new Dn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:d});if(d.name==="SecurityError"){const b=window.location.hostname;if(Vm(b)){if(g.rp.id!==b)return new Dn({message:`The RP ID "${g.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:d})}else return new Dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:d})}else if(d.name==="TypeError"){if(g.user.id.byteLength<1||g.user.id.byteLength>64)return new Dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:d})}else if(d.name==="UnknownError")return new Dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:d})}return new Dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d})}function Db({error:d,options:a}){const{publicKey:l}=a;if(!l)throw Error("options was missing required publicKey property");if(d.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:d})}else{if(d.name==="NotAllowedError")return new Dn({message:d.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d});if(d.name==="SecurityError"){const h=window.location.hostname;if(Vm(h)){if(l.rpId!==h)return new Dn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:d})}else return new Dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:d})}else if(d.name==="UnknownError")return new Dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:d})}return new Dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d})}class Mb{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Bb=new Mb;function kb(d){if(!d)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(d);const{challenge:a,user:l,excludeCredentials:h}=d,x=il(d,["challenge","user","excludeCredentials"]),g=tl(a).buffer,b=Object.assign(Object.assign({},l),{id:tl(l.id).buffer}),A=Object.assign(Object.assign({},x),{challenge:g,user:b});if(h&&h.length>0){A.excludeCredentials=new Array(h.length);for(let _=0;_<h.length;_++){const v=h[_];A.excludeCredentials[_]=Object.assign(Object.assign({},v),{id:tl(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return A}function Lb(d){if(!d)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(d);const{challenge:a,allowCredentials:l}=d,h=il(d,["challenge","allowCredentials"]),x=tl(a).buffer,g=Object.assign(Object.assign({},h),{challenge:x});if(l&&l.length>0){g.allowCredentials=new Array(l.length);for(let b=0;b<l.length;b++){const A=l[b];g.allowCredentials[b]=Object.assign(Object.assign({},A),{id:tl(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return g}function jb(d){var a;if("toJSON"in d&&typeof d.toJSON=="function")return d.toJSON();const l=d;return{id:d.id,rawId:d.id,response:{attestationObject:ca(new Uint8Array(d.response.attestationObject)),clientDataJSON:ca(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:(a=l.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Ub(d){var a;if("toJSON"in d&&typeof d.toJSON=="function")return d.toJSON();const l=d,h=d.getClientExtensionResults(),x=d.response;return{id:d.id,rawId:d.id,response:{authenticatorData:ca(new Uint8Array(x.authenticatorData)),clientDataJSON:ca(new Uint8Array(x.clientDataJSON)),signature:ca(new Uint8Array(x.signature)),userHandle:x.userHandle?ca(new Uint8Array(x.userHandle)):void 0},type:"public-key",clientExtensionResults:h,authenticatorAttachment:(a=l.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Vm(d){return d==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(d)}function $g(){var d,a;return!!(Qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((d=navigator==null?void 0:navigator.credentials)===null||d===void 0?void 0:d.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function Pb(d){try{const a=await navigator.credentials.create(d);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",a)}:{data:null,error:new Zu("Empty credential response",a)}}catch(a){return{data:null,error:Ib({error:a,options:d})}}}async function Fb(d){try{const a=await navigator.credentials.get(d);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",a)}:{data:null,error:new Zu("Empty credential response",a)}}catch(a){return{data:null,error:Db({error:a,options:d})}}}const zb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qu(...d){const a=x=>x!==null&&typeof x=="object"&&!Array.isArray(x),l=x=>x instanceof ArrayBuffer||ArrayBuffer.isView(x),h={};for(const x of d)if(x)for(const g in x){const b=x[g];if(b!==void 0)if(Array.isArray(b))h[g]=b;else if(l(b))h[g]=b;else if(a(b)){const A=h[g];a(A)?h[g]=Qu(A,b):h[g]=Qu(b)}else h[g]=b}return h}function Hb(d,a){return Qu(zb,d,a||{})}function Gb(d,a){return Qu(qb,d,a||{})}class Vb{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:l,friendlyName:h,signal:x},g){try{const{data:b,error:A}=await this.client.mfa.challenge({factorId:a,webauthn:l});if(!b)return{data:null,error:A};const _=x??Bb.createNewAbortSignal();if(b.webauthn.type==="create"){const{user:v}=b.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${h}`),v.displayName||(v.displayName=v.name)}switch(b.webauthn.type){case"create":{const v=Hb(b.webauthn.credential_options.publicKey,g==null?void 0:g.create),{data:N,error:R}=await Pb({publicKey:v,signal:_});return N?{data:{factorId:a,challengeId:b.id,webauthn:{type:b.webauthn.type,credential_response:N}},error:null}:{data:null,error:R}}case"request":{const v=Gb(b.webauthn.credential_options.publicKey,g==null?void 0:g.request),{data:N,error:R}=await Fb(Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:v,signal:_}));return N?{data:{factorId:a,challengeId:b.id,webauthn:{type:b.webauthn.type,credential_response:N}},error:null}:{data:null,error:R}}}}catch(b){return Be(b)?{data:null,error:b}:{data:null,error:new Ns("Unexpected error in challenge",b)}}}async _verify({challengeId:a,factorId:l,webauthn:h}){return this.client.mfa.verify({factorId:l,challengeId:a,webauthn:h})}async _authenticate({factorId:a,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:h=typeof window<"u"?[window.location.origin]:void 0,signal:x}={}},g){if(!l)return{data:null,error:new rl("rpId is required for WebAuthn authentication")};try{if(!$g())return{data:null,error:new Ns("Browser does not support WebAuthn",null)};const{data:b,error:A}=await this.challenge({factorId:a,webauthn:{rpId:l,rpOrigins:h},signal:x},{request:g});if(!b)return{data:null,error:A};const{webauthn:_}=b;return this._verify({factorId:a,challengeId:b.challengeId,webauthn:{type:_.type,rpId:l,rpOrigins:h,credential_response:_.credential_response}})}catch(b){return Be(b)?{data:null,error:b}:{data:null,error:new Ns("Unexpected error in authenticate",b)}}}async _register({friendlyName:a,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:h=typeof window<"u"?[window.location.origin]:void 0,signal:x}={}},g){if(!l)return{data:null,error:new rl("rpId is required for WebAuthn registration")};try{if(!$g())return{data:null,error:new Ns("Browser does not support WebAuthn",null)};const{data:b,error:A}=await this._enroll({friendlyName:a});if(!b)return await this.client.mfa.listFactors().then(N=>{var R;return(R=N.data)===null||R===void 0?void 0:R.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===a&&k.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N==null?void 0:N.id}):void 0),{data:null,error:A};const{data:_,error:v}=await this._challenge({factorId:b.id,friendlyName:b.friendly_name,webauthn:{rpId:l,rpOrigins:h},signal:x},{create:g});return _?this._verify({factorId:b.id,challengeId:_.challengeId,webauthn:{rpId:l,rpOrigins:h,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:v}}catch(b){return Be(b)?{data:null,error:b}:{data:null,error:new Ns("Unexpected error in register",b)}}}}Tb();const Xb={url:Xw,storageKey:Yw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function e2(d,a,l){return await l()}const Wa={};let r0=class Xf{get jwks(){var a,l;return(l=(a=Wa[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(a){Wa[this.storageKey]=Object.assign(Object.assign({},Wa[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,l;return(l=(a=Wa[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Wa[this.storageKey]=Object.assign(Object.assign({},Wa[this.storageKey]),{cachedAt:a})}constructor(a){var l,h,x;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const g=Object.assign(Object.assign({},Xb),a);if(this.storageKey=g.storageKey,this.instanceID=(l=Xf.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,Xf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.instanceID>0&&Qn()){const b=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(b),this.logDebugMessages&&console.trace(b)}if(this.persistSession=g.persistSession,this.autoRefreshToken=g.autoRefreshToken,this.admin=new t0({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=zm(g.fetch),this.lock=g.lock||e2,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,this.throwOnError=g.throwOnError,g.lock?this.lock=g.lock:this.persistSession&&Qn()&&(!((h=globalThis==null?void 0:globalThis.navigator)===null||h===void 0)&&h.locks)?this.lock=Hm:this.lock=e2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:Fm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qg(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=Qg(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(b){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",b)}(x=this.broadcastChannel)===null||x===void 0||x.addEventListener("message",async b=>{this._debug("received broadcast notification from other tab or client",b),await this._notifyAllSubscribers(b.data.event,b.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Mm}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let l={},h="none";if(Qn()&&(l=sb(window.location.href),this._isImplicitGrantCallback(l)?h="implicit":await this._isPKCECallback(l)&&(h="pkce")),Qn()&&this.detectSessionInUrl&&h!=="none"){const{data:x,error:g}=await this._getSessionFromURL(l,h);if(g){if(this._debug("#_initialize()","error detecting session from URL",g),Um(g)){const _=(a=g.details)===null||a===void 0?void 0:a.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:g}}return await this._removeSession(),{error:g}}const{session:b,redirectType:A}=x;return this._debug("#_initialize()","detected session in URL",b,"redirect type",A),await this._saveSession(b),setTimeout(async()=>{A==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return Be(l)?this._returnResult({error:l}):this._returnResult({error:new Ns("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var l,h,x;try{const g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(h=(l=a==null?void 0:a.options)===null||l===void 0?void 0:l.data)!==null&&h!==void 0?h:{},gotrue_meta_security:{captcha_token:(x=a==null?void 0:a.options)===null||x===void 0?void 0:x.captchaToken}},xform:ri}),{data:b,error:A}=g;if(A||!b)return this._returnResult({data:{user:null,session:null},error:A});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(Be(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signUp(a){var l,h,x;try{let g;if("email"in a){const{email:N,password:R,options:k}=a;let j=null,F=null;this.flowType==="pkce"&&([j,F]=await Ya(this.storage,this.storageKey)),g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k==null?void 0:k.emailRedirectTo,body:{email:N,password:R,data:(l=k==null?void 0:k.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken},code_challenge:j,code_challenge_method:F},xform:ri})}else if("phone"in a){const{phone:N,password:R,options:k}=a;g=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:R,data:(h=k==null?void 0:k.data)!==null&&h!==void 0?h:{},channel:(x=k==null?void 0:k.channel)!==null&&x!==void 0?x:"sms",gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken}},xform:ri})}else throw new to("You must provide either an email or phone number and a password");const{data:b,error:A}=g;if(A||!b)return await Zn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:A});const _=b.session,v=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(g){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithPassword(a){try{let l;if("email"in a){const{email:g,password:b,options:A}=a;l=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:g,password:b,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Wg})}else if("phone"in a){const{phone:g,password:b,options:A}=a;l=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:g,password:b,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Wg})}else throw new to("You must provide either an email or phone number and a password");const{data:h,error:x}=l;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!h||!h.session||!h.user){const g=new sa;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign({user:h.user,session:h.session},h.weak_password?{weakPassword:h.weak_password}:null),error:x})}catch(l){if(Be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(a){var l,h,x,g;return await this._handleProviderSignIn(a.provider,{redirectTo:(l=a.options)===null||l===void 0?void 0:l.redirectTo,scopes:(h=a.options)===null||h===void 0?void 0:h.scopes,queryParams:(x=a.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:(g=a.options)===null||g===void 0?void 0:g.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:l}=a;switch(l){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(a){var l,h,x,g,b,A,_,v,N,R,k;let j,F;if("message"in a)j=a.message,F=a.signature;else{const{chain:G,wallet:J,statement:ae,options:ue}=a;let W;if(Qn())if(typeof J=="object")W=J;else{const de=window;if("ethereum"in de&&typeof de.ethereum=="object"&&"request"in de.ethereum&&typeof de.ethereum.request=="function")W=de.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!(ue!=null&&ue.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=J}const xe=new URL((l=ue==null?void 0:ue.url)!==null&&l!==void 0?l:window.location.href),Le=await W.request({method:"eth_requestAccounts"}).then(de=>de).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Le||Le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _e=Gm(Le[0]);let ee=(h=ue==null?void 0:ue.signInWithEthereum)===null||h===void 0?void 0:h.chainId;if(!ee){const de=await W.request({method:"eth_chainId"});ee=Ob(de)}const Me={domain:xe.host,address:_e,statement:ae,uri:xe.href,version:"1",chainId:ee,nonce:(x=ue==null?void 0:ue.signInWithEthereum)===null||x===void 0?void 0:x.nonce,issuedAt:(b=(g=ue==null?void 0:ue.signInWithEthereum)===null||g===void 0?void 0:g.issuedAt)!==null&&b!==void 0?b:new Date,expirationTime:(A=ue==null?void 0:ue.signInWithEthereum)===null||A===void 0?void 0:A.expirationTime,notBefore:(_=ue==null?void 0:ue.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(v=ue==null?void 0:ue.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(N=ue==null?void 0:ue.signInWithEthereum)===null||N===void 0?void 0:N.resources};j=Rb(Me),F=await W.request({method:"personal_sign",params:[Nb(j),_e]})}try{const{data:G,error:J}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:F},!((R=a.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(k=a.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:ri});if(J)throw J;if(!G||!G.session||!G.user){const ae=new sa;return this._returnResult({data:{user:null,session:null},error:ae})}return G.session&&(await this._saveSession(G.session),await this._notifyAllSubscribers("SIGNED_IN",G.session)),this._returnResult({data:Object.assign({},G),error:J})}catch(G){if(Be(G))return this._returnResult({data:{user:null,session:null},error:G});throw G}}async signInWithSolana(a){var l,h,x,g,b,A,_,v,N,R,k,j;let F,G;if("message"in a)F=a.message,G=a.signature;else{const{chain:J,wallet:ae,statement:ue,options:W}=a;let xe;if(Qn())if(typeof ae=="object")xe=ae;else{const _e=window;if("solana"in _e&&typeof _e.solana=="object"&&("signIn"in _e.solana&&typeof _e.solana.signIn=="function"||"signMessage"in _e.solana&&typeof _e.solana.signMessage=="function"))xe=_e.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ae!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");xe=ae}const Le=new URL((l=W==null?void 0:W.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in xe&&xe.signIn){const _e=await xe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W==null?void 0:W.signInWithSolana),{version:"1",domain:Le.host,uri:Le.href}),ue?{statement:ue}:null));let ee;if(Array.isArray(_e)&&_e[0]&&typeof _e[0]=="object")ee=_e[0];else if(_e&&typeof _e=="object"&&"signedMessage"in _e&&"signature"in _e)ee=_e;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)F=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),G=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in xe)||typeof xe.signMessage!="function"||!("publicKey"in xe)||typeof xe!="object"||!xe.publicKey||!("toBase58"in xe.publicKey)||typeof xe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");F=[`${Le.host} wants you to sign in with your Solana account:`,xe.publicKey.toBase58(),...ue?["",ue,""]:[""],"Version: 1",`URI: ${Le.href}`,`Issued At: ${(x=(h=W==null?void 0:W.signInWithSolana)===null||h===void 0?void 0:h.issuedAt)!==null&&x!==void 0?x:new Date().toISOString()}`,...!((g=W==null?void 0:W.signInWithSolana)===null||g===void 0)&&g.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((b=W==null?void 0:W.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((A=W==null?void 0:W.signInWithSolana)===null||A===void 0)&&A.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((_=W==null?void 0:W.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((v=W==null?void 0:W.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((R=(N=W==null?void 0:W.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||R===void 0)&&R.length?["Resources",...W.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const _e=await xe.signMessage(new TextEncoder().encode(F),"utf8");if(!_e||!(_e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");G=_e}}try{const{data:J,error:ae}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:F,signature:ca(G)},!((k=a.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ri});if(ae)throw ae;if(!J||!J.session||!J.user){const ue=new sa;return this._returnResult({data:{user:null,session:null},error:ue})}return J.session&&(await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",J.session)),this._returnResult({data:Object.assign({},J),error:ae})}catch(J){if(Be(J))return this._returnResult({data:{user:null,session:null},error:J});throw J}}async _exchangeCodeForSession(a){const l=await ia(this.storage,`${this.storageKey}-code-verifier`),[h,x]=(l??"").split("/");try{const{data:g,error:b}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:h},xform:ri});if(await Zn(this.storage,`${this.storageKey}-code-verifier`),b)throw b;if(!g||!g.session||!g.user){const A=new sa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:A})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign(Object.assign({},g),{redirectType:x??null}),error:b})}catch(g){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(g))return this._returnResult({data:{user:null,session:null,redirectType:null},error:g});throw g}}async signInWithIdToken(a){try{const{options:l,provider:h,token:x,access_token:g,nonce:b}=a,A=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:h,id_token:x,access_token:g,nonce:b,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ri}),{data:_,error:v}=A;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!_||!_.session||!_.user){const N=new sa;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:v})}catch(l){if(Be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(a){var l,h,x,g,b;try{if("email"in a){const{email:A,options:_}=a;let v=null,N=null;this.flowType==="pkce"&&([v,N]=await Ya(this.storage,this.storageKey));const{error:R}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:A,data:(l=_==null?void 0:_.data)!==null&&l!==void 0?l:{},create_user:(h=_==null?void 0:_.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:v,code_challenge_method:N},redirectTo:_==null?void 0:_.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:R})}if("phone"in a){const{phone:A,options:_}=a,{data:v,error:N}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:A,data:(x=_==null?void 0:_.data)!==null&&x!==void 0?x:{},create_user:(g=_==null?void 0:_.shouldCreateUser)!==null&&g!==void 0?g:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},channel:(b=_==null?void 0:_.channel)!==null&&b!==void 0?b:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:N})}throw new to("You must provide either an email or phone number.")}catch(A){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async verifyOtp(a){var l,h;try{let x,g;"options"in a&&(x=(l=a.options)===null||l===void 0?void 0:l.redirectTo,g=(h=a.options)===null||h===void 0?void 0:h.captchaToken);const{data:b,error:A}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:g}}),redirectTo:x,xform:ri});if(A)throw A;if(!b)throw new Error("An error occurred on token verification.");const _=b.session,v=b.user;return _!=null&&_.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:v,session:_},error:null})}catch(x){if(Be(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSSO(a){var l,h,x,g,b;try{let A=null,_=null;this.flowType==="pkce"&&([A,_]=await Ya(this.storage,this.storageKey));const v=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(h=(l=a.options)===null||l===void 0?void 0:l.redirectTo)!==null&&h!==void 0?h:void 0}),!((x=a==null?void 0:a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:A,code_challenge_method:_}),headers:this.headers,xform:Eb});return!((g=v.data)===null||g===void 0)&&g.url&&Qn()&&!(!((b=a.options)===null||b===void 0)&&b.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(A){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(A))return this._returnResult({data:null,error:A});throw A}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:l},error:h}=a;if(h)throw h;if(!l)throw new br;const{error:x}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:x})})}catch(a){if(Be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const l=`${this.url}/resend`;if("email"in a){const{email:h,type:x,options:g}=a,{error:b}=await Ge(this.fetch,"POST",l,{headers:this.headers,body:{email:h,type:x,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}else if("phone"in a){const{phone:h,type:x,options:g}=a,{data:b,error:A}=await Ge(this.fetch,"POST",l,{headers:this.headers,body:{phone:h,type:x,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:A})}throw new to("You must provide either an email or phone number and a type")}catch(l){if(Be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(a,l){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const h=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),x=(async()=>(await h,await l()))();return this.pendingInLock.push((async()=>{try{await x}catch{}})()),x}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const h=l();for(this.pendingInLock.push((async()=>{try{await h}catch{}})()),await h;this.pendingInLock.length;){const x=[...this.pendingInLock];await Promise.all(x),this.pendingInLock.splice(0,x.length)}return await h}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await a(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const l=await ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?a=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const h=a.expires_at?a.expires_at*1e3-Date.now()<df:!1;if(this._debug("#__loadSession()",`session has${h?"":" not"} expired`,"expires_at",a.expires_at),!h){if(this.userStorage){const b=await ia(this.userStorage,this.storageKey+"-user");b!=null&&b.user?a.user=b.user:a.user=mf()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const b={value:this.suppressGetSessionWarning};a.user=yb(a.user,b),b.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:x,error:g}=await this._callRefreshToken(a.refresh_token);return g?this._returnResult({data:{session:null},error:g}):this._returnResult({data:{session:x},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const l=await this._acquireLock(-1,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(a){try{return a?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Rs}):await this._useSession(async l=>{var h,x,g;const{data:b,error:A}=l;if(A)throw A;return!(!((h=b.session)===null||h===void 0)&&h.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new br}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(g=(x=b.session)===null||x===void 0?void 0:x.access_token)!==null&&g!==void 0?g:void 0,xform:Rs})})}catch(l){if(Be(l))return jm(l)&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(a,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,l))}async _updateUser(a,l={}){try{return await this._useSession(async h=>{const{data:x,error:g}=h;if(g)throw g;if(!x.session)throw new br;const b=x.session;let A=null,_=null;this.flowType==="pkce"&&a.email!=null&&([A,_]=await Ya(this.storage,this.storageKey));const{data:v,error:N}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l==null?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:A,code_challenge_method:_}),jwt:b.access_token,xform:Rs});if(N)throw N;return b.user=v.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),this._returnResult({data:{user:b.user},error:null})})}catch(h){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(h))return this._returnResult({data:{user:null},error:h});throw h}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new br;const l=Date.now()/1e3;let h=l,x=!0,g=null;const{payload:b}=gf(a.access_token);if(b.exp&&(h=b.exp,x=h<=l),x){const{data:A,error:_}=await this._callRefreshToken(a.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!A)return{data:{user:null,session:null},error:null};g=A}else{const{data:A,error:_}=await this._getUser(a.access_token);if(_)throw _;g={access_token:a.access_token,refresh_token:a.refresh_token,user:A.user,token_type:"bearer",expires_in:h-l,expires_at:h},await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)}return this._returnResult({data:{user:g.user,session:g},error:null})}catch(l){if(Be(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async l=>{var h;if(!a){const{data:b,error:A}=l;if(A)throw A;a=(h=b.session)!==null&&h!==void 0?h:void 0}if(!(a!=null&&a.refresh_token))throw new br;const{data:x,error:g}=await this._callRefreshToken(a.refresh_token);return g?this._returnResult({data:{user:null,session:null},error:g}):x?this._returnResult({data:{user:x.user,session:x},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(Be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(a,l){try{if(!Qn())throw new no("No browser detected.");if(a.error||a.error_description||a.error_code)throw new no(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new Gf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new no("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Gf("No code detected.");const{data:ue,error:W}=await this._exchangeCodeForSession(a.code);if(W)throw W;const xe=new URL(window.location.href);return xe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",xe.toString()),{data:{session:ue.session,redirectType:null},error:null}}const{provider_token:h,provider_refresh_token:x,access_token:g,refresh_token:b,expires_in:A,expires_at:_,token_type:v}=a;if(!g||!A||!b||!v)throw new no("No session defined in URL");const N=Math.round(Date.now()/1e3),R=parseInt(A);let k=N+R;_&&(k=parseInt(_));const j=k-N;j*1e3<=Qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${R}s`);const F=k-R;N-F>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",F,k,N):N-F<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",F,k,N);const{data:G,error:J}=await this._getUser(g);if(J)throw J;const ae={provider_token:h,provider_refresh_token:x,access_token:g,expires_in:R,expires_at:k,refresh_token:b,token_type:v,user:G.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ae,redirectType:a.type},error:null})}catch(h){if(Be(h))return this._returnResult({data:{session:null,redirectType:null},error:h});throw h}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){const l=await ia(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&l)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async l=>{var h;const{data:x,error:g}=l;if(g)return this._returnResult({error:g});const b=(h=x.session)===null||h===void 0?void 0:h.access_token;if(b){const{error:A}=await this.admin.signOut(b,a);if(A&&!(Lm(A)&&(A.status===404||A.status===401||A.status===403)))return this._returnResult({error:A})}return a!=="others"&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const l=ib(),h={id:l,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,h),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:h}}}async _emitInitialSession(a){return await this._useSession(async l=>{var h,x;try{const{data:{session:g},error:b}=l;if(b)throw b;await((h=this.stateChangeEmitters.get(a))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",g)),this._debug("INITIAL_SESSION","callback id",a,"session",g)}catch(g){await((x=this.stateChangeEmitters.get(a))===null||x===void 0?void 0:x.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",g),console.error(g)}})}async resetPasswordForEmail(a,l={}){let h=null,x=null;this.flowType==="pkce"&&([h,x]=await Ya(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:h,code_challenge_method:x,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(g){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(g))return this._returnResult({data:null,error:g});throw g}}async getUserIdentities(){var a;try{const{data:l,error:h}=await this.getUser();if(h)throw h;return this._returnResult({data:{identities:(a=l.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var l;try{const{data:h,error:x}=await this._useSession(async g=>{var b,A,_,v,N;const{data:R,error:k}=g;if(k)throw k;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(b=a.options)===null||b===void 0?void 0:b.redirectTo,scopes:(A=a.options)===null||A===void 0?void 0:A.scopes,queryParams:(_=a.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",j,{headers:this.headers,jwt:(N=(v=R.session)===null||v===void 0?void 0:v.access_token)!==null&&N!==void 0?N:void 0})});if(x)throw x;return Qn()&&!(!((l=a.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h==null?void 0:h.url),this._returnResult({data:{provider:a.provider,url:h==null?void 0:h.url},error:null})}catch(h){if(Be(h))return this._returnResult({data:{provider:a.provider,url:null},error:h});throw h}}async linkIdentityIdToken(a){return await this._useSession(async l=>{var h;try{const{error:x,data:{session:g}}=l;if(x)throw x;const{options:b,provider:A,token:_,access_token:v,nonce:N}=a,R=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(h=g==null?void 0:g.access_token)!==null&&h!==void 0?h:void 0,body:{provider:A,id_token:_,access_token:v,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:ri}),{data:k,error:j}=R;return j?this._returnResult({data:{user:null,session:null},error:j}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new sa}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:j}))}catch(x){if(await Zn(this.storage,`${this.storageKey}-code-verifier`),Be(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}})}async unlinkIdentity(a){try{return await this._useSession(async l=>{var h,x;const{data:g,error:b}=l;if(b)throw b;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(x=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&x!==void 0?x:void 0})})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(a){const l=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(l,"begin");try{const h=Date.now();return await ob(async x=>(x>0&&await lb(200*Math.pow(2,x-1)),this._debug(l,"refreshing attempt",x),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ri})),(x,g)=>{const b=200*Math.pow(2,x);return g&&Fu(g)&&Date.now()+b-h<Qa})}catch(h){if(this._debug(l,"error",h),Be(h))return this._returnResult({data:{session:null,user:null},error:h});throw h}finally{this._debug(l,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,l){const h=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",l,"url",h),Qn()&&!l.skipBrowserRedirect&&window.location.assign(h),{data:{provider:a,url:h},error:null}}async _recoverAndRefresh(){var a,l;const h="#_recoverAndRefresh()";this._debug(h,"begin");try{const x=await ia(this.storage,this.storageKey);if(x&&this.userStorage){let b=await ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:x.user},await Ja(this.userStorage,this.storageKey+"-user",b)),x.user=(a=b==null?void 0:b.user)!==null&&a!==void 0?a:mf()}else if(x&&!x.user&&!x.user){const b=await ia(this.storage,this.storageKey+"-user");b&&(b!=null&&b.user)?(x.user=b.user,await Zn(this.storage,this.storageKey+"-user"),await Ja(this.storage,this.storageKey,x)):x.user=mf()}if(this._debug(h,"session from storage",x),!this._isValidSession(x)){this._debug(h,"session is not valid"),x!==null&&await this._removeSession();return}const g=((l=x.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<df;if(this._debug(h,`session has${g?"":" not"} expired with margin of ${df}s`),g){if(this.autoRefreshToken&&x.refresh_token){const{error:b}=await this._callRefreshToken(x.refresh_token);b&&(console.error(b),Fu(b)||(this._debug(h,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(x.user&&x.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:A}=await this._getUser(x.access_token);!A&&(b!=null&&b.user)?(x.user=b.user,await this._saveSession(x),await this._notifyAllSubscribers("SIGNED_IN",x)):this._debug(h,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(h,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",x)}catch(x){this._debug(h,"error",x),console.error(x);return}finally{this._debug(h,"end")}}async _callRefreshToken(a){var l,h;if(!a)throw new br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const x=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(x,"begin");try{this.refreshingDeferred=new ic;const{data:g,error:b}=await this._refreshAccessToken(a);if(b)throw b;if(!g.session)throw new br;await this._saveSession(g.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",g.session);const A={data:g.session,error:null};return this.refreshingDeferred.resolve(A),A}catch(g){if(this._debug(x,"error",g),Be(g)){const b={data:null,error:g};return Fu(g)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(b),b}throw(h=this.refreshingDeferred)===null||h===void 0||h.reject(g),g}finally{this.refreshingDeferred=null,this._debug(x,"end")}}async _notifyAllSubscribers(a,l,h=!0){const x=`#_notifyAllSubscribers(${a})`;this._debug(x,"begin",l,`broadcast = ${h}`);try{this.broadcastChannel&&h&&this.broadcastChannel.postMessage({event:a,session:l});const g=[],b=Array.from(this.stateChangeEmitters.values()).map(async A=>{try{await A.callback(a,l)}catch(_){g.push(_)}});if(await Promise.all(b),g.length>0){for(let A=0;A<g.length;A+=1)console.error(g[A]);throw g[0]}}finally{this._debug(x,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await Zn(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},a),h=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!h&&l.user&&await Ja(this.userStorage,this.storageKey+"-user",{user:l.user});const x=Object.assign({},l);delete x.user;const g=Yg(x);await Ja(this.storage,this.storageKey,g)}else{const x=Yg(l);await Ja(this.storage,this.storageKey,x)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Zn(this.storage,this.storageKey),await Zn(this.storage,this.storageKey+"-code-verifier"),await Zn(this.storage,this.storageKey+"-user"),this.userStorage&&await Zn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Qa);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async l=>{const{data:{session:h}}=l;if(!h||!h.refresh_token||!h.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const x=Math.floor((h.expires_at*1e3-a)/Qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${x} ticks, a tick lasts ${Qa}ms, refresh threshold is ${qf} ticks`),x<=qf&&await this._callRefreshToken(h.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof n0)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const l=`#_onVisibilityChanged(${a})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,l,h){const x=[`provider=${encodeURIComponent(l)}`];if(h!=null&&h.redirectTo&&x.push(`redirect_to=${encodeURIComponent(h.redirectTo)}`),h!=null&&h.scopes&&x.push(`scopes=${encodeURIComponent(h.scopes)}`),this.flowType==="pkce"){const[g,b]=await Ya(this.storage,this.storageKey),A=new URLSearchParams({code_challenge:`${encodeURIComponent(g)}`,code_challenge_method:`${encodeURIComponent(b)}`});x.push(A.toString())}if(h!=null&&h.queryParams){const g=new URLSearchParams(h.queryParams);x.push(g.toString())}return h!=null&&h.skipBrowserRedirect&&x.push(`skip_http_redirect=${h.skipBrowserRedirect}`),`${a}?${x.join("&")}`}async _unenroll(a){try{return await this._useSession(async l=>{var h;const{data:x,error:g}=l;return g?this._returnResult({data:null,error:g}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(h=x==null?void 0:x.session)===null||h===void 0?void 0:h.access_token})})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(a){try{return await this._useSession(async l=>{var h,x;const{data:g,error:b}=l;if(b)return this._returnResult({data:null,error:b});const A=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:_,error:v}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:A,headers:this.headers,jwt:(h=g==null?void 0:g.session)===null||h===void 0?void 0:h.access_token});return v?this._returnResult({data:null,error:v}):(a.factorType==="totp"&&_.type==="totp"&&(!((x=_==null?void 0:_.totp)===null||x===void 0)&&x.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var h;const{data:x,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?jb(a.webauthn.credential_response):Ub(a.webauthn.credential_response)})}:{code:a.code}),{data:A,error:_}=await Ge(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:b,headers:this.headers,jwt:(h=x==null?void 0:x.session)===null||h===void 0?void 0:h.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+A.expires_in},A)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",A),this._returnResult({data:A,error:_}))})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var h;const{data:x,error:g}=l;if(g)return this._returnResult({data:null,error:g});const b=await Ge(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(h=x==null?void 0:x.session)===null||h===void 0?void 0:h.access_token});if(b.error)return b;const{data:A}=b;if(A.type!=="webauthn")return{data:A,error:null};switch(A.webauthn.type){case"create":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:kb(A.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:Lb(A.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(a){const{data:l,error:h}=await this._challenge({factorId:a.factorId});return h?this._returnResult({data:null,error:h}):await this._verify({factorId:a.factorId,challengeId:l.id,code:a.code})}async _listFactors(){var a;const{data:{user:l},error:h}=await this.getUser();if(h)return{data:null,error:h};const x={all:[],phone:[],totp:[],webauthn:[]};for(const g of(a=l==null?void 0:l.factors)!==null&&a!==void 0?a:[])x.all.push(g),g.status==="verified"&&x[g.factor_type].push(g);return{data:x,error:null}}async _getAuthenticatorAssuranceLevel(){var a,l;const{data:{session:h},error:x}=await this.getSession();if(x)return this._returnResult({data:null,error:x});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=gf(h.access_token);let b=null;g.aal&&(b=g.aal);let A=b;((l=(a=h.user.factors)===null||a===void 0?void 0:a.filter(N=>N.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(A="aal2");const v=g.amr||[];return{data:{currentLevel:b,nextLevel:A,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async l=>{const{data:{session:h},error:x}=l;return x?this._returnResult({data:null,error:x}):h?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:h.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new br})})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(a,l){try{return await this._useSession(async h=>{const{data:{session:x},error:g}=h;if(g)return this._returnResult({data:null,error:g});if(!x)return this._returnResult({data:null,error:new br});const b=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:x.access_token,body:{action:"approve"},xform:A=>({data:A,error:null})});return b.data&&b.data.redirect_url&&Qn()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(b.data.redirect_url),b})}catch(h){if(Be(h))return this._returnResult({data:null,error:h});throw h}}async _denyAuthorization(a,l){try{return await this._useSession(async h=>{const{data:{session:x},error:g}=h;if(g)return this._returnResult({data:null,error:g});if(!x)return this._returnResult({data:null,error:new br});const b=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:x.access_token,body:{action:"deny"},xform:A=>({data:A,error:null})});return b.data&&b.data.redirect_url&&Qn()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(b.data.redirect_url),b})}catch(h){if(Be(h))return this._returnResult({data:null,error:h});throw h}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:l},error:h}=a;return h?this._returnResult({data:null,error:h}):l?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:x=>({data:x,error:null})}):this._returnResult({data:null,error:new br})})}catch(a){if(Be(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async l=>{const{data:{session:h},error:x}=l;return x?this._returnResult({data:null,error:x}):h?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:h.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new br})})}catch(l){if(Be(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(a,l={keys:[]}){let h=l.keys.find(A=>A.kid===a);if(h)return h;const x=Date.now();if(h=this.jwks.keys.find(A=>A.kid===a),h&&this.jwks_cached_at+Zw>x)return h;const{data:g,error:b}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!g.keys||g.keys.length===0||(this.jwks=g,this.jwks_cached_at=x,h=g.keys.find(A=>A.kid===a),!h)?null:h}async getClaims(a,l={}){try{let h=a;if(!h){const{data:j,error:F}=await this.getSession();if(F||!j.session)return this._returnResult({data:null,error:F});h=j.session.access_token}const{header:x,payload:g,signature:b,raw:{header:A,payload:_}}=gf(h);l!=null&&l.allowExpired||mb(g.exp);const v=!x.alg||x.alg.startsWith("HS")||!x.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(x.kid,l!=null&&l.keys?{keys:l.keys}:l==null?void 0:l.jwks);if(!v){const{error:j}=await this.getUser(h);if(j)throw j;return{data:{claims:g,header:x,signature:b},error:null}}const N=xb(x.alg),R=await crypto.subtle.importKey("jwk",v,N,!0,["verify"]);if(!await crypto.subtle.verify(N,R,b,nb(`${A}.${_}`)))throw new Ku("Invalid JWT signature");return{data:{claims:g,header:x,signature:b},error:null}}catch(h){if(Be(h))return this._returnResult({data:null,error:h});throw h}}};r0.nextInstanceID={};const Yb=t0,Kb=r0,Wb=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Yb,AuthApiError:km,AuthClient:Kb,AuthError:rl,AuthImplicitGrantRedirectError:no,AuthInvalidCredentialsError:to,AuthInvalidJwtError:Ku,AuthInvalidTokenResponseError:sa,AuthPKCEGrantCodeExchangeError:Gf,AuthRetryableFetchError:Yu,AuthSessionMissingError:br,AuthUnknownError:Ns,AuthWeakPasswordError:Vf,CustomAuthError:Gi,GoTrueAdminApi:t0,GoTrueClient:r0,NavigatorLockAcquireTimeoutError:qm,SIGN_OUT_SCOPES:zu,isAuthApiError:Lm,isAuthError:Be,isAuthImplicitGrantRedirectError:Um,isAuthRetryableFetchError:Fu,isAuthSessionMissingError:jm,isAuthWeakPasswordError:Qw,lockInternals:la,navigatorLock:Hm,processLock:Sb},Symbol.toStringTag,{value:"Module"})),Xm=lo(Wb);var t2;function Zb(){if(t2)return $l;t2=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.SupabaseAuthClient=void 0;const d=Xm;let a=class extends d.AuthClient{constructor(h){super(h)}};return $l.SupabaseAuthClient=a,$l}var n2;function r2(){if(n2)return Ou;n2=1,Object.defineProperty(Ou,"__esModule",{value:!0});const d=sm,a=hm(),l=wm,h=zw,x=Hw(),g=Gw(),b=Vw(),A=Zb();class _{constructor(N,R,k){var j,F,G;this.supabaseUrl=N,this.supabaseKey=R;const J=(0,b.validateSupabaseUrl)(N);if(!R)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",J),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",J),this.storageUrl=new URL("storage/v1",J),this.functionsUrl=new URL("functions/v1",J);const ae=`sb-${J.hostname.split(".")[0]}-auth-token`,ue={db:x.DEFAULT_DB_OPTIONS,realtime:x.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},x.DEFAULT_AUTH_OPTIONS),{storageKey:ae}),global:x.DEFAULT_GLOBAL_OPTIONS},W=(0,b.applySettingDefaults)(k??{},ue);this.storageKey=(j=W.auth.storageKey)!==null&&j!==void 0?j:"",this.headers=(F=W.global.headers)!==null&&F!==void 0?F:{},W.accessToken?(this.accessToken=W.accessToken,this.auth=new Proxy({},{get:(xe,Le)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(Le)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((G=W.auth)!==null&&G!==void 0?G:{},this.headers,W.global.fetch),this.fetch=(0,g.fetchWithAuth)(R,this._getAccessToken.bind(this),W.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},W.realtime)),this.accessToken&&this.accessToken().then(xe=>this.realtime.setAuth(xe)).catch(xe=>console.warn("Failed to set initial Realtime auth token:",xe)),this.rest=new a.PostgrestClient(new URL("rest/v1",J).href,{headers:this.headers,schema:W.db.schema,fetch:this.fetch}),this.storage=new h.StorageClient(this.storageUrl.href,this.headers,this.fetch,k==null?void 0:k.storage),W.accessToken||this._listenForAuthEvents()}get functions(){return new d.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(N){return this.rest.from(N)}schema(N){return this.rest.schema(N)}rpc(N,R={},k={head:!1,get:!1,count:void 0}){return this.rest.rpc(N,R,k)}channel(N,R={config:{}}){return this.realtime.channel(N,R)}getChannels(){return this.realtime.getChannels()}removeChannel(N){return this.realtime.removeChannel(N)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var N,R;if(this.accessToken)return await this.accessToken();const{data:k}=await this.auth.getSession();return(R=(N=k.session)===null||N===void 0?void 0:N.access_token)!==null&&R!==void 0?R:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:N,persistSession:R,detectSessionInUrl:k,storage:j,userStorage:F,storageKey:G,flowType:J,lock:ae,debug:ue,throwOnError:W},xe,Le){const _e={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},_e),xe),storageKey:G,autoRefreshToken:N,persistSession:R,detectSessionInUrl:k,storage:j,userStorage:F,flowType:J,lock:ae,debug:ue,throwOnError:W,fetch:Le,hasCustomAuthorizationHeader:Object.keys(this.headers).some(ee=>ee.toLowerCase()==="authorization")})}_initRealtimeClient(N){return new l.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},N),{params:Object.assign({apikey:this.supabaseKey},N==null?void 0:N.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((R,k)=>{this._handleTokenChanged(R,"CLIENT",k==null?void 0:k.access_token)})}_handleTokenChanged(N,R,k){(N==="TOKEN_REFRESHED"||N==="SIGNED_IN")&&this.changedAccessToken!==k?(this.changedAccessToken=k,this.realtime.setAuth(k)):N==="SIGNED_OUT"&&(this.realtime.setAuth(),R=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Ou.default=_,Ou}var i2;function Qb(){return i2||(i2=1,(function(d){var a=zi&&zi.__createBinding||(Object.create?(function(N,R,k,j){j===void 0&&(j=k);var F=Object.getOwnPropertyDescriptor(R,k);(!F||("get"in F?!R.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return R[k]}}),Object.defineProperty(N,j,F)}):(function(N,R,k,j){j===void 0&&(j=k),N[j]=R[k]})),l=zi&&zi.__exportStar||function(N,R){for(var k in N)k!=="default"&&!Object.prototype.hasOwnProperty.call(R,k)&&a(R,N,k)},h=zi&&zi.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(d,"__esModule",{value:!0}),d.createClient=d.SupabaseClient=d.FunctionRegion=d.FunctionsError=d.FunctionsRelayError=d.FunctionsFetchError=d.FunctionsHttpError=d.PostgrestError=void 0;const x=h(r2());l(Xm,d);var g=hm();Object.defineProperty(d,"PostgrestError",{enumerable:!0,get:function(){return g.PostgrestError}});var b=sm;Object.defineProperty(d,"FunctionsHttpError",{enumerable:!0,get:function(){return b.FunctionsHttpError}}),Object.defineProperty(d,"FunctionsFetchError",{enumerable:!0,get:function(){return b.FunctionsFetchError}}),Object.defineProperty(d,"FunctionsRelayError",{enumerable:!0,get:function(){return b.FunctionsRelayError}}),Object.defineProperty(d,"FunctionsError",{enumerable:!0,get:function(){return b.FunctionsError}}),Object.defineProperty(d,"FunctionRegion",{enumerable:!0,get:function(){return b.FunctionRegion}}),l(wm,d);var A=r2();Object.defineProperty(d,"SupabaseClient",{enumerable:!0,get:function(){return h(A).default}});const _=(N,R,k)=>new x.default(N,R,k);d.createClient=_;function v(){if(typeof window<"u"||typeof process>"u")return!1;const N=process.version;if(N==null)return!1;const R=N.match(/^v(\d+)\./);return R?parseInt(R[1],10)<=18:!1}v()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(zi)),zi}var Ym=Qb();const Km=ao(Ym),Jb=I2({__proto__:null,default:Km},[Ym]),{PostgrestError:v3,FunctionsHttpError:E3,FunctionsFetchError:_3,FunctionsRelayError:A3,FunctionsError:C3,FunctionRegion:S3,SupabaseClient:T3,createClient:$b,GoTrueAdminApi:O3,GoTrueClient:N3,AuthAdminApi:R3,AuthClient:I3,navigatorLock:D3,NavigatorLockAcquireTimeoutError:M3,lockInternals:B3,processLock:k3,SIGN_OUT_SCOPES:L3,AuthError:j3,AuthApiError:U3,AuthUnknownError:P3,CustomAuthError:F3,AuthSessionMissingError:z3,AuthInvalidTokenResponseError:q3,AuthInvalidCredentialsError:H3,AuthImplicitGrantRedirectError:G3,AuthPKCEGrantCodeExchangeError:V3,AuthRetryableFetchError:X3,AuthWeakPasswordError:Y3,AuthInvalidJwtError:K3,isAuthError:W3,isAuthApiError:Z3,isAuthSessionMissingError:Q3,isAuthImplicitGrantRedirectError:J3,isAuthRetryableFetchError:$3,isAuthWeakPasswordError:eE,RealtimePresence:tE,RealtimeChannel:nE,RealtimeClient:rE,REALTIME_LISTEN_TYPES:iE,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:sE,REALTIME_PRESENCE_LISTEN_EVENTS:aE,REALTIME_SUBSCRIBE_STATES:lE,REALTIME_CHANNEL_STATES:oE}=Km||Jb,Wm="stock_products",i0="stock_movements",s0="stock_orders",Zm="qq_sb_url",Qm="qq_sb_key",Jm="https://fnhapvoxgqkzokravccd.supabase.co",$m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZuaGFwdm94Z3Frem9rcmF2Y2NkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMjU5ODksImV4cCI6MjA4MDgwMTk4OX0.xmZ4F4Zwc4azBr5niczcD9ct37CnTsPb1IFCTKhZ-Bw";let wn=null;const Yf=()=>{const d=Jm,a=$m;try{return wn=$b(d,a),!0}catch(l){return console.error("Failed to init supabase",l),!1}return!1},ev=()=>({url:Jm,key:$m}),tv=d=>{localStorage.setItem(Zm,d.url),localStorage.setItem(Qm,d.key),Yf()},nv=()=>{localStorage.removeItem(Zm),localStorage.removeItem(Qm),wn=null},ex=async()=>{if(wn){const{data:a,error:l}=await wn.from("products").select("*").order("name");if(!l&&a)return a.map(h=>({...h,id:Array.isArray(h.id)?h.id[0]:h.id}))}const d=localStorage.getItem(Wm);return d?JSON.parse(d):[]},xf=async(d,a)=>{if(wn)if(a){let{error:l}=await wn.from("products").insert([d]);if(l&&l.message&&l.message.includes("malformed array literal")){const h={...d,id:[d.id]},x=await wn.from("products").insert([h]);if(x.error)throw new Error(x.error.message)}else if(l)throw new Error(l.message)}else{const{error:l}=await wn.from("products").update({qty:d.qty}).eq("id",d.id);if(l)throw new Error(l.message)}else{const l=await ex();let h=[...l];if(a){if(l.find(x=>x.id===d.id))throw new Error("Produto j existe!");h.unshift(d)}else h=l.map(x=>x.id===d.id?d:x);localStorage.setItem(Wm,JSON.stringify(h))}},tx=async()=>{if(wn){const{data:a,error:l}=await wn.from("movements").select("*").order("created_at",{ascending:!1}).limit(200);if(!l&&a)return a.map(h=>{let x=h.matricula,g=h.obs;const b=h.prod_id,A=Array.isArray(b)?b[0]||"":b;if(!x&&g&&typeof g=="string"&&g.startsWith("[Mat:")){const _=g.match(/^\[Mat: (.+?)\]\s*(.*)$/);_&&(x=_[1],g=_[2])}return{id:h.id,date:h.created_at,prodId:A,prodName:h.prod_name,qty:h.qty,obs:g,matricula:x}})}const d=localStorage.getItem(i0);return d?JSON.parse(d):[]},s2=async d=>{if(wn){const a=d.matricula?`[Mat: ${d.matricula}] ${d.obs||""}`.trim():d.obs,l={prod_id:d.prodId,prod_name:d.prodName,qty:d.qty,obs:a,created_at:d.date};let{error:h}=await wn.from("movements").insert([l]);if(h&&h.message&&h.message.includes("malformed array literal")){console.warn("Retrying insert with array prod_id due to schema mismatch.");const x={...l,prod_id:[d.prodId]},g=await wn.from("movements").insert([x]);if(g.error)throw new Error(g.error.message)}else if(h)throw new Error(h.message)}else{const a=await tx();a.unshift(d),localStorage.setItem(i0,JSON.stringify(a))}},rv=()=>{localStorage.removeItem(i0)},iv=async()=>{if(wn){const{error:d}=await wn.from("movements").delete().lte("created_at","3000-01-01");if(d)throw console.error("Supabase Delete Error:",d),new Error(d.message)}rv()},a0=async()=>{if(wn){const{data:a,error:l}=await wn.from("orders").select("*").order("date",{ascending:!1});if(!l&&a)return a.map(h=>({id:h.id,orderNumber:h.order_number,customerName:h.customer_name,matricula:h.matricula,date:h.date,status:h.status,items:h.items||[],obs:h.obs}))}const d=localStorage.getItem(s0);return d?JSON.parse(d):[]},pf=async(d,a)=>{if(wn){const l={order_number:d.orderNumber,customer_name:d.customerName,matricula:d.matricula,date:d.date,status:d.status,items:d.items,obs:d.obs};if(a){const{error:h}=await wn.from("orders").insert([{...l,id:d.id}]);if(h)throw new Error(h.message)}else{const{error:h}=await wn.from("orders").update(l).eq("id",d.id);if(h)throw new Error(h.message)}}else{const l=await a0();let h=[...l];a?h.unshift(d):h=l.map(x=>x.id===d.id?d:x),localStorage.setItem(s0,JSON.stringify(h))}},sv=async d=>{if(wn){const{error:a}=await wn.from("orders").delete().eq("id",d);if(a)throw new Error(a.message)}else{const l=(await a0()).filter(h=>h.id!==d);localStorage.setItem(s0,JSON.stringify(l))}},nx=(d,a)=>{const l=new Blob(["\uFEFF"+d],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");if(h.download!==void 0){const x=URL.createObjectURL(l);h.setAttribute("href",x),h.setAttribute("download",a),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)}},av=d=>{const a=`Codigo;Produto;Qtd
`,l=d.map(h=>`${h.id};${h.name};${h.qty}`).join(`
`);nx(a+l,`estoque_${new Date().toISOString().slice(0,10)}.csv`)},lv=d=>{const a=`Data;Produto;Qtd;Obs
`,l=d.map(h=>`${new Date(h.date).toLocaleDateString()};${h.prodName};${h.qty};${h.obs||""}`).join(`
`);nx(a+l,`historico_${new Date().toISOString().slice(0,10)}.csv`)};var Se;(function(d){d[d.QR_CODE=0]="QR_CODE",d[d.AZTEC=1]="AZTEC",d[d.CODABAR=2]="CODABAR",d[d.CODE_39=3]="CODE_39",d[d.CODE_93=4]="CODE_93",d[d.CODE_128=5]="CODE_128",d[d.DATA_MATRIX=6]="DATA_MATRIX",d[d.MAXICODE=7]="MAXICODE",d[d.ITF=8]="ITF",d[d.EAN_13=9]="EAN_13",d[d.EAN_8=10]="EAN_8",d[d.PDF_417=11]="PDF_417",d[d.RSS_14=12]="RSS_14",d[d.RSS_EXPANDED=13]="RSS_EXPANDED",d[d.UPC_A=14]="UPC_A",d[d.UPC_E=15]="UPC_E",d[d.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Se||(Se={}));var a2=new Map([[Se.QR_CODE,"QR_CODE"],[Se.AZTEC,"AZTEC"],[Se.CODABAR,"CODABAR"],[Se.CODE_39,"CODE_39"],[Se.CODE_93,"CODE_93"],[Se.CODE_128,"CODE_128"],[Se.DATA_MATRIX,"DATA_MATRIX"],[Se.MAXICODE,"MAXICODE"],[Se.ITF,"ITF"],[Se.EAN_13,"EAN_13"],[Se.EAN_8,"EAN_8"],[Se.PDF_417,"PDF_417"],[Se.RSS_14,"RSS_14"],[Se.RSS_EXPANDED,"RSS_EXPANDED"],[Se.UPC_A,"UPC_A"],[Se.UPC_E,"UPC_E"],[Se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),l2;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.URL=1]="URL"})(l2||(l2={}));function ov(d){return Object.values(Se).includes(d)}var Ju;(function(d){d[d.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",d[d.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ju||(Ju={}));var uv=(function(){function d(){}return d.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",d.SCAN_DEFAULT_FPS=2,d.DEFAULT_DISABLE_FLIP=!1,d.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,d.DEFAULT_SUPPORTED_SCAN_TYPE=[Ju.SCAN_TYPE_CAMERA,Ju.SCAN_TYPE_FILE],d})(),rx=(function(){function d(a,l){this.format=a,this.formatName=l}return d.prototype.toString=function(){return this.formatName},d.create=function(a){if(!a2.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new d(a,a2.get(a))},d})(),o2=(function(){function d(){}return d.createFromText=function(a){var l={text:a};return{decodedText:a,result:l}},d.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},d})(),Kf;(function(d){d[d.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",d[d.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",d[d.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Kf||(Kf={}));var cv=(function(){function d(){}return d.createFrom=function(a){return{errorMessage:a,type:Kf.UNKWOWN_ERROR}},d})(),hv=(function(){function d(a){this.verbose=a}return d.prototype.log=function(a){this.verbose&&console.log(a)},d.prototype.warn=function(a){this.verbose&&console.warn(a)},d.prototype.logError=function(a,l){(this.verbose||l===!0)&&console.error(a)},d.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},d})();function Hi(d){return typeof d>"u"||d===null}var $a=(function(){function d(){}return d.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},d.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},d.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},d.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},d.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},d.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},d.scannerPaused=function(){return"Scanner paused"},d})(),ix=(function(){function d(){}return d.isMediaStreamConstraintsValid=function(a,l){if(typeof a!="object"){var h=typeof a;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var x=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(x),b=Object.keys(a),A=0,_=b;A<_.length;A++){var v=_[A];if(g.has(v))return l.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},d})(),ro={exports:{}},fv=ro.exports,u2;function dv(){return u2||(u2=1,(function(d,a){(function(l,h){h(a)})(fv,(function(l){function h(T){return T==null}var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var r in t)t.hasOwnProperty(r)&&(T[r]=t[r])};function g(T,t){x(T,t);function r(){this.constructor=T}T.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function b(T,t){var r=Object.setPrototypeOf;r?r(T,t):T.__proto__=t}function A(T,t){t===void 0&&(t=T.constructor);var r=Error.captureStackTrace;r&&r(T,t)}var _=(function(T){g(t,T);function t(r){var i=this.constructor,o=T.call(this,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),b(o,i.prototype),A(o),o}return t})(Error);class v extends _{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class N extends v{}N.kind="ArgumentException";class R extends v{}R.kind="IllegalArgumentException";class k{constructor(t){if(this.binarizer=t,t===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,i,o){const u=this.binarizer.getLuminanceSource().crop(t,r,i,o);return new k(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends v{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class F{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(t,r,i,o,u){for(;u--;)i[o++]=t[r++]}static currentTimeMillis(){return Date.now()}}class J extends v{}J.kind="IndexOutOfBoundsException";class ae extends J{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}ae.kind="ArrayIndexOutOfBoundsException";class ue{static fill(t,r){for(let i=0,o=t.length;i<o;i++)t[i]=r}static fillWithin(t,r,i,o){ue.rangeCheck(t.length,r,i);for(let u=r;u<i;u++)t[u]=o}static rangeCheck(t,r,i){if(r>i)throw new R("fromIndex("+r+") > toIndex("+i+")");if(r<0)throw new ae(r);if(i>t)throw new ae(i)}static asList(...t){return t}static create(t,r,i){return Array.from({length:t}).map(u=>Array.from({length:r}).fill(i))}static createInt32Array(t,r,i){return Array.from({length:t}).map(u=>Int32Array.from({length:r}).fill(i))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let i=0,o=t.length;i<o;i++)if(t[i]!==r[i])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const i of t)r=31*r+i;return r}static fillUint8Array(t,r){for(let i=0;i!==t.length;i++)t[i]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const i=new Uint8Array(r);return i.set(t),i}return t.slice(0,r)}static copyOfRange(t,r,i){const o=i-r,u=new Int32Array(o);return G.arraycopy(t,r,u,0,o),u}static binarySearch(t,r,i){i===void 0&&(i=ue.numberComparator);let o=0,u=t.length-1;for(;o<=u;){const f=u+o>>1,m=i(r,t[f]);if(m>0)o=f+1;else if(m<0)u=f-1;else return f}return-o-1}static numberComparator(t,r){return t-r}}class W{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let i=31;return r=t<<16,r!==0&&(i-=16,t=r),r=t<<8,r!==0&&(i-=8,t=r),r=t<<4,r!==0&&(i-=4,t=r),r=t<<2,r!==0&&(i-=2,t=r),i-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class xe{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=xe.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=xe.makeArray(t);G.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const i=this.bits;let o=Math.floor(t/32),u=i[o];u&=~((1<<(t&31))-1);const f=i.length;for(;u===0;){if(++o===f)return r;u=i[o]}const m=o*32+W.numberOfTrailingZeros(u);return m>r?r:m}getNextUnset(t){const r=this.size;if(t>=r)return r;const i=this.bits;let o=Math.floor(t/32),u=~i[o];u&=~((1<<(t&31))-1);const f=i.length;for(;u===0;){if(++o===f)return r;u=~i[o]}const m=o*32+W.numberOfTrailingZeros(u);return m>r?r:m}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new R;if(r===t)return;r--;const i=Math.floor(t/32),o=Math.floor(r/32),u=this.bits;for(let f=i;f<=o;f++){const m=f>i?0:t&31,E=(2<<(f<o?31:r&31))-(1<<m);u[f]|=E}}clear(){const t=this.bits.length,r=this.bits;for(let i=0;i<t;i++)r[i]=0}isRange(t,r,i){if(r<t||t<0||r>this.size)throw new R;if(r===t)return!0;r--;const o=Math.floor(t/32),u=Math.floor(r/32),f=this.bits;for(let m=o;m<=u;m++){const y=m>o?0:t&31,C=(2<<(m<u?31:r&31))-(1<<y)&4294967295;if((f[m]&C)!==(i?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let i=r;i>0;i--)this.appendBit((t>>i-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let i=0;i<r;i++)this.appendBit(t.get(i))}xor(t){if(this.size!==t.size)throw new R("Sizes don't match");const r=this.bits;for(let i=0,o=r.length;i<o;i++)r[i]^=t.bits[i]}toBytes(t,r,i,o){for(let u=0;u<o;u++){let f=0;for(let m=0;m<8;m++)this.get(t)&&(f|=1<<7-m),t++;r[i+u]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),i=r+1,o=this.bits;for(let u=0;u<i;u++){let f=o[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[r-u]=f}if(this.size!==i*32){const u=i*32-this.size;let f=t[0]>>>u;for(let m=1;m<i;m++){const y=t[m];f|=y<<32-u,t[m-1]=f,f=y>>>u}t[i-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof xe))return!1;const r=t;return this.size===r.size&&ue.equals(this.bits,r.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let t="";for(let r=0,i=this.size;r<i;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new xe(this.size,this.bits.slice())}}var Le;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Le||(Le={}));var _e=Le;class ee extends v{static getFormatInstance(){return new ee}}ee.kind="FormatException";var Me;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Me||(Me={}));class de{constructor(t,r,i,...o){this.valueIdentifier=t,this.name=i,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,de.VALUE_IDENTIFIER_TO_ECI.set(t,this),de.NAME_TO_ECI.set(i,this);const u=this.values;for(let f=0,m=u.length;f!==m;f++){const y=u[f];de.VALUES_TO_ECI.set(y,this)}for(const f of o)de.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new ee("incorect value");const r=de.VALUES_TO_ECI.get(t);if(r===void 0)throw new ee("incorect value");return r}static getCharacterSetECIByName(t){const r=de.NAME_TO_ECI.get(t);if(r===void 0)throw new ee("incorect value");return r}equals(t){if(!(t instanceof de))return!1;const r=t;return this.getName()===r.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(Me.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(Me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(Me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(Me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(Me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(Me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(Me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(Me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(Me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(Me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(Me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(Me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(Me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(Me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(Me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(Me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(Me.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(Me.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(Me.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(Me.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(Me.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(Me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(Me.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(Me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(Me.Big5,28,"Big5"),de.GB18030=new de(Me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(Me.EUC_KR,30,"EUC_KR","EUC-KR");class Hn extends v{}Hn.kind="UnsupportedOperationException";class At{static decode(t,r){const i=this.encodingName(r);return this.customDecoder?this.customDecoder(t,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(t,i):new TextDecoder(i).decode(t)}static shouldDecodeOnFallback(t){return!At.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const i=this.encodingName(r);return this.customEncoder?this.customEncoder(t,i):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof de?t:de.getCharacterSetECIByName(t)}static decodeFallback(t,r){const i=this.encodingCharacterSet(r);if(At.isDecodeFallbackSupported(i)){let o="";for(let u=0,f=t.length;u<f;u++){let m=t[u].toString(16);m.length<2&&(m="0"+m),o+="%"+m}return decodeURIComponent(o)}if(i.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Hn(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(de.UTF8)||t.equals(de.ISO8859_1)||t.equals(de.ASCII)}static encodeFallback(t){const i=btoa(unescape(encodeURIComponent(t))).split(""),o=[];for(let u=0;u<i.length;u++)o.push(i[u].charCodeAt(0));return new Uint8Array(o)}}class Oe{static castAsNonUtf8Char(t,r=null){const i=r?r.getName():this.ISO88591;return At.decode(new Uint8Array([t]),i)}static guessEncoding(t,r){if(r!=null&&r.get(_e.CHARACTER_SET)!==void 0)return r.get(_e.CHARACTER_SET).toString();const i=t.length;let o=!0,u=!0,f=!0,m=0,y=0,E=0,C=0,O=0,I=0,L=0,P=0,z=0,X=0,ne=0;const be=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let ye=0;ye<i&&(o||u||f);ye++){const me=t[ye]&255;f&&(m>0?(me&128)===0?f=!1:m--:(me&128)!==0&&((me&64)===0?f=!1:(m++,(me&32)===0?y++:(m++,(me&16)===0?E++:(m++,(me&8)===0?C++:f=!1))))),o&&(me>127&&me<160?o=!1:me>159&&(me<192||me===215||me===247)&&ne++),u&&(O>0?me<64||me===127||me>252?u=!1:O--:me===128||me===160||me>239?u=!1:me>160&&me<224?(I++,P=0,L++,L>z&&(z=L)):me>127?(O++,L=0,P++,P>X&&(X=P)):(L=0,P=0))}return f&&m>0&&(f=!1),u&&O>0&&(u=!1),f&&(be||y+E+C>0)?Oe.UTF8:u&&(Oe.ASSUME_SHIFT_JIS||z>=3||X>=3)?Oe.SHIFT_JIS:o&&u?z===2&&I===2||ne*10>=i?Oe.SHIFT_JIS:Oe.ISO88591:o?Oe.ISO88591:u?Oe.SHIFT_JIS:f?Oe.UTF8:Oe.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let i=-1;function o(f,m,y,E,C,O){if(f==="%%")return"%";if(r[++i]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,L;switch(O){case"s":L=r[i];break;case"c":L=r[i][0];break;case"f":L=parseFloat(r[i]).toFixed(f);break;case"p":L=parseFloat(r[i]).toPrecision(f);break;case"e":L=parseFloat(r[i]).toExponential(f);break;case"x":L=parseInt(r[i]).toString(I||16);break;case"d":L=parseFloat(parseInt(r[i],I||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(I);let P=parseInt(y),z=y&&y[0]+""=="0"?"0":" ";for(;L.length<P;)L=m!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,o)}static getBytes(t,r){return At.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}Oe.SHIFT_JIS=de.SJIS.getName(),Oe.GB2312="GB2312",Oe.ISO88591=de.ISO8859_1.getName(),Oe.EUC_JP="EUC_JP",Oe.UTF8=de.UTF8.getName(),Oe.PLATFORM_DEFAULT_ENCODING=Oe.UTF8,Oe.ASSUME_SHIFT_JIS=!1;class We{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Oe.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,i){for(let o=r;r<r+i;o++)this.append(t[o]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class bt{constructor(t,r,i,o){if(this.width=t,this.height=r,this.rowSize=i,this.bits=o,r==null&&(r=t),this.height=r,t<1||r<1)throw new R("Both dimensions must be greater than 0");i==null&&(i=Math.floor((t+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,i=t[0].length,o=new bt(i,r);for(let u=0;u<r;u++){const f=t[u];for(let m=0;m<i;m++)f[m]&&o.set(m,u)}return o}static parseFromString(t,r,i){if(t===null)throw new R("stringRepresentation cannot be null");const o=new Array(t.length);let u=0,f=0,m=-1,y=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(u>f){if(m===-1)m=u-f;else if(u-f!==m)throw new R("row lengths do not match");f=u,y++}E++}else if(t.substring(E,E+r.length)===r)E+=r.length,o[u]=!0,u++;else if(t.substring(E,E+i.length)===i)E+=i.length,o[u]=!1,u++;else throw new R("illegal character encountered: "+t.substring(E));if(u>f){if(m===-1)m=u-f;else if(u-f!==m)throw new R("row lengths do not match");y++}const C=new bt(m,y);for(let O=0;O<u;O++)o[O]&&C.set(Math.floor(O%m),Math.floor(O/m));return C}get(t,r){const i=r*this.rowSize+Math.floor(t/32);return(this.bits[i]>>>(t&31)&1)!==0}set(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]|=1<<(t&31)&4294967295}unset(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]&=~(1<<(t&31)&4294967295)}flip(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new R("input matrix dimensions do not match");const r=new xe(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let u=0,f=this.height;u<f;u++){const m=u*i,y=t.getRow(u,r).getBitArray();for(let E=0;E<i;E++)o[m+E]^=y[E]}}clear(){const t=this.bits,r=t.length;for(let i=0;i<r;i++)t[i]=0}setRegion(t,r,i,o){if(r<0||t<0)throw new R("Left and top must be nonnegative");if(o<1||i<1)throw new R("Height and width must be at least 1");const u=t+i,f=r+o;if(f>this.height||u>this.width)throw new R("The region must fit inside the matrix");const m=this.rowSize,y=this.bits;for(let E=r;E<f;E++){const C=E*m;for(let O=t;O<u;O++)y[C+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new xe(this.width):r.clear();const i=this.rowSize,o=this.bits,u=t*i;for(let f=0;f<i;f++)r.setBulk(f*32,o[u+f]);return r}setRow(t,r){G.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let i=new xe(t),o=new xe(t);for(let u=0,f=Math.floor((r+1)/2);u<f;u++)i=this.getRow(u,i),o=this.getRow(r-1-u,o),i.reverse(),o.reverse(),this.setRow(u,o),this.setRow(r-1-u,i)}getEnclosingRectangle(){const t=this.width,r=this.height,i=this.rowSize,o=this.bits;let u=t,f=r,m=-1,y=-1;for(let E=0;E<r;E++)for(let C=0;C<i;C++){const O=o[E*i+C];if(O!==0){if(E<f&&(f=E),E>y&&(y=E),C*32<u){let I=0;for(;(O<<31-I&4294967295)===0;)I++;C*32+I<u&&(u=C*32+I)}if(C*32+31>m){let I=31;for(;!(O>>>I);)I--;C*32+I>m&&(m=C*32+I)}}}return m<u||y<f?null:Int32Array.from([u,f,m-u+1,y-f+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let i=0;for(;i<r.length&&r[i]===0;)i++;if(i===r.length)return null;const o=i/t;let u=i%t*32;const f=r[i];let m=0;for(;(f<<31-m&4294967295)===0;)m++;return u+=m,Int32Array.from([u,o])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let i=r.length-1;for(;i>=0&&r[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/t);let u=Math.floor(i%t)*32;const f=r[i];let m=31;for(;!(f>>>m);)m--;return u+=m,Int32Array.from([u,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof bt))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ue.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+ue.hashCode(this.bits),t}toString(t="X ",r="  ",i=`
`){return this.buildToString(t,r,i)}buildToString(t,r,i){let o=new We;for(let u=0,f=this.height;u<f;u++){for(let m=0,y=this.width;m<y;m++)o.append(this.get(m,u)?t:r);o.append(i)}return o.toString()}clone(){return new bt(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends v{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class te extends F{constructor(t){super(t),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(t,r){const i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new xe(o):r.clear(),this.initArrays(o);const u=i.getRow(t,this.luminances),f=this.buckets;for(let y=0;y<o;y++)f[(u[y]&255)>>te.LUMINANCE_SHIFT]++;const m=te.estimateBlackPoint(f);if(o<3)for(let y=0;y<o;y++)(u[y]&255)<m&&r.set(y);else{let y=u[0]&255,E=u[1]&255;for(let C=1;C<o-1;C++){const O=u[C+1]&255;(E*4-y-O)/2<m&&r.set(C),y=E,E=O}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new bt(r,i);this.initArrays(r);const u=this.buckets;for(let y=1;y<5;y++){const E=Math.floor(i*y/5),C=t.getRow(E,this.luminances),O=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<O;I++){const L=C[I]&255;u[L>>te.LUMINANCE_SHIFT]++}}const f=te.estimateBlackPoint(u),m=t.getMatrix();for(let y=0;y<i;y++){const E=y*r;for(let C=0;C<r;C++)(m[E+C]&255)<f&&o.set(C,y)}return o}createBinarizer(t){return new te(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let i=0;i<te.LUMINANCE_BUCKETS;i++)r[i]=0}static estimateBlackPoint(t){const r=t.length;let i=0,o=0,u=0;for(let C=0;C<r;C++)t[C]>u&&(o=C,u=t[C]),t[C]>i&&(i=t[C]);let f=0,m=0;for(let C=0;C<r;C++){const O=C-o,I=t[C]*O*O;I>m&&(f=C,m=I)}if(o>f){const C=o;o=f,f=C}if(f-o<=r/16)throw new re;let y=f-1,E=-1;for(let C=f-1;C>o;C--){const O=C-o,I=O*O*(f-C)*(i-t[C]);I>E&&(y=C,E=I)}return y<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class ce extends te{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=ce.MINIMUM_DIMENSION&&i>=ce.MINIMUM_DIMENSION){const o=t.getMatrix();let u=r>>ce.BLOCK_SIZE_POWER;(r&ce.BLOCK_SIZE_MASK)!==0&&u++;let f=i>>ce.BLOCK_SIZE_POWER;(i&ce.BLOCK_SIZE_MASK)!==0&&f++;const m=ce.calculateBlackPoints(o,u,f,r,i),y=new bt(r,i);ce.calculateThresholdForBlock(o,u,f,r,i,m,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ce(t)}static calculateThresholdForBlock(t,r,i,o,u,f,m){const y=u-ce.BLOCK_SIZE,E=o-ce.BLOCK_SIZE;for(let C=0;C<i;C++){let O=C<<ce.BLOCK_SIZE_POWER;O>y&&(O=y);const I=ce.cap(C,2,i-3);for(let L=0;L<r;L++){let P=L<<ce.BLOCK_SIZE_POWER;P>E&&(P=E);const z=ce.cap(L,2,r-3);let X=0;for(let be=-2;be<=2;be++){const ye=f[I+be];X+=ye[z-2]+ye[z-1]+ye[z]+ye[z+1]+ye[z+2]}const ne=X/25;ce.thresholdBlock(t,P,O,ne,o,m)}}}static cap(t,r,i){return t<r?r:t>i?i:t}static thresholdBlock(t,r,i,o,u,f){for(let m=0,y=i*u+r;m<ce.BLOCK_SIZE;m++,y+=u)for(let E=0;E<ce.BLOCK_SIZE;E++)(t[y+E]&255)<=o&&f.set(r+E,i+m)}static calculateBlackPoints(t,r,i,o,u){const f=u-ce.BLOCK_SIZE,m=o-ce.BLOCK_SIZE,y=new Array(i);for(let E=0;E<i;E++){y[E]=new Int32Array(r);let C=E<<ce.BLOCK_SIZE_POWER;C>f&&(C=f);for(let O=0;O<r;O++){let I=O<<ce.BLOCK_SIZE_POWER;I>m&&(I=m);let L=0,P=255,z=0;for(let ne=0,be=C*o+I;ne<ce.BLOCK_SIZE;ne++,be+=o){for(let ye=0;ye<ce.BLOCK_SIZE;ye++){const me=t[be+ye]&255;L+=me,me<P&&(P=me),me>z&&(z=me)}if(z-P>ce.MIN_DYNAMIC_RANGE)for(ne++,be+=o;ne<ce.BLOCK_SIZE;ne++,be+=o)for(let ye=0;ye<ce.BLOCK_SIZE;ye++)L+=t[be+ye]&255}let X=L>>ce.BLOCK_SIZE_POWER*2;if(z-P<=ce.MIN_DYNAMIC_RANGE&&(X=P/2,E>0&&O>0)){const ne=(y[E-1][O]+2*y[E][O-1]+y[E-1][O-1])/4;P<ne&&(X=ne)}y[E][O]=X}}return y}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class Ue{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,i,o){throw new Hn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Hn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Hn("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new We;for(let i=0;i<this.height;i++){const o=this.getRow(i,t);for(let u=0;u<this.width;u++){const f=o[u]&255;let m;f<64?m="#":f<128?m="+":f<192?m=".":m=" ",r.append(m)}r.append(`
`)}return r.toString()}}class et extends Ue{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const i=this.delegate.getRow(t,r),o=this.getWidth();for(let u=0;u<o;u++)i[u]=255-(i[u]&255);return i}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r);for(let o=0;o<r;o++)i[o]=255-(t[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,i,o){return new et(this.delegate.crop(t,r,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new et(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new et(this.delegate.rotateCounterClockwise45())}}class ot extends Ue{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ot.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ot.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,i){const o=new Uint8ClampedArray(r*i);for(let u=0,f=0,m=t.length;u<m;u+=4,f++){let y;if(t[u+3]===0)y=255;else{const C=t[u],O=t[u+1],I=t[u+2];y=306*C+601*O+117*I+512>>10}o[f]=y}return o}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,i,o){return super.crop(t,r,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*ot.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(o))*u+Math.abs(Math.sin(o))*f),y=Math.ceil(Math.abs(Math.sin(o))*u+Math.abs(Math.cos(o))*f);return r.width=m,r.height=y,i.translate(m/2,y/2),i.rotate(o),i.drawImage(this.canvas,u/-2,f/-2),this.buffer=ot.makeBufferFromCanvasImageData(r),this}invert(){return new et(this)}}ot.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(t,r,i){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var le=(globalThis||Tu||self||window||void 0)&&(globalThis||Tu||self||window||void 0).__awaiter||function(T,t,r,i){function o(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function m(C){try{E(i.next(C))}catch(O){f(O)}}function y(C){try{E(i.throw(C))}catch(O){f(O)}}function E(C){C.done?u(C.value):o(C.value).then(m,y)}E((i=i.apply(T,t||[])).next())})};class ve{constructor(t,r=500,i){this.reader=t,this.timeBetweenScansMillis=r,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const i of t){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const u=i.deviceId||i.id,f=i.label||`Video device ${r.length+1}`,m=i.groupId,y={deviceId:u,label:f,kind:o,groupId:m};r.push(y)}return r})}getVideoInputDevices(){return le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new H(r.deviceId,r.label))})}findDeviceById(t){return le(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(i=>i.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return le(this,void 0,void 0,function*(){this.reset();let i;t?i={deviceId:{exact:t}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,r)})}decodeOnceFromConstraints(t,r){return le(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(i,r)})}decodeOnceFromStream(t,r){return le(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(t,r,i){return le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,i)})}decodeFromVideoDevice(t,r,i){return le(this,void 0,void 0,function*(){let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeFromConstraints(u,r,i)})}decodeFromConstraints(t,r,i){return le(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(o,r,i)})}decodeFromStream(t,r,i){return le(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return le(this,void 0,void 0,function*(){const i=this.prepareVideoElement(r);return this.addVideoSource(i,t),this.videoElement=i,this.stream=t,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(t){return new Promise((r,i)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return le(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const i=document.getElementById(t);if(!i)throw new N(`element with id '${t}' not found`);if(i.nodeName.toLowerCase()!==r.toLowerCase())throw new N(`element with id '${t}' must be an ${r} element`);return i}decodeFromImage(t,r){if(!t&&!r)throw new N("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,i){if(t===void 0&&r===void 0)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,i):this.decodeFromVideoElementContinuously(t,i)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let i;return this.isImageLoaded(r)?i=this.decodeOnce(r,!1,!0):i=this._decodeOnLoadImage(r),i}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(i,r)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const i=this._decodeOnLoadImage(r);return r.src=t,i}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElement(r);return r.src=t,i}decodeFromVideoUrlContinuously(t,r){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,r);return i.src=t,o}_decodeOnLoadImage(t){return new Promise((r,i)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,i),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,i=!0){this._stopAsyncDecode=!1;const o=(u,f)=>{if(this._stopAsyncDecode){f(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(t);u(m)}catch(m){const y=r&&m instanceof re,C=(m instanceof j||m instanceof ee)&&i;if(y||C)return setTimeout(o,this._timeBetweenDecodingAttempts,u,f);f(m)}};return new Promise((u,f)=>o(u,f))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(t);r(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){r(null,o);const u=o instanceof j||o instanceof ee,f=o instanceof re;(u||f)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,i){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,i=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),i=new ot(r),o=new ce(i);return new k(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let i,o;return typeof t<"u"&&(t instanceof HTMLVideoElement?(i=t.videoWidth,o=t.videoHeight):t instanceof HTMLImageElement&&(i=t.naturalWidth||t.width,o=t.naturalHeight||t.height)),r.style.width=i+"px",r.style.height=o+"px",r.width=i,r.height=o,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ee{constructor(t,r,i=r==null?0:8*r.length,o,u,f=G.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=i,this.resultPoints=o,this.format=u,this.timestamp=f,this.text=t,this.rawBytes=r,i==null?this.numBits=r==null?0:8*r.length:this.numBits=i,this.resultPoints=o,this.format=u,this.resultMetadata=null,f==null?this.timestamp=G.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const i=new Array(r.length+t.length);G.arraycopy(r,0,i,0,r.length),G.arraycopy(t,0,i,r.length,t.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ve;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var pe=Ve,ct;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var st=ct;class Nt{constructor(t,r,i,o,u=-1,f=-1){this.rawBytes=t,this.text=r,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class un{exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Zt{constructor(t,r){if(r.length===0)throw new R;this.field=t;const i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),G.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let i;if(t===1){i=0;for(let f=0,m=r.length;f!==m;f++){const y=r[f];i=un.addOrSubtract(i,y)}return i}i=r[0];const o=r.length,u=this.field;for(let f=1;f<o;f++)i=un.addOrSubtract(u.multiply(t,i),r[f]);return i}addOrSubtract(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){const f=r;r=i,i=f}let o=new Int32Array(i.length);const u=i.length-r.length;G.arraycopy(i,0,o,0,u);for(let f=u;f<i.length;f++)o[f]=un.addOrSubtract(r[f-u],i[f]);return new Zt(this.field,o)}multiply(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,i=r.length,o=t.coefficients,u=o.length,f=new Int32Array(i+u-1),m=this.field;for(let y=0;y<i;y++){const E=r[y];for(let C=0;C<u;C++)f[y+C]=un.addOrSubtract(f[y+C],m.multiply(E,o[C]))}return new Zt(m,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,i=this.field,o=new Int32Array(r),u=this.coefficients;for(let f=0;f<r;f++)o[f]=i.multiply(u[f],t);return new Zt(i,o)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return this.field.getZero();const i=this.coefficients,o=i.length,u=new Int32Array(o+t),f=this.field;for(let m=0;m<o;m++)u[m]=f.multiply(i[m],r);return new Zt(f,u)}divide(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new R("Divide by 0");const r=this.field;let i=r.getZero(),o=this;const u=t.getCoefficient(t.getDegree()),f=r.inverse(u);for(;o.getDegree()>=t.getDegree()&&!o.isZero();){const m=o.getDegree()-t.getDegree(),y=r.multiply(o.getCoefficient(o.getDegree()),f),E=t.multiplyByMonomial(m,y),C=r.buildMonomial(m,y);i=i.addOrSubtract(C),o=o.addOrSubtract(E)}return[i,o]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);if(i!==0){if(i<0?(t+=" - ",i=-i):t.length>0&&(t+=" + "),r===0||i!==1){const o=this.field.log(i);o===0?t+="1":o===1?t+="a":(t+="a^",t+=o)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class cn extends v{}cn.kind="ArithmeticException";class $e extends un{constructor(t,r,i){super(),this.primitive=t,this.size=r,this.generatorBase=i;const o=new Int32Array(r);let u=1;for(let m=0;m<r;m++)o[m]=u,u*=2,u>=r&&(u^=t,u&=r-1);this.expTable=o;const f=new Int32Array(r);for(let m=0;m<r-1;m++)f[o[m]]=m;this.logTable=f,this.zero=new Zt(this,Int32Array.from([0])),this.one=new Zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;const i=new Int32Array(t+1);return i[0]=r,new Zt(this,i)}inverse(t){if(t===0)throw new cn;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}$e.AZTEC_DATA_12=new $e(4201,4096,1),$e.AZTEC_DATA_10=new $e(1033,1024,1),$e.AZTEC_DATA_6=new $e(67,64,1),$e.AZTEC_PARAM=new $e(19,16,1),$e.QR_CODE_FIELD_256=new $e(285,256,0),$e.DATA_MATRIX_FIELD_256=new $e(301,256,1),$e.AZTEC_DATA_8=$e.DATA_MATRIX_FIELD_256,$e.MAXICODE_FIELD_64=$e.AZTEC_DATA_6;class rn extends v{}rn.kind="ReedSolomonException";class Mn extends v{}Mn.kind="IllegalStateException";class Er{constructor(t){this.field=t}decode(t,r){const i=this.field,o=new Zt(i,t),u=new Int32Array(r);let f=!0;for(let L=0;L<r;L++){const P=o.evaluateAt(i.exp(L+i.getGeneratorBase()));u[u.length-1-L]=P,P!==0&&(f=!1)}if(f)return;const m=new Zt(i,u),y=this.runEuclideanAlgorithm(i.buildMonomial(r,1),m,r),E=y[0],C=y[1],O=this.findErrorLocations(E),I=this.findErrorMagnitudes(C,O);for(let L=0;L<O.length;L++){const P=t.length-1-i.log(O[L]);if(P<0)throw new rn("Bad error location");t[P]=$e.addOrSubtract(t[P],I[L])}}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){const L=t;t=r,r=L}const o=this.field;let u=t,f=r,m=o.getZero(),y=o.getOne();for(;f.getDegree()>=(i/2|0);){let L=u,P=m;if(u=f,m=y,u.isZero())throw new rn("r_{i-1} was zero");f=L;let z=o.getZero();const X=u.getCoefficient(u.getDegree()),ne=o.inverse(X);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const be=f.getDegree()-u.getDegree(),ye=o.multiply(f.getCoefficient(f.getDegree()),ne);z=z.addOrSubtract(o.buildMonomial(be,ye)),f=f.addOrSubtract(u.multiplyByMonomial(be,ye))}if(y=z.multiply(m).addOrSubtract(P),f.getDegree()>=u.getDegree())throw new Mn("Division algorithm failed to reduce polynomial?")}const E=y.getCoefficient(0);if(E===0)throw new rn("sigmaTilde(0) was zero");const C=o.inverse(E),O=y.multiplyScalar(C),I=f.multiplyScalar(C);return[O,I]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const i=new Int32Array(r);let o=0;const u=this.field;for(let f=1;f<u.getSize()&&o<r;f++)t.evaluateAt(f)===0&&(i[o]=u.inverse(f),o++);if(o!==r)throw new rn("Error locator degree does not match number of roots");return i}findErrorMagnitudes(t,r){const i=r.length,o=new Int32Array(i),u=this.field;for(let f=0;f<i;f++){const m=u.inverse(r[f]);let y=1;for(let E=0;E<i;E++)if(f!==E){const C=u.multiply(r[E],m),O=(C&1)===0?C|1:C&-2;y=u.multiply(y,O)}o[f]=u.multiply(t.evaluateAt(m),u.inverse(y)),u.getGeneratorBase()!==0&&(o[f]=u.multiply(o[f],m))}return o}}var fn;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(fn||(fn={}));class ke{decode(t){this.ddata=t;let r=t.getBits(),i=this.extractBits(r),o=this.correctBits(i),u=ke.convertBoolArrayToByteArray(o),f=ke.getEncodedData(o),m=new Nt(u,f,null,null);return m.setNumBits(o.length),m}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,i=fn.UPPER,o=fn.UPPER,u="",f=0;for(;f<r;)if(o===fn.BINARY){if(r-f<5)break;let m=ke.readCode(t,f,5);if(f+=5,m===0){if(r-f<11)break;m=ke.readCode(t,f,11)+31,f+=11}for(let y=0;y<m;y++){if(r-f<8){f=r;break}const E=ke.readCode(t,f,8);u+=Oe.castAsNonUtf8Char(E),f+=8}o=i}else{let m=o===fn.DIGIT?4:5;if(r-f<m)break;let y=ke.readCode(t,f,m);f+=m;let E=ke.getCharacter(o,y);E.startsWith("CTRL_")?(i=o,o=ke.getTable(E.charAt(5)),E.charAt(6)==="L"&&(i=o)):(u+=E,o=i)}return u}static getTable(t){switch(t){case"L":return fn.LOWER;case"P":return fn.PUNCT;case"M":return fn.MIXED;case"D":return fn.DIGIT;case"B":return fn.BINARY;case"U":default:return fn.UPPER}}static getCharacter(t,r){switch(t){case fn.UPPER:return ke.UPPER_TABLE[r];case fn.LOWER:return ke.LOWER_TABLE[r];case fn.MIXED:return ke.MIXED_TABLE[r];case fn.PUNCT:return ke.PUNCT_TABLE[r];case fn.DIGIT:return ke.DIGIT_TABLE[r];default:throw new Mn("Bad table")}}correctBits(t){let r,i;this.ddata.getNbLayers()<=2?(i=6,r=$e.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,r=$e.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,r=$e.AZTEC_DATA_10):(i=12,r=$e.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),u=t.length/i;if(u<o)throw new ee;let f=t.length%i,m=new Int32Array(u);for(let I=0;I<u;I++,f+=i)m[I]=ke.readCode(t,f,i);try{new Er(r).decode(m,u-o)}catch(I){throw new ee(I)}let y=(1<<i)-1,E=0;for(let I=0;I<o;I++){let L=m[I];if(L===0||L===y)throw new ee;(L===1||L===y-1)&&E++}let C=new Array(o*i-E),O=0;for(let I=0;I<o;I++){let L=m[I];if(L===1||L===y-1)C.fill(L>1,O,O+i-1),O+=i-1;else for(let P=i-1;P>=0;--P)C[O++]=(L&1<<P)!==0}return C}extractBits(t){let r=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(r?11:14)+i*4,u=new Int32Array(o),f=new Array(this.totalBitsInLayer(i,r));if(r)for(let m=0;m<u.length;m++)u[m]=m;else{let m=o+1+2*W.truncDivision(W.truncDivision(o,2)-1,15),y=o/2,E=W.truncDivision(m,2);for(let C=0;C<y;C++){let O=C+W.truncDivision(C,15);u[y-C-1]=E-O-1,u[y+C]=E+O+1}}for(let m=0,y=0;m<i;m++){let E=(i-m)*4+(r?9:12),C=m*2,O=o-1-C;for(let I=0;I<E;I++){let L=I*2;for(let P=0;P<2;P++)f[y+L+P]=t.get(u[C+P],u[C+I]),f[y+2*E+L+P]=t.get(u[C+I],u[O-P]),f[y+4*E+L+P]=t.get(u[O-P],u[O-I]),f[y+6*E+L+P]=t.get(u[O-I],u[C+P])}y+=E*8}return f}static readCode(t,r,i){let o=0;for(let u=r;u<r+i;u++)o<<=1,t[u]&&(o|=1);return o}static readByte(t,r){let i=t.length-r;return i>=8?ke.readCode(t,r,8):ke.readCode(t,r,i)<<8-i}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let i=0;i<r.length;i++)r[i]=ke.readByte(t,8*i);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}ke.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ke.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ke.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ke.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ke.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Xe{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,i,o){const u=t-i,f=r-o;return Math.sqrt(u*u+f*f)}static sum(t){let r=0;for(let i=0,o=t.length;i!==o;i++){const u=t[i];r+=u}return r}}class _r{static floatToIntBits(t){return t}}_r.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Te){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*_r.floatToIntBits(this.x)+_r.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);let u,f,m;if(i>=r&&i>=o?(f=t[0],u=t[1],m=t[2]):o>=i&&o>=r?(f=t[1],u=t[0],m=t[2]):(f=t[2],u=t[0],m=t[1]),this.crossProductZ(u,f,m)<0){const y=u;u=m,m=y}t[0]=u,t[1]=f,t[2]=m}static distance(t,r){return Xe.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,i){const o=r.x,u=r.y;return(i.x-o)*(t.y-u)-(i.y-u)*(t.x-o)}}class vt{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Is extends vt{constructor(t,r,i,o,u){super(t,r),this.compact=i,this.nbDatablocks=o,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gt{constructor(t,r,i,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=gt.INIT_SIZE),i==null&&(i=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);const u=r/2|0;if(this.leftInit=i-u,this.rightInit=i+u,this.upInit=o-u,this.downInit=o+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let t=this.leftInit,r=this.rightInit,i=this.upInit,o=this.downInit,u=!1,f=!0,m=!1,y=!1,E=!1,C=!1,O=!1;const I=this.width,L=this.height;for(;f;){f=!1;let P=!0;for(;(P||!y)&&r<I;)P=this.containsBlackPoint(i,o,r,!1),P?(r++,f=!0,y=!0):y||r++;if(r>=I){u=!0;break}let z=!0;for(;(z||!E)&&o<L;)z=this.containsBlackPoint(t,r,o,!0),z?(o++,f=!0,E=!0):E||o++;if(o>=L){u=!0;break}let X=!0;for(;(X||!C)&&t>=0;)X=this.containsBlackPoint(i,o,t,!1),X?(t--,f=!0,C=!0):C||t--;if(t<0){u=!0;break}let ne=!0;for(;(ne||!O)&&i>=0;)ne=this.containsBlackPoint(t,r,i,!0),ne?(i--,f=!0,O=!0):O||i--;if(i<0){u=!0;break}f&&(m=!0)}if(!u&&m){const P=r-t;let z=null;for(let ye=1;z===null&&ye<P;ye++)z=this.getBlackPointOnSegment(t,o-ye,t+ye,o);if(z==null)throw new re;let X=null;for(let ye=1;X===null&&ye<P;ye++)X=this.getBlackPointOnSegment(t,i+ye,t+ye,i);if(X==null)throw new re;let ne=null;for(let ye=1;ne===null&&ye<P;ye++)ne=this.getBlackPointOnSegment(r,i+ye,r-ye,i);if(ne==null)throw new re;let be=null;for(let ye=1;be===null&&ye<P;ye++)be=this.getBlackPointOnSegment(r,o-ye,r-ye,o);if(be==null)throw new re;return this.centerEdges(be,z,ne,X)}else throw new re}getBlackPointOnSegment(t,r,i,o){const u=Xe.round(Xe.distance(t,r,i,o)),f=(i-t)/u,m=(o-r)/u,y=this.image;for(let E=0;E<u;E++){const C=Xe.round(t+E*f),O=Xe.round(r+E*m);if(y.get(C,O))return new Te(C,O)}return null}centerEdges(t,r,i,o){const u=t.getX(),f=t.getY(),m=r.getX(),y=r.getY(),E=i.getX(),C=i.getY(),O=o.getX(),I=o.getY(),L=gt.CORR;return u<this.width/2?[new Te(O-L,I+L),new Te(m+L,y+L),new Te(E-L,C-L),new Te(u+L,f-L)]:[new Te(O+L,I+L),new Te(m+L,y-L),new Te(E-L,C+L),new Te(u-L,f-L)]}containsBlackPoint(t,r,i,o){const u=this.image;if(o){for(let f=t;f<=r;f++)if(u.get(f,i))return!0}else for(let f=t;f<=r;f++)if(u.get(i,f))return!0;return!1}}gt.INIT_SIZE=10,gt.CORR=1;class Ds{static checkAndNudgePoints(t,r){const i=t.getWidth(),o=t.getHeight();let u=!0;for(let f=0;f<r.length&&u;f+=2){const m=Math.floor(r[f]),y=Math.floor(r[f+1]);if(m<-1||m>i||y<-1||y>o)throw new re;u=!1,m===-1?(r[f]=0,u=!0):m===i&&(r[f]=i-1,u=!0),y===-1?(r[f+1]=0,u=!0):y===o&&(r[f+1]=o-1,u=!0)}u=!0;for(let f=r.length-2;f>=0&&u;f-=2){const m=Math.floor(r[f]),y=Math.floor(r[f+1]);if(m<-1||m>i||y<-1||y>o)throw new re;u=!1,m===-1?(r[f]=0,u=!0):m===i&&(r[f]=i-1,u=!0),y===-1?(r[f+1]=0,u=!0):y===o&&(r[f+1]=o-1,u=!0)}}}class Jn{constructor(t,r,i,o,u,f,m,y,E){this.a11=t,this.a21=r,this.a31=i,this.a12=o,this.a22=u,this.a32=f,this.a13=m,this.a23=y,this.a33=E}static quadrilateralToQuadrilateral(t,r,i,o,u,f,m,y,E,C,O,I,L,P,z,X){const ne=Jn.quadrilateralToSquare(t,r,i,o,u,f,m,y);return Jn.squareToQuadrilateral(E,C,O,I,L,P,z,X).times(ne)}transformPoints(t){const r=t.length,i=this.a11,o=this.a12,u=this.a13,f=this.a21,m=this.a22,y=this.a23,E=this.a31,C=this.a32,O=this.a33;for(let I=0;I<r;I+=2){const L=t[I],P=t[I+1],z=u*L+y*P+O;t[I]=(i*L+f*P+E)/z,t[I+1]=(o*L+m*P+C)/z}}transformPointsWithValues(t,r){const i=this.a11,o=this.a12,u=this.a13,f=this.a21,m=this.a22,y=this.a23,E=this.a31,C=this.a32,O=this.a33,I=t.length;for(let L=0;L<I;L++){const P=t[L],z=r[L],X=u*P+y*z+O;t[L]=(i*P+f*z+E)/X,r[L]=(o*P+m*z+C)/X}}static squareToQuadrilateral(t,r,i,o,u,f,m,y){const E=t-i+u-m,C=r-o+f-y;if(E===0&&C===0)return new Jn(i-t,u-i,t,o-r,f-o,r,0,0,1);{const O=i-u,I=m-u,L=o-f,P=y-f,z=O*P-I*L,X=(E*P-I*C)/z,ne=(O*C-E*L)/z;return new Jn(i-t+X*i,m-t+ne*m,t,o-r+X*o,y-r+ne*y,r,X,ne,1)}}static quadrilateralToSquare(t,r,i,o,u,f,m,y){return Jn.squareToQuadrilateral(t,r,i,o,u,f,m,y).buildAdjoint()}buildAdjoint(){return new Jn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Jn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Ms extends Ds{sampleGrid(t,r,i,o,u,f,m,y,E,C,O,I,L,P,z,X,ne,be,ye){const me=Jn.quadrilateralToQuadrilateral(o,u,f,m,y,E,C,O,I,L,P,z,X,ne,be,ye);return this.sampleGridWithTransform(t,r,i,me)}sampleGridWithTransform(t,r,i,o){if(r<=0||i<=0)throw new re;const u=new bt(r,i),f=new Float32Array(2*r);for(let m=0;m<i;m++){const y=f.length,E=m+.5;for(let C=0;C<y;C+=2)f[C]=C/2+.5,f[C+1]=E;o.transformPoints(f),Ds.checkAndNudgePoints(t,f);try{for(let C=0;C<y;C+=2)t.get(Math.floor(f[C]),Math.floor(f[C+1]))&&u.set(C/2,m)}catch{throw new re}}return u}}class tr{static setGridSampler(t){tr.gridSampler=t}static getInstance(){return tr.gridSampler}}tr.gridSampler=new Ms;class Bn{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Bs{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),i=this.getBullsEyeCorners(r);if(t){let f=i[0];i[0]=i[2],i[2]=f}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),u=this.getMatrixCornerPoints(i);return new Is(o,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new re;let r=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(i,r);let o=0;for(let f=0;f<4;f++){let m=i[(this.shift+f)%4];this.compact?(o<<=7,o+=m>>1&127):(o<<=10,o+=(m>>2&992)+(m>>1&31))}let u=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,r){let i=0;t.forEach((o,u,f)=>{let m=(o>>r-2<<1)+(o&1);i=(i<<3)+m}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(W.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new re}getCorrectedParameterData(t,r){let i,o;r?(i=7,o=2):(i=10,o=4);let u=i-o,f=new Int32Array(i);for(let y=i-1;y>=0;--y)f[y]=t&15,t>>=4;try{new Er($e.AZTEC_PARAM).decode(f,u)}catch{throw new re}let m=0;for(let y=0;y<o;y++)m=(m<<4)+f[y];return m}getBullsEyeCorners(t){let r=t,i=t,o=t,u=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(r,f,1,-1),I=this.getFirstDifferent(i,f,1,1),L=this.getFirstDifferent(o,f,-1,1),P=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(P,O)*this.nbCenterLayers/(this.distancePoint(u,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(O,I,L,P))break}r=O,i=I,o=L,u=P,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let m=new Te(r.getX()+.5,r.getY()-.5),y=new Te(i.getX()+.5,i.getY()+.5),E=new Te(o.getX()-.5,o.getY()+.5),C=new Te(u.getX()-.5,u.getY()-.5);return this.expandSquare([m,y,E,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,i,o;try{let m=new gt(this.image).detect();t=m[0],r=m[1],i=m[2],o=m[3]}catch{let y=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new Bn(y+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Bn(y+7,E+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Bn(y-7,E+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Bn(y-7,E-7),!1,-1,-1).toResultPoint()}let u=Xe.round((t.getX()+o.getX()+r.getX()+i.getX())/4),f=Xe.round((t.getY()+o.getY()+r.getY()+i.getY())/4);try{let m=new gt(this.image,15,u,f).detect();t=m[0],r=m[1],i=m[2],o=m[3]}catch{t=this.getFirstDifferent(new Bn(u+7,f-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Bn(u+7,f+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Bn(u-7,f+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Bn(u-7,f-7),!1,-1,-1).toResultPoint()}return u=Xe.round((t.getX()+o.getX()+r.getX()+i.getX())/4),f=Xe.round((t.getY()+o.getY()+r.getY()+i.getY())/4),new Bn(u,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,i,o,u){let f=tr.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,E=m/2+this.nbCenterLayers;return f.sampleGrid(t,m,m,y,y,E,y,E,E,y,E,r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY(),u.getX(),u.getY())}sampleLine(t,r,i){let o=0,u=this.distanceResultPoint(t,r),f=u/i,m=t.getX(),y=t.getY(),E=f*(r.getX()-t.getX())/u,C=f*(r.getY()-t.getY())/u;for(let O=0;O<i;O++)this.image.get(Xe.round(m+O*E),Xe.round(y+O*C))&&(o|=1<<i-O-1);return o}isWhiteOrBlackRectangle(t,r,i,o){let u=3;t=new Bn(t.getX()-u,t.getY()+u),r=new Bn(r.getX()-u,r.getY()-u),i=new Bn(i.getX()+u,i.getY()-u),o=new Bn(o.getX()+u,o.getY()+u);let f=this.getColor(o,t);if(f===0)return!1;let m=this.getColor(t,r);return m!==f||(m=this.getColor(r,i),m!==f)?!1:(m=this.getColor(i,o),m===f)}getColor(t,r){let i=this.distancePoint(t,r),o=(r.getX()-t.getX())/i,u=(r.getY()-t.getY())/i,f=0,m=t.getX(),y=t.getY(),E=this.image.get(t.getX(),t.getY()),C=Math.ceil(i);for(let I=0;I<C;I++)m+=o,y+=u,this.image.get(Xe.round(m),Xe.round(y))!==E&&f++;let O=f/i;return O>.1&&O<.9?0:O<=.1===E?1:-1}getFirstDifferent(t,r,i,o){let u=t.getX()+i,f=t.getY()+o;for(;this.isValid(u,f)&&this.image.get(u,f)===r;)u+=i,f+=o;for(u-=i,f-=o;this.isValid(u,f)&&this.image.get(u,f)===r;)u+=i;for(u-=i;this.isValid(u,f)&&this.image.get(u,f)===r;)f+=o;return f-=o,new Bn(u,f)}expandSquare(t,r,i){let o=i/(2*r),u=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),m=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,E=new Te(m+o*u,y+o*f),C=new Te(m-o*u,y-o*f);u=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),m=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let O=new Te(m+o*u,y+o*f),I=new Te(m-o*u,y-o*f);return[E,O,C,I]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Xe.round(t.getX()),i=Xe.round(t.getY());return this.isValid(r,i)}distancePoint(t,r){return Xe.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Xe.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Vi{decode(t,r=null){let i=null,o=new Bs(t.getBlackMatrix()),u=null,f=null;try{let C=o.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(r,u),f=new ke().decode(C)}catch(C){i=C}if(f==null)try{let C=o.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(r,u),f=new ke().decode(C)}catch(C){throw i??C}let m=new Ee(f.getText(),f.getRawBytes(),f.getNumBits(),u,pe.AZTEC,G.currentTimeMillis()),y=f.getByteSegments();y!=null&&m.putMetadata(st.BYTE_SEGMENTS,y);let E=f.getECLevel();return E!=null&&m.putMetadata(st.ERROR_CORRECTION_LEVEL,E),m}reportFoundResultPoints(t,r){if(t!=null){let i=t.get(_e.NEED_RESULT_POINT_CALLBACK);i!=null&&r.forEach((o,u,f)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class al extends ve{constructor(t=500){super(new Vi,t)}}class Ft{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(_e.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),f=this.doDecode(u,r),m=f.getResultMetadata();let y=270;m!==null&&m.get(st.ORIENTATION)===!0&&(y=y+m.get(st.ORIENTATION)%360),f.putMetadata(st.ORIENTATION,y);const E=f.getResultPoints();if(E!==null){const C=u.getHeight();for(let O=0;O<E.length;O++)E[O]=new Te(C-E[O].getY()-1,E[O].getX())}return f}else throw new re}}reset(){}doDecode(t,r){const i=t.getWidth(),o=t.getHeight();let u=new xe(i);const f=r&&r.get(_e.TRY_HARDER)===!0,m=Math.max(1,o>>(f?8:5));let y;f?y=o:y=15;const E=Math.trunc(o/2);for(let C=0;C<y;C++){const O=Math.trunc((C+1)/2),I=(C&1)===0,L=E+m*(I?O:-O);if(L<0||L>=o)break;try{u=t.getBlackRow(L,u)}catch{continue}for(let P=0;P<2;P++){if(P===1&&(u.reverse(),r&&r.get(_e.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach((X,ne)=>z.set(ne,X)),z.delete(_e.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(L,u,r);if(P===1){z.putMetadata(st.ORIENTATION,180);const X=z.getResultPoints();X!==null&&(X[0]=new Te(i-X[0].getX()-1,X[0].getY()),X[1]=new Te(i-X[1].getX()-1,X[1].getY()))}return z}catch{}}}throw new re}static recordPattern(t,r,i){const o=i.length;for(let E=0;E<o;E++)i[E]=0;const u=t.getSize();if(r>=u)throw new re;let f=!t.get(r),m=0,y=r;for(;y<u;){if(t.get(y)!==f)i[m]++;else{if(++m===o)break;i[m]=1,f=!f}y++}if(!(m===o||m===o-1&&y===u))throw new re}static recordPatternInReverse(t,r,i){let o=i.length,u=t.get(r);for(;r>0&&o>=0;)t.get(--r)!==u&&(o--,u=!u);if(o>=0)throw new re;Ft.recordPattern(t,r+1,i)}static patternMatchVariance(t,r,i){const o=t.length;let u=0,f=0;for(let E=0;E<o;E++)u+=t[E],f+=r[E];if(u<f)return Number.POSITIVE_INFINITY;const m=u/f;i*=m;let y=0;for(let E=0;E<o;E++){const C=t[E],O=r[E]*m,I=C>O?C-O:O-C;if(I>i)return Number.POSITIVE_INFINITY;y+=I}return y/u}}class we extends Ft{static findStartPattern(t){const r=t.getSize(),i=t.getNextSet(0);let o=0,u=Int32Array.from([0,0,0,0,0,0]),f=i,m=!1;const y=6;for(let E=i;E<r;E++)if(t.get(E)!==m)u[o]++;else{if(o===y-1){let C=we.MAX_AVG_VARIANCE,O=-1;for(let I=we.CODE_START_A;I<=we.CODE_START_C;I++){const L=Ft.patternMatchVariance(u,we.CODE_PATTERNS[I],we.MAX_INDIVIDUAL_VARIANCE);L<C&&(C=L,O=I)}if(O>=0&&t.isRange(Math.max(0,f-(E-f)/2),f,!1))return Int32Array.from([f,E,O]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[o-1]=0,u[o]=0,o--}else o++;u[o]=1,m=!m}throw new re}static decodeCode(t,r,i){Ft.recordPattern(t,i,r);let o=we.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<we.CODE_PATTERNS.length;f++){const m=we.CODE_PATTERNS[f],y=this.patternMatchVariance(r,m,we.MAX_INDIVIDUAL_VARIANCE);y<o&&(o=y,u=f)}if(u>=0)return u;throw new re}decodeRow(t,r,i){const o=i&&i.get(_e.ASSUME_GS1)===!0,u=we.findStartPattern(r),f=u[2];let m=0;const y=new Uint8Array(20);y[m++]=f;let E;switch(f){case we.CODE_START_A:E=we.CODE_CODE_A;break;case we.CODE_START_B:E=we.CODE_CODE_B;break;case we.CODE_START_C:E=we.CODE_CODE_C;break;default:throw new ee}let C=!1,O=!1,I="",L=u[0],P=u[1];const z=Int32Array.from([0,0,0,0,0,0]);let X=0,ne=0,be=f,ye=0,me=!0,at=!1,Ke=!1;for(;!C;){const Ci=O;switch(O=!1,X=ne,ne=we.decodeCode(r,z,P),y[m++]=ne,ne!==we.CODE_STOP&&(me=!0),ne!==we.CODE_STOP&&(ye++,be+=ye*ne),L=P,P+=z.reduce((Ao,xl)=>Ao+xl,0),ne){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new ee}switch(E){case we.CODE_CODE_A:if(ne<64)Ke===at?I+=String.fromCharCode(32+ne):I+=String.fromCharCode(32+ne+128),Ke=!1;else if(ne<96)Ke===at?I+=String.fromCharCode(ne-64):I+=String.fromCharCode(ne+64),Ke=!1;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!at&&Ke?(at=!0,Ke=!1):at&&Ke?(at=!1,Ke=!1):Ke=!0;break;case we.CODE_SHIFT:O=!0,E=we.CODE_CODE_B;break;case we.CODE_CODE_B:E=we.CODE_CODE_B;break;case we.CODE_CODE_C:E=we.CODE_CODE_C;break;case we.CODE_STOP:C=!0;break}break;case we.CODE_CODE_B:if(ne<96)Ke===at?I+=String.fromCharCode(32+ne):I+=String.fromCharCode(32+ne+128),Ke=!1;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!at&&Ke?(at=!0,Ke=!1):at&&Ke?(at=!1,Ke=!1):Ke=!0;break;case we.CODE_SHIFT:O=!0,E=we.CODE_CODE_A;break;case we.CODE_CODE_A:E=we.CODE_CODE_A;break;case we.CODE_CODE_C:E=we.CODE_CODE_C;break;case we.CODE_STOP:C=!0;break}break;case we.CODE_CODE_C:if(ne<100)ne<10&&(I+="0"),I+=ne;else switch(ne!==we.CODE_STOP&&(me=!1),ne){case we.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case we.CODE_CODE_A:E=we.CODE_CODE_A;break;case we.CODE_CODE_B:E=we.CODE_CODE_B;break;case we.CODE_STOP:C=!0;break}break}Ci&&(E=E===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const mn=P-L;if(P=r.getNextUnset(P),!r.isRange(P,Math.min(r.getSize(),P+(P-L)/2),!1))throw new re;if(be-=ye*X,be%103!==X)throw new j;const gr=I.length;if(gr===0)throw new re;gr>0&&me&&(E===we.CODE_CODE_C?I=I.substring(0,gr-2):I=I.substring(0,gr-1));const Vn=(u[1]+u[0])/2,jt=L+mn/2,Un=y.length,or=new Uint8Array(Un);for(let Ci=0;Ci<Un;Ci++)or[Ci]=y[Ci];const as=[new Te(Vn,t),new Te(jt,t)];return new Ee(I,or,0,as,pe.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class Bt extends Ft{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let u=Bt.findAsteriskPattern(r,o),f=r.getNextSet(u[1]),m=r.getSize(),y,E;do{Bt.recordPattern(r,f,o);let z=Bt.toNarrowWidePattern(o);if(z<0)throw new re;y=Bt.patternToChar(z),this.decodeRowResult+=y,E=f;for(let X of o)f+=X;f=r.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let z of o)C+=z;let O=f-E-C;if(f!==m&&O*2<C)throw new re;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,X=0;for(let ne=0;ne<z;ne++)X+=Bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(z)!==Bt.ALPHABET_STRING.charAt(X%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new re;let I;this.extendedMode?I=Bt.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let L=(u[1]+u[0])/2,P=E+C/2;return new Ee(I,null,0,[new Te(L,t),new Te(P,t)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let i=t.getSize(),o=t.getNextSet(0),u=0,f=o,m=!1,y=r.length;for(let E=o;E<i;E++)if(t.get(E)!==m)r[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(r)===Bt.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((E-f)/2)),f,!1))return[f,E];f+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,m=!m}throw new re}static toNarrowWidePattern(t){let r=t.length,i=0,o;do{let u=2147483647;for(let y of t)y<u&&y>i&&(u=y);i=u,o=0;let f=0,m=0;for(let y=0;y<r;y++){let E=t[y];E>i&&(m|=1<<r-1-y,o++,f+=E)}if(o===3){for(let y=0;y<r&&o>0;y++){let E=t[y];if(E>i&&(o--,E*2>=f))return-1}return m}}while(o>3);return-1}static patternToChar(t){for(let r=0;r<Bt.CHARACTER_ENCODINGS.length;r++)if(Bt.CHARACTER_ENCODINGS[r]===t)return Bt.ALPHABET_STRING.charAt(r);if(t===Bt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(t){let r=t.length,i="";for(let o=0;o<r;o++){let u=t.charAt(o);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=t.charAt(o+1),m="\0";switch(u){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new ee;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new ee;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new ee;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new ee;break}i+=m,o++}else i+=u}return i}}Bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Bt.ASTERISK_ENCODING=148;class Ze extends Ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,i){let o=this.decodeStart(r),u=this.decodeEnd(r),f=new We;Ze.decodeMiddle(r,o[1],u[0],f);let m=f.toString(),y=null;i!=null&&(y=i.get(_e.ALLOWED_LENGTHS)),y==null&&(y=Ze.DEFAULT_ALLOWED_LENGTHS);let E=m.length,C=!1,O=0;for(let P of y){if(E===P){C=!0;break}P>O&&(O=P)}if(!C&&E>O&&(C=!0),!C)throw new ee;const I=[new Te(o[1],t),new Te(u[0],t)];return new Ee(m,null,0,I,pe.ITF,new Date().getTime())}static decodeMiddle(t,r,i,o){let u=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(u.fill(0),f.fill(0),m.fill(0);r<i;){Ft.recordPattern(t,r,u);for(let E=0;E<5;E++){let C=2*E;f[E]=u[C],m[E]=u[C+1]}let y=Ze.decodeDigit(f);o.append(y.toString()),y=this.decodeDigit(m),o.append(y.toString()),u.forEach(function(E){r+=E})}}decodeStart(t){let r=Ze.skipWhiteSpace(t),i=Ze.findGuardPattern(t,r,Ze.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i}validateQuietZone(t,r){let i=this.narrowLineWidth*10;i=i<r?i:r;for(let o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new re}static skipWhiteSpace(t){const r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new re;return i}decodeEnd(t){t.reverse();try{let r=Ze.skipWhiteSpace(t),i;try{i=Ze.findGuardPattern(t,r,Ze.END_PATTERN_REVERSED[0])}catch(u){u instanceof re&&(i=Ze.findGuardPattern(t,r,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);let o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}}static findGuardPattern(t,r,i){let o=i.length,u=new Int32Array(o),f=t.getSize(),m=!1,y=0,E=r;u.fill(0);for(let C=r;C<f;C++)if(t.get(C)!==m)u[y]++;else{if(y===o-1){if(Ft.patternMatchVariance(u,i,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[E,C];E+=u[0]+u[1],G.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,m=!m}throw new re}static decodeDigit(t){let r=Ze.MAX_AVG_VARIANCE,i=-1,o=Ze.PATTERNS.length;for(let u=0;u<o;u++){let f=Ze.PATTERNS[u],m=Ft.patternMatchVariance(t,f,Ze.MAX_INDIVIDUAL_VARIANCE);m<r?(r=m,i=u):m===r&&(i=-1)}if(i>=0)return i%10;throw new re}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Gt extends Ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,i,o=0,u=Int32Array.from([0,0,0]);for(;!r;){u=Int32Array.from([0,0,0]),i=Gt.findGuardPattern(t,o,!1,this.START_END_PATTERN,u);let f=i[0];o=i[1];let m=f-(o-f);m>=0&&(r=t.isRange(m,f,!1))}return i}static checkChecksum(t){return Gt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return Gt.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let o=r-1;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new ee;i+=u}i*=3;for(let o=r-2;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new ee;i+=u}return(1e3-i)%10}static decodeEnd(t,r){return Gt.findGuardPattern(t,r,!1,Gt.START_END_PATTERN,new Int32Array(Gt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))}static findGuardPattern(t,r,i,o,u){let f=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);let m=0,y=r,E=o.length,C=i;for(let O=r;O<f;O++)if(t.get(O)!==C)u[m]++;else{if(m===E-1){if(Ft.patternMatchVariance(u,o,Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE)return Int32Array.from([y,O]);y+=u[0]+u[1];let I=u.slice(2,u.length-1);for(let L=0;L<m-1;L++)u[L]=I[L];u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,C=!C}throw new re}static decodeDigit(t,r,i,o){this.recordPattern(t,i,r);let u=this.MAX_AVG_VARIANCE,f=-1,m=o.length;for(let y=0;y<m;y++){let E=o[y],C=Ft.patternMatchVariance(r,E,Gt.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,f=y)}if(f>=0)return f;throw new re}}Gt.MAX_AVG_VARIANCE=.48,Gt.MAX_INDIVIDUAL_VARIANCE=.7,Gt.START_END_PATTERN=Int32Array.from([1,1,1]),Gt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Gt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(r,i,o),f=o.toString(),m=xi.parseExtensionString(f),y=[new Te((i[0]+i[1])/2,t),new Te(u,t)],E=new Ee(f,null,0,y,pe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=r[1],m=0;for(let E=0;E<5&&f<u;E++){let C=Gt.decodeDigit(t,o,f,Gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let O of o)f+=O;C>=10&&(m|=1<<4-E),E!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(i.length!==5)throw new re;let y=this.determineCheckDigit(m);if(xi.extensionChecksum(i.toString())!==y)throw new re;return f}static extensionChecksum(t){let r=t.length,i=0;for(let o=r-2;o>=0;o-=2)i+=t.charAt(o).charCodeAt(0)-48;i*=3;for(let o=r-1;o>=0;o-=2)i+=t.charAt(o).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new re}static parseExtensionString(t){if(t.length!==5)return null;let r=xi.parseExtension5String(t);return r==null?null:new Map([[st.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let i=parseInt(t.substring(1)),o=(i/100).toString(),u=i%100,f=u<10?"0"+u:u.toString();return r+o+"."+f}}class Xi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(r,i,o),f=o.toString(),m=Xi.parseExtensionString(f),y=[new Te((i[0]+i[1])/2,t),new Te(u,t)],E=new Ee(f,null,0,y,pe.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=r[1],m=0;for(let y=0;y<2&&f<u;y++){let E=Gt.decodeDigit(t,o,f,Gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);for(let C of o)f+=C;E>=10&&(m|=1<<1-y),y!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(i.length!==2)throw new re;if(parseInt(i.toString())%4!==m)throw new re;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[st.ISSUE_NUMBER,parseInt(t)]])}}class pi{static decodeRow(t,r,i){let o=Gt.findGuardPattern(r,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new xi().decodeRow(t,r,o)}catch{return new Xi().decodeRow(t,r,o)}}}pi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ut extends Gt{constructor(){super(),this.decodeRowStringBuffer="",ut.L_AND_G_PATTERNS=ut.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=ut.L_PATTERNS[t-10],i=new Int32Array(r.length);for(let o=0;o<r.length;o++)i[o]=r[r.length-o-1];ut.L_AND_G_PATTERNS[t]=i}}decodeRow(t,r,i){let o=ut.findStartGuardPattern(r),u=i==null?null:i.get(_e.NEED_RESULT_POINT_CALLBACK);if(u!=null){const me=new Te((o[0]+o[1])/2,t);u.foundPossibleResultPoint(me)}let f=this.decodeMiddle(r,o,this.decodeRowStringBuffer),m=f.rowOffset,y=f.resultString;if(u!=null){const me=new Te(m,t);u.foundPossibleResultPoint(me)}let E=this.decodeEnd(r,m);if(u!=null){const me=new Te((E[0]+E[1])/2,t);u.foundPossibleResultPoint(me)}let C=E[1],O=C+(C-E[0]);if(O>=r.getSize()||!r.isRange(C,O,!1))throw new re;let I=y.toString();if(I.length<8)throw new ee;if(!ut.checkChecksum(I))throw new j;let L=(o[1]+o[0])/2,P=(E[1]+E[0])/2,z=this.getBarcodeFormat(),X=[new Te(L,t),new Te(P,t)],ne=new Ee(I,null,0,X,z,new Date().getTime()),be=0;try{let me=pi.decodeRow(t,r,E[1]);ne.putMetadata(st.UPC_EAN_EXTENSION,me.getText()),ne.putAllMetadata(me.getResultMetadata()),ne.addResultPoints(me.getResultPoints()),be=me.getText().length}catch{}let ye=i==null?null:i.get(_e.ALLOWED_EAN_EXTENSIONS);if(ye!=null){let me=!1;for(let at in ye)if(be.toString()===at){me=!0;break}if(!me)throw new re}return ne}decodeEnd(t,r){return ut.findGuardPattern(t,r,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ut.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return ut.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let o=r-1;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new ee;i+=u}i*=3;for(let o=r-2;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new ee;i+=u}return(1e3-i)%10}}class cr extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=r[1],m=0;for(let E=0;E<6&&f<u;E++){let C=ut.decodeDigit(t,o,f,ut.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let O of o)f+=O;C>=10&&(m|=1<<5-E)}i=cr.determineFirstDigit(i,m),f=ut.findGuardPattern(t,f,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&f<u;E++){let C=ut.decodeDigit(t,o,f,ut.L_PATTERNS);i+=String.fromCharCode(48+C);for(let O of o)f+=O}return{rowOffset:f,resultString:i}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(t,r){for(let i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new re}}cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ar extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=r[1];for(let y=0;y<4&&f<u;y++){let E=ut.decodeDigit(t,o,f,ut.L_PATTERNS);i+=String.fromCharCode(48+E);for(let C of o)f+=C}f=ut.findGuardPattern(t,f,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<u;y++){let E=ut.decodeDigit(t,o,f,ut.L_PATTERNS);i+=String.fromCharCode(48+E);for(let C of o)f+=C}return{rowOffset:f,resultString:i}}getBarcodeFormat(){return pe.EAN_8}}class ai extends ut{constructor(){super(...arguments),this.ean13Reader=new cr}getBarcodeFormat(){return pe.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))}decodeMiddle(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let i=new Ee(r.substring(1),null,null,t.getResultPoints(),pe.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new re}reset(){this.ean13Reader.reset()}}class kn extends ut{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,i){const o=this.decodeMiddleCounters.map(E=>E);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const u=t.getSize();let f=r[1],m=0;for(let E=0;E<6&&f<u;E++){const C=kn.decodeDigit(t,o,f,kn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+C%10);for(let O of o)f+=O;C>=10&&(m|=1<<5-E)}let y=kn.determineNumSysAndCheckDigit(i,m);return{rowOffset:f,resultString:y}}decodeEnd(t,r){return kn.findGuardPatternWithoutCounters(t,r,!0,kn.MIDDLE_END_PATTERN)}checkChecksum(t){return ut.checkChecksum(kn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let u=String.fromCharCode(48+i),f=String.fromCharCode(48+o);return u+t+f}throw re.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),i=new We;i.append(t.charAt(0));let o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()}}kn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),kn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Y extends Ft{constructor(t){super();let r=t==null?null:t.get(_e.POSSIBLE_FORMATS),i=[];h(r)?(i.push(new cr),i.push(new ai),i.push(new Ar),i.push(new kn)):(r.indexOf(pe.EAN_13)>-1&&i.push(new cr),r.indexOf(pe.UPC_A)>-1&&i.push(new ai),r.indexOf(pe.EAN_8)>-1&&i.push(new Ar),r.indexOf(pe.UPC_E)>-1&&i.push(new kn)),this.readers=i}decodeRow(t,r,i){for(let o of this.readers)try{const u=o.decodeRow(t,r,i),f=u.getBarcodeFormat()===pe.EAN_13&&u.getText().charAt(0)==="0",m=i==null?null:i.get(_e.POSSIBLE_FORMATS),y=m==null||m.includes(pe.UPC_A);if(f&&y){const E=u.getRawBytes(),C=new Ee(u.getText().substring(1),E,E?E.length:null,u.getResultPoints(),pe.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new re}reset(){for(let t of this.readers)t.reset()}}class Ce extends Ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let i=0;i<r.length;i++)if(Ft.patternMatchVariance(t,r[i],Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return i;throw new re}static count(t){return Xe.sum(new Int32Array(t))}static increment(t,r){let i=0,o=r[0];for(let u=1;u<t.length;u++)r[u]>o&&(o=r[u],i=u);t[i]++}static decrement(t,r){let i=0,o=r[0];for(let u=1;u<t.length;u++)r[u]<o&&(o=r[u],i=u);t[i]--}static isFinderPattern(t){let r=t[0]+t[1],i=r+t[2]+t[3],o=r/i;if(o>=Ce.MIN_FINDER_PATTERN_RATIO&&o<=Ce.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let m of t)m>f&&(f=m),m<u&&(u=m);return f<10*u}return!1}}Ce.MAX_AVG_VARIANCE=.2,Ce.MAX_INDIVIDUAL_VARIANCE=.45,Ce.MIN_FINDER_PATTERN_RATIO=9.5/12,Ce.MAX_FINDER_PATTERN_RATIO=12.5/14;class je{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof je))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Qe{constructor(t,r,i,o,u){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Te(i,u)),this.resultPoints.push(new Te(o,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Qe))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(t,r,i){let o=0;for(let y of t)o+=y;let u=0,f=0,m=t.length;for(let y=0;y<m-1;y++){let E;for(E=1,f|=1<<y;E<t[y];E++,f&=~(1<<y)){let C=Rt.combins(o-E-1,m-y-2);if(i&&f===0&&o-E-(m-y-1)>=m-y-1&&(C-=Rt.combins(o-E-(m-y),m-y-2)),m-y-1>1){let O=0;for(let I=o-E-(m-y-2);I>r;I--)O+=Rt.combins(o-E-I-1,m-y-3);C-=O*(m-1-y)}else o-E>r&&C--;u+=C}o-=E}return u}static combins(t,r){let i,o;t-r>r?(o=r,i=t-r):(o=t-r,i=r);let u=1,f=1;for(let m=t;m>i;m--)u*=m,f<=o&&(u/=f,f++);for(;f<=o;)u/=f,f++;return u}}class nr{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let i=12*r,o=new xe(i),u=0,m=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(m&1<<y)!=0&&o.set(u),u++;for(let y=1;y<t.length;++y){let E=t[y],C=E.getLeftChar().getValue();for(let O=11;O>=0;--O)(C&1<<O)!=0&&o.set(u),u++;if(E.getRightChar()!=null){let O=E.getRightChar().getValue();for(let I=11;I>=0;--I)(O&1<<I)!=0&&o.set(u),u++}}return o}}class Fn{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class zn{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class sn extends zn{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===sn.FNC1}}sn.FNC1="$";class Cr extends zn{constructor(t,r,i){super(t),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class dn extends zn{constructor(t,r,i){if(super(t),r<0||r>10||i<0||i>10)throw new ee;this.firstDigit=r,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===dn.FNC1}isSecondDigitFNC1(){return this.secondDigit===dn.FNC1}isAnyFNC1(){return this.firstDigit===dn.FNC1||this.secondDigit===dn.FNC1}}dn.FNC1=10;class Ae{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new re;let r=t.substring(0,2);for(let u of Ae.TWO_DIGIT_DATA_LENGTH)if(u[0]===r)return u[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(2,u[2],t):Ae.processFixedAI(2,u[1],t);if(t.length<3)throw new re;let i=t.substring(0,3);for(let u of Ae.THREE_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(3,u[2],t):Ae.processFixedAI(3,u[1],t);for(let u of Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,u[2],t):Ae.processFixedAI(4,u[1],t);if(t.length<4)throw new re;let o=t.substring(0,4);for(let u of Ae.FOUR_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,u[2],t):Ae.processFixedAI(4,u[1],t);throw new re}static processFixedAI(t,r,i){if(i.length<t)throw new re;let o=i.substring(0,t);if(i.length<t+r)throw new re;let u=i.substring(t,t+r),f=i.substring(t+r),m="("+o+")"+u,y=Ae.parseFieldsInGeneralPurpose(f);return y==null?m:m+y}static processVariableAI(t,r,i){let o=i.substring(0,t),u;i.length<t+r?u=i.length:u=t+r;let f=i.substring(t,u),m=i.substring(u),y="("+o+")"+f,E=Ae.parseFieldsInGeneralPurpose(m);return E==null?y:y+E}}Ae.VARIABLE_LENGTH=[],Ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ae.VARIABLE_LENGTH,20],["22",Ae.VARIABLE_LENGTH,29],["30",Ae.VARIABLE_LENGTH,8],["37",Ae.VARIABLE_LENGTH,8],["90",Ae.VARIABLE_LENGTH,30],["91",Ae.VARIABLE_LENGTH,30],["92",Ae.VARIABLE_LENGTH,30],["93",Ae.VARIABLE_LENGTH,30],["94",Ae.VARIABLE_LENGTH,30],["95",Ae.VARIABLE_LENGTH,30],["96",Ae.VARIABLE_LENGTH,30],["97",Ae.VARIABLE_LENGTH,3],["98",Ae.VARIABLE_LENGTH,30],["99",Ae.VARIABLE_LENGTH,30]],Ae.THREE_DIGIT_DATA_LENGTH=[["240",Ae.VARIABLE_LENGTH,30],["241",Ae.VARIABLE_LENGTH,30],["242",Ae.VARIABLE_LENGTH,6],["250",Ae.VARIABLE_LENGTH,30],["251",Ae.VARIABLE_LENGTH,30],["253",Ae.VARIABLE_LENGTH,17],["254",Ae.VARIABLE_LENGTH,20],["400",Ae.VARIABLE_LENGTH,30],["401",Ae.VARIABLE_LENGTH,30],["402",17],["403",Ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ae.VARIABLE_LENGTH,20],["421",Ae.VARIABLE_LENGTH,15],["422",3],["423",Ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ae.VARIABLE_LENGTH,15],["391",Ae.VARIABLE_LENGTH,18],["392",Ae.VARIABLE_LENGTH,15],["393",Ae.VARIABLE_LENGTH,18],["703",Ae.VARIABLE_LENGTH,30]],Ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ae.VARIABLE_LENGTH,20],["8003",Ae.VARIABLE_LENGTH,30],["8004",Ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ae.VARIABLE_LENGTH,30],["8008",Ae.VARIABLE_LENGTH,12],["8018",18],["8020",Ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ae.VARIABLE_LENGTH,70],["8200",Ae.VARIABLE_LENGTH,70]];class bn{constructor(t){this.buffer=new We,this.information=t}decodeAllCodes(t,r){let i=r,o=null;do{let u=this.decodeGeneralPurposeField(i,o),f=Ae.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&t.append(f),u.isRemaining()?o=""+u.getRemainingValue():o=null,i===u.getNewPosition())break;i=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new dn(this.information.getSize(),dn.FNC1,dn.FNC1):new dn(this.information.getSize(),u-1,dn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,o=(r-8)%11;return new dn(t+7,i,o)}extractNumericValueFromBitArray(t,r){return bn.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,i){let o=0;for(let u=0;u<i;++u)t.get(r+u)&&(o|=1<<i-u-1);return o}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new Cr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new Cr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let i=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(i!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Cr(this.current.getPosition(),this.buffer.toString()):r=new Cr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Fn(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Cr(this.current.getPosition(),this.buffer.toString());return new Fn(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Cr(this.current.getPosition(),this.buffer.toString());return new Fn(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Cr(this.current.getPosition(),this.buffer.toString());return new Fn(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<116)return!0;if(t+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,8);return o>=232&&o<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new sn(t+5,sn.FNC1);if(r>=5&&r<15)return new sn(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<90)return new sn(t+7,""+(i+1));if(i>=90&&i<116)return new sn(t+7,""+(i+7));let o=this.extractNumericValueFromBitArray(t,8),u;switch(o){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new ee}return new sn(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,6);return i>=16&&i<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new sn(t+5,sn.FNC1);if(r>=5&&r<15)return new sn(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,6);if(i>=32&&i<58)return new sn(t+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Mn("Decoding invalid alphanumeric value: "+i)}return new sn(t+6,o)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class hn{constructor(t){this.information=t,this.generalDecoder=new bn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class It extends hn{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)}encodeCompressedGtinWithoutAI(t,r,i){for(let o=0;o<4;++o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}It.appendCheckDigit(t,i)}static appendCheckDigit(t,r){let i=0;for(let o=0;o<13;o++){let u=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*u:u}i=10-i%10,i===10&&(i=0),t.append(i)}}It.GTIN_SIZE=40;class rr extends It{constructor(t){super(t)}parseInformation(){let t=new We;t.append("(01)");let r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(rr.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,rr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,rr.HEADER_SIZE+44)}}rr.HEADER_SIZE=4;class hr extends hn{constructor(t){super(t)}parseInformation(){let t=new We;return this.getGeneralDecoder().decodeAllCodes(t,hr.HEADER_SIZE)}}hr.HEADER_SIZE=5;class Yi extends It{constructor(t){super(t)}encodeCompressedWeight(t,r,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);let u=this.checkWeight(o),f=1e5;for(let m=0;m<5;++m)u/f===0&&t.append("0"),f/=10;t.append(u)}}class ir extends Yi{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=ir.HEADER_SIZE+Yi.GTIN_SIZE+ir.WEIGHT_SIZE)throw new re;let t=new We;return this.encodeCompressedGtin(t,ir.HEADER_SIZE),this.encodeCompressedWeight(t,ir.HEADER_SIZE+Yi.GTIN_SIZE,ir.WEIGHT_SIZE),t.toString()}}ir.HEADER_SIZE=5,ir.WEIGHT_SIZE=15;class ks extends ir{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class yi extends ir{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Gn extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Gn.HEADER_SIZE+It.GTIN_SIZE)throw new re;let t=new We;this.encodeCompressedGtin(t,Gn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Gn.HEADER_SIZE+It.GTIN_SIZE,Gn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Gn.HEADER_SIZE+It.GTIN_SIZE+Gn.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()}}Gn.HEADER_SIZE=8,Gn.LAST_DIGIT_SIZE=2;class Qt extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qt.HEADER_SIZE+It.GTIN_SIZE)throw new re;let t=new We;this.encodeCompressedGtin(t,Qt.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+It.GTIN_SIZE,Qt.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+It.GTIN_SIZE+Qt.LAST_DIGIT_SIZE,Qt.FIRST_THREE_DIGITS_SIZE);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Qt.HEADER_SIZE+It.GTIN_SIZE+Qt.LAST_DIGIT_SIZE+Qt.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}Qt.HEADER_SIZE=8,Qt.LAST_DIGIT_SIZE=2,Qt.FIRST_THREE_DIGITS_SIZE=10;class yt extends Yi{constructor(t,r,i){super(t),this.dateCode=i,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE+yt.DATE_SIZE)throw new re;let t=new We;return this.encodeCompressedGtin(t,yt.HEADER_SIZE),this.encodeCompressedWeight(t,yt.HEADER_SIZE+yt.GTIN_SIZE,yt.WEIGHT_SIZE),this.encodeCompressedDate(t,yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,yt.DATE_SIZE);if(i==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=i%32;i/=32;let u=i%12+1;i/=12;let f=i;f/10==0&&t.append("0"),t.append(f),u/10==0&&t.append("0"),t.append(u),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}yt.HEADER_SIZE=8,yt.WEIGHT_SIZE=20,yt.DATE_SIZE=16;function Ki(T){try{if(T.get(1))return new rr(T);if(!T.get(2))return new hr(T);switch(bn.extractNumericValueFromBitArray(T,1,4)){case 4:return new ks(T);case 5:return new yi(T)}switch(bn.extractNumericValueFromBitArray(T,1,5)){case 12:return new Gn(T);case 13:return new Qt(T)}switch(bn.extractNumericValueFromBitArray(T,1,7)){case 56:return new yt(T,"310","11");case 57:return new yt(T,"320","11");case 58:return new yt(T,"310","13");case 59:return new yt(T,"320","13");case 60:return new yt(T,"310","15");case 61:return new yt(T,"320","15");case 62:return new yt(T,"310","17");case 63:return new yt(T,"320","17")}}catch(t){throw console.log(t),new Mn("unknown decoder: "+T)}}class sr{constructor(t,r,i,o){this.leftchar=t,this.rightchar=r,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof sr?sr.equalsOrNull(t.leftchar,r.leftchar)&&sr.equalsOrNull(t.rightchar,r.rightchar)&&sr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:sr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class gn{constructor(t,r,i){this.pairs=t,this.rowNumber=r,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof gn?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let i;return t.forEach((o,u)=>{r.forEach(f=>{o.getLeftChar().getValue()===f.getLeftChar().getValue()&&o.getRightChar().getValue()===f.getRightChar().getValue()&&o.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(i=!0)})}),i}}class ge extends Ce{constructor(t){super(...arguments),this.pairs=new Array(ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return ge.constructResult(this.decodeRow2pairs(t,r))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,ge.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(u){if(u instanceof re){if(!this.pairs.length)throw new re;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new re}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let i=r;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(o.getPairs()),!ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(o);try{return this.checkRows(u,i+1)}catch(f){this.verbose&&console.log(f)}}throw new re}static isValidSequence(t){for(let r of ge.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let i=!0;for(let o=0;o<t.length;o++)if(t[o].getFinderPattern().getValue()!=r[o]){i=!1;break}if(i)return!0}return!1}storeRow(t,r){let i=0,o=!1,u=!1;for(;i<this.rows.length;){let f=this.rows[i];if(f.getRowNumber()>t){u=f.isEquivalent(this.pairs);break}o=f.isEquivalent(this.pairs),i++}u||o||ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new gn(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let i of r)if(i.getPairs().length!==t.length){for(let o of i.getPairs())for(let u of t)if(sr.equals(o,u))break}}static isPartialRow(t,r){for(let i of r){let o=!0;for(let u of t){let f=!1;for(let m of i.getPairs())if(u.equals(m)){f=!0;break}if(!f){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=nr.buildBitArray(t),o=Ki(r).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),m=[u[0],u[1],f[0],f[1]];return new Ee(o,null,null,m,pe.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),u=2;for(let m=1;m<this.pairs.size();++m){let y=this.pairs.get(m);o+=y.getLeftChar().getChecksumPortion(),u++;let E=y.getRightChar();E!=null&&(o+=E.getChecksumPortion(),u++)}return o%=211,211*(u-4)+o==r.getValue()}static getNextSecondBar(t,r){let i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i}retrieveNextPair(t,r,i){let o=r.length%2==0;this.startFromEven&&(o=!o);let u,f=!0,m=-1;do this.findNextPair(t,r,m),u=this.parseFoundFinderPattern(t,i,o),u==null?m=ge.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(t,u,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new re;let E;try{E=this.decodeDataCharacter(t,u,o,!1)}catch(C){E=null,this.verbose&&console.log(C)}return new sr(y,E,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f;i>=0?f=i:this.isEmptyPair(r)?f=0:f=r[r.length-1].getFinderPattern().getStartEnd()[1];let m=r.length%2!=0;this.startFromEven&&(m=!m);let y=!1;for(;f<u&&(y=!t.get(f),!!y);)f++;let E=0,C=f;for(let O=f;O<u;O++)if(t.get(O)!=y)o[E]++;else{if(E==3){if(m&&ge.reverseCounters(o),ge.isFinderPattern(o)){this.startEnd[0]=C,this.startEnd[1]=O;return}m&&ge.reverseCounters(o),C+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,E--}else E++;o[E]=1,y=!y}throw new re}static reverseCounters(t){let r=t.length;for(let i=0;i<r/2;++i){let o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}}parseFoundFinderPattern(t,r,i){let o,u,f;if(i){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,o=this.startEnd[0]-E,u=E,f=this.startEnd[1]}else u=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),o=f-this.startEnd[1];let m=this.getDecodeFinderCounters();G.arraycopy(m,0,m,1,m.length-1),m[0]=o;let y;try{y=this.parseFinderValue(m,ge.FINDER_PATTERNS)}catch{return null}return new Qe(y,[u,f],u,f,r)}decodeDataCharacter(t,r,i,o){let u=this.getDataCharacterCounters();for(let jt=0;jt<u.length;jt++)u[jt]=0;if(o)ge.recordPatternInReverse(t,r.getStartEnd()[0],u);else{ge.recordPattern(t,r.getStartEnd()[1],u);for(let jt=0,Un=u.length-1;jt<Un;jt++,Un--){let or=u[jt];u[jt]=u[Un],u[Un]=or}}let f=17,m=Xe.sum(new Int32Array(u))/f,y=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-y)/y>.3)throw new re;let E=this.getOddCounts(),C=this.getEvenCounts(),O=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let jt=0;jt<u.length;jt++){let Un=1*u[jt]/m,or=Un+.5;if(or<1){if(Un<.3)throw new re;or=1}else if(or>8){if(Un>8.7)throw new re;or=8}let as=jt/2;(jt&1)==0?(E[as]=or,O[as]=Un-or):(C[as]=or,I[as]=Un-or)}this.adjustOddEvenCounts(f);let L=4*r.getValue()+(i?0:2)+(o?0:1)-1,P=0,z=0;for(let jt=E.length-1;jt>=0;jt--){if(ge.isNotA1left(r,i,o)){let Un=ge.WEIGHTS[L][2*jt];z+=E[jt]*Un}P+=E[jt]}let X=0;for(let jt=C.length-1;jt>=0;jt--)if(ge.isNotA1left(r,i,o)){let Un=ge.WEIGHTS[L][2*jt+1];X+=C[jt]*Un}let ne=z+X;if((P&1)!=0||P>13||P<4)throw new re;let be=(13-P)/2,ye=ge.SYMBOL_WIDEST[be],me=9-ye,at=Rt.getRSSvalue(E,ye,!0),Ke=Rt.getRSSvalue(C,me,!1),mn=ge.EVEN_TOTAL_SUBSET[be],gr=ge.GSUM[be],Vn=at*mn+Ke+gr;return new je(Vn,ne)}static isNotA1left(t,r,i){return!(t.getValue()==0&&r&&i)}adjustOddEvenCounts(t){let r=Xe.sum(new Int32Array(this.getOddCounts())),i=Xe.sum(new Int32Array(this.getEvenCounts())),o=!1,u=!1;r>13?u=!0:r<4&&(o=!0);let f=!1,m=!1;i>13?m=!0:i<4&&(f=!0);let y=r+i-t,E=(r&1)==1,C=(i&1)==0;if(y==1)if(E){if(C)throw new re;u=!0}else{if(!C)throw new re;m=!0}else if(y==-1)if(E){if(C)throw new re;o=!0}else{if(!C)throw new re;f=!0}else if(y==0){if(E){if(!C)throw new re;r<i?(o=!0,m=!0):(u=!0,f=!0)}else if(C)throw new re}else throw new re;if(o){if(u)throw new re;ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new re;ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ge.SYMBOL_WIDEST=[7,5,4,3,1],ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ge.GSUM=[0,348,1388,2948,3988],ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ge.FINDER_PAT_A=0,ge.FINDER_PAT_B=1,ge.FINDER_PAT_C=2,ge.FINDER_PAT_D=3,ge.FINDER_PAT_E=4,ge.FINDER_PAT_F=5,ge.FINDER_PATTERN_SEQUENCES=[[ge.FINDER_PAT_A,ge.FINDER_PAT_A],[ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B],[ge.FINDER_PAT_A,ge.FINDER_PAT_C,ge.FINDER_PAT_B,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_C],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F]],ge.MAX_PAIRS=11;class ho extends je{constructor(t,r,i){super(t,r),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class kt extends Ce{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,i){const o=this.decodePair(r,!1,t,i);kt.addOrTally(this.possibleLeftPairs,o),r.reverse();let u=this.decodePair(r,!0,t,i);kt.addOrTally(this.possibleRightPairs,u),r.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&kt.checkChecksum(f,m))return kt.constructResult(f,m)}throw new re}static addOrTally(t,r){if(r==null)return;let i=!1;for(let o of t)if(o.getValue()===r.getValue()){o.incrementCount(),i=!0;break}i||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),u=new We;for(let E=13-o.length;E>0;E--)u.append("0");u.append(o);let f=0;for(let E=0;E<13;E++){let C=u.charAt(E).charCodeAt(0)-48;f+=(E&1)===0?3*C:C}f=10-f%10,f===10&&(f=0),u.append(f.toString());let m=t.getFinderPattern().getResultPoints(),y=r.getFinderPattern().getResultPoints();return new Ee(u.toString(),null,0,[m[0],m[1],y[0],y[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(t,r){let i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(t,r,i,o){try{let u=this.findFinderPattern(t,r),f=this.parseFoundFinderPattern(t,i,r,u),m=o==null?null:o.get(_e.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(u[0]+u[1])/2;r&&(C=t.getSize()-1-C),m.foundPossibleResultPoint(new Te(C,i))}let y=this.decodeDataCharacter(t,f,!0),E=this.decodeDataCharacter(t,f,!1);return new ho(1597*y.getValue()+E.getValue(),y.getChecksumPortion()+4*E.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,r,i){let o=this.getDataCharacterCounters();for(let X=0;X<o.length;X++)o[X]=0;if(i)Ft.recordPatternInReverse(t,r.getStartEnd()[0],o);else{Ft.recordPattern(t,r.getStartEnd()[1]+1,o);for(let X=0,ne=o.length-1;X<ne;X++,ne--){let be=o[X];o[X]=o[ne],o[ne]=be}}let u=i?16:15,f=Xe.sum(new Int32Array(o))/u,m=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let X=0;X<o.length;X++){let ne=o[X]/f,be=Math.floor(ne+.5);be<1?be=1:be>8&&(be=8);let ye=Math.floor(X/2);(X&1)===0?(m[ye]=be,E[ye]=ne-be):(y[ye]=be,C[ye]=ne-be)}this.adjustOddEvenCounts(i,u);let O=0,I=0;for(let X=m.length-1;X>=0;X--)I*=9,I+=m[X],O+=m[X];let L=0,P=0;for(let X=y.length-1;X>=0;X--)L*=9,L+=y[X],P+=y[X];let z=I+3*L;if(i){if((O&1)!==0||O>12||O<4)throw new re;let X=(12-O)/2,ne=kt.OUTSIDE_ODD_WIDEST[X],be=9-ne,ye=Rt.getRSSvalue(m,ne,!1),me=Rt.getRSSvalue(y,be,!0),at=kt.OUTSIDE_EVEN_TOTAL_SUBSET[X],Ke=kt.OUTSIDE_GSUM[X];return new je(ye*at+me+Ke,z)}else{if((P&1)!==0||P>10||P<4)throw new re;let X=(10-P)/2,ne=kt.INSIDE_ODD_WIDEST[X],be=9-ne,ye=Rt.getRSSvalue(m,ne,!0),me=Rt.getRSSvalue(y,be,!1),at=kt.INSIDE_ODD_TOTAL_SUBSET[X],Ke=kt.INSIDE_GSUM[X];return new je(me*at+ye+Ke,z)}}findFinderPattern(t,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=t.getSize(),u=!1,f=0;for(;f<o&&(u=!t.get(f),r!==u);)f++;let m=0,y=f;for(let E=f;E<o;E++)if(t.get(E)!==u)i[m]++;else{if(m===3){if(Ce.isFinderPattern(i))return[y,E];y+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,m--}else m++;i[m]=1,u=!u}throw new re}parseFoundFinderPattern(t,r,i,o){let u=t.get(o[0]),f=o[0]-1;for(;f>=0&&u!==t.get(f);)f--;f++;const m=o[0]-f,y=this.getDecodeFinderCounters(),E=new Int32Array(y.length);G.arraycopy(y,0,E,1,y.length-1),E[0]=m;const C=this.parseFinderValue(E,kt.FINDER_PATTERNS);let O=f,I=o[1];return i&&(O=t.getSize()-1-O,I=t.getSize()-1-I),new Qe(C,[f,o[1]],O,I,r)}adjustOddEvenCounts(t,r){let i=Xe.sum(new Int32Array(this.getOddCounts())),o=Xe.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,m=!1,y=!1;t?(i>12?f=!0:i<4&&(u=!0),o>12?y=!0:o<4&&(m=!0)):(i>11?f=!0:i<5&&(u=!0),o>10?y=!0:o<4&&(m=!0));let E=i+o-r,C=(i&1)===(t?1:0),O=(o&1)===1;if(E===1)if(C){if(O)throw new re;f=!0}else{if(!O)throw new re;y=!0}else if(E===-1)if(C){if(O)throw new re;u=!0}else{if(!O)throw new re;m=!0}else if(E===0){if(C){if(!O)throw new re;i<o?(u=!0,y=!0):(f=!0,m=!0)}else if(O)throw new re}else throw new re;if(u){if(f)throw new re;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new re;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],kt.OUTSIDE_GSUM=[0,161,961,2015,2715],kt.INSIDE_GSUM=[0,336,1036,1516],kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],kt.INSIDE_ODD_WIDEST=[2,4,6,8],kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Sr extends Ft{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const i=t?t.get(_e.POSSIBLE_FORMATS):null,o=t&&t.get(_e.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(pe.EAN_13)||i.includes(pe.UPC_A)||i.includes(pe.EAN_8)||i.includes(pe.UPC_E))&&this.readers.push(new Y(t)),i.includes(pe.CODE_39)&&this.readers.push(new Bt(o)),i.includes(pe.CODE_128)&&this.readers.push(new we),i.includes(pe.ITF)&&this.readers.push(new Ze),i.includes(pe.RSS_14)&&this.readers.push(new kt),i.includes(pe.RSS_EXPANDED)&&this.readers.push(new ge(this.verbose))):(this.readers.push(new Y(t)),this.readers.push(new Bt),this.readers.push(new Y(t)),this.readers.push(new we),this.readers.push(new Ze),this.readers.push(new kt),this.readers.push(new ge(this.verbose)))}decodeRow(t,r,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new re}reset(){this.readers.forEach(t=>t.reset())}}class sc extends ve{constructor(t=500,r){super(new Sr(r),t,r)}}class _t{constructor(t,r,i){this.ecCodewords=t,this.ecBlocks=[r],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Et{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(t,r,i,o,u,f){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=u,this.ecBlocks=f;let m=0;const y=f.getECCodewords(),E=f.getECBlocks();for(let C of E)m+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new ee;for(let i of ht.VERSIONS)if(i.symbolSizeRows===t&&i.symbolSizeColumns===r)return i;throw new ee}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new _t(5,new Et(1,3))),new ht(2,12,12,10,10,new _t(7,new Et(1,5))),new ht(3,14,14,12,12,new _t(10,new Et(1,8))),new ht(4,16,16,14,14,new _t(12,new Et(1,12))),new ht(5,18,18,16,16,new _t(14,new Et(1,18))),new ht(6,20,20,18,18,new _t(18,new Et(1,22))),new ht(7,22,22,20,20,new _t(20,new Et(1,30))),new ht(8,24,24,22,22,new _t(24,new Et(1,36))),new ht(9,26,26,24,24,new _t(28,new Et(1,44))),new ht(10,32,32,14,14,new _t(36,new Et(1,62))),new ht(11,36,36,16,16,new _t(42,new Et(1,86))),new ht(12,40,40,18,18,new _t(48,new Et(1,114))),new ht(13,44,44,20,20,new _t(56,new Et(1,144))),new ht(14,48,48,22,22,new _t(68,new Et(1,174))),new ht(15,52,52,24,24,new _t(42,new Et(2,102))),new ht(16,64,64,14,14,new _t(56,new Et(2,140))),new ht(17,72,72,16,16,new _t(36,new Et(4,92))),new ht(18,80,80,18,18,new _t(48,new Et(4,114))),new ht(19,88,88,20,20,new _t(56,new Et(4,144))),new ht(20,96,96,22,22,new _t(68,new Et(4,174))),new ht(21,104,104,24,24,new _t(56,new Et(6,136))),new ht(22,120,120,18,18,new _t(68,new Et(6,175))),new ht(23,132,132,20,20,new _t(62,new Et(8,163))),new ht(24,144,144,22,22,new _t(62,new Et(8,156),new Et(2,155))),new ht(25,8,18,6,16,new _t(7,new Et(1,5))),new ht(26,8,32,6,14,new _t(11,new Et(1,10))),new ht(27,12,26,10,24,new _t(14,new Et(1,16))),new ht(28,12,36,10,16,new _t(18,new Et(1,22))),new ht(29,16,36,14,16,new _t(24,new Et(1,32))),new ht(30,16,48,14,22,new _t(28,new Et(1,49)))]}}ht.VERSIONS=ht.buildVersions();class Wi{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new ee;this.version=Wi.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new bt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),i=t.getWidth();return ht.getVersionForDimensions(r,i)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,i=4,o=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let m=!1,y=!1,E=!1,C=!1;do if(i===u&&o===0&&!m)t[r++]=this.readCorner1(u,f)&255,i-=2,o+=2,m=!0;else if(i===u-2&&o===0&&(f&3)!==0&&!y)t[r++]=this.readCorner2(u,f)&255,i-=2,o+=2,y=!0;else if(i===u+4&&o===2&&(f&7)===0&&!E)t[r++]=this.readCorner3(u,f)&255,i-=2,o+=2,E=!0;else if(i===u-2&&o===0&&(f&7)===4&&!C)t[r++]=this.readCorner4(u,f)&255,i-=2,o+=2,C=!0;else{do i<u&&o>=0&&!this.readMappingMatrix.get(o,i)&&(t[r++]=this.readUtah(i,o,u,f)&255),i-=2,o+=2;while(i>=0&&o<f);i+=1,o+=3;do i>=0&&o<f&&!this.readMappingMatrix.get(o,i)&&(t[r++]=this.readUtah(i,o,u,f)&255),i+=2,o-=2;while(i<u&&o>=0);i+=3,o+=1}while(i<u||o<f);if(r!==this.version.getTotalCodewords())throw new ee;return t}readModule(t,r,i,o){return t<0&&(t+=i,r+=4-(i+4&7)),r<0&&(r+=o,t+=4-(o+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,i,o){let u=0;return this.readModule(t-2,r-2,i,o)&&(u|=1),u<<=1,this.readModule(t-2,r-1,i,o)&&(u|=1),u<<=1,this.readModule(t-1,r-2,i,o)&&(u|=1),u<<=1,this.readModule(t-1,r-1,i,o)&&(u|=1),u<<=1,this.readModule(t-1,r,i,o)&&(u|=1),u<<=1,this.readModule(t,r-2,i,o)&&(u|=1),u<<=1,this.readModule(t,r-1,i,o)&&(u|=1),u<<=1,this.readModule(t,r,i,o)&&(u|=1),u}readCorner1(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,1,t,r)&&(i|=1),i<<=1,this.readModule(t-1,2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}readCorner2(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-4,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner3(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-3,t,r)&&(i|=1),i<<=1,this.readModule(1,r-2,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner4(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new R("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=r/o|0,m=i/u|0,y=f*o,E=m*u,C=new bt(E,y);for(let O=0;O<f;++O){const I=O*o;for(let L=0;L<m;++L){const P=L*u;for(let z=0;z<o;++z){const X=O*(o+2)+1+z,ne=I+z;for(let be=0;be<u;++be){const ye=L*(u+2)+1+be;if(t.get(ye,X)){const me=P+be;C.set(me,ne)}}}}}return C}}class Zi{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const i=r.getECBlocks();let o=0;const u=i.getECBlocks();for(let z of u)o+=z.getCount();const f=new Array(o);let m=0;for(let z of u)for(let X=0;X<z.getCount();X++){const ne=z.getDataCodewords(),be=i.getECCodewords()+ne;f[m++]=new Zi(ne,new Uint8Array(be))}const E=f[0].codewords.length-i.getECCodewords(),C=E-1;let O=0;for(let z=0;z<C;z++)for(let X=0;X<m;X++)f[X].codewords[z]=t[O++];const I=r.getVersionNumber()===24,L=I?8:m;for(let z=0;z<L;z++)f[z].codewords[E-1]=t[O++];const P=f[0].codewords.length;for(let z=E;z<P;z++)for(let X=0;X<m;X++){const ne=I?(X+8)%m:X,be=I&&ne>7?z-1:z;f[ne].codewords[be]=t[O++]}if(O!==t.length)throw new R;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Tr{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new R(""+t);let r=0,i=this.bitOffset,o=this.byteOffset;const u=this.bytes;if(i>0){const f=8-i,m=t<f?t:f,y=f-m,E=255>>8-m<<y;r=(u[o]&E)>>y,t-=m,i+=m,i===8&&(i=0,o++)}if(t>0){for(;t>=8;)r=r<<8|u[o]&255,o++,t-=8;if(t>0){const f=8-t,m=255>>f<<f;r=r<<t|(u[o]&m)>>f,i+=t}}return this.bitOffset=i,this.byteOffset=o,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class Wr{static decode(t){const r=new Tr(t),i=new We,o=new We,u=new Array;let f=Ct.ASCII_ENCODE;do if(f===Ct.ASCII_ENCODE)f=this.decodeAsciiSegment(r,i,o);else{switch(f){case Ct.C40_ENCODE:this.decodeC40Segment(r,i);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(r,i);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,i);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(r,i);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(r,i,u);break;default:throw new ee}f=Ct.ASCII_ENCODE}while(f!==Ct.PAD_ENCODE&&r.available()>0);return o.length()>0&&i.append(o.toString()),new Nt(t,i.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,r,i){let o=!1;do{let u=t.readBits(8);if(u===0)throw new ee;if(u<=128)return o&&(u+=128),r.append(String.fromCharCode(u-1)),Ct.ASCII_ENCODE;if(u===129)return Ct.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&r.append("0"),r.append(""+f)}else switch(u){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),i.insert(0,"");break;case 237:r.append("[)>06"),i.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new ee;break}}while(t.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(t,r){let i=!1;const o=[];let u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let m=0;m<3;m++){const y=o[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[y];i?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),i=!1):r.append(E)}else throw new ee;break;case 1:i?(r.append(String.fromCharCode(y+128)),i=!1):r.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[y];i?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),i=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:i=!0;break;default:throw new ee}u=0;break;case 3:i?(r.append(String.fromCharCode(y+224)),i=!1):r.append(String.fromCharCode(y+96)),u=0;break;default:throw new ee}}}while(t.available()>0)}static decodeTextSegment(t,r){let i=!1,o=[],u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let m=0;m<3;m++){const y=o[m];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[y];i?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),i=!1):r.append(E)}else throw new ee;break;case 1:i?(r.append(String.fromCharCode(y+128)),i=!1):r.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[y];i?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),i=!1):r.append(E)}else switch(y){case 27:r.append("");break;case 30:i=!0;break;default:throw new ee}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[y];i?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),i=!1):r.append(E),u=0}else throw new ee;break;default:throw new ee}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const i=[];do{if(t.available()===8)return;const o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),i);for(let u=0;u<3;u++){const f=i[u];switch(f){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(f<14)r.append(String.fromCharCode(f+44));else if(f<40)r.append(String.fromCharCode(f+51));else throw new ee;break}}}while(t.available()>0)}static parseTwoBytes(t,r,i){let o=(t<<8)+r-1,u=Math.floor(o/1600);i[0]=u,o-=u*1600,u=Math.floor(o/40),i[1]=u,i[2]=o-u*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let i=0;i<4;i++){let o=t.readBits(6);if(o===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(o&32)===0&&(o|=64),r.append(String.fromCharCode(o))}}while(t.available()>0)}static decodeBase256Segment(t,r,i){let o=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),o++);let f;if(u===0?f=t.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(t.readBits(8),o++),f<0)throw new ee;const m=new Uint8Array(f);for(let y=0;y<f;y++){if(t.available()<8)throw new ee;m[y]=this.unrandomize255State(t.readBits(8),o++)}i.push(m);try{r.append(At.decode(m,Oe.ISO88591))}catch(y){throw new Mn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,r){const i=149*r%255+1,o=t-i;return o>=0?o:o+256}}Wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wr.TEXT_SHIFT2_SET_CHARS=Wr.C40_SHIFT2_SET_CHARS,Wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ac{constructor(){this.rsDecoder=new Er($e.DATA_MATRIX_FIELD_256)}decode(t){const r=new Wi(t),i=r.getVersion(),o=r.readCodewords(),u=Zi.getDataBlocks(o,i);let f=0;for(let E of u)f+=E.getNumDataCodewords();const m=new Uint8Array(f),y=u.length;for(let E=0;E<y;E++){const C=u[E],O=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(O,I);for(let L=0;L<I;L++)m[L*y+E]=O[L]}return Wr.decode(m)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new j}for(let o=0;o<r;o++)t[o]=i[o]}}class Jt{constructor(t){this.image=t,this.rectangleDetector=new gt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new re;r=this.shiftToModuleCenter(r);const i=r[0],o=r[1],u=r[2],f=r[3];let m=this.transitionsBetween(i,f)+1,y=this.transitionsBetween(u,f)+1;(m&1)===1&&(m+=1),(y&1)===1&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));let E=Jt.sampleGrid(this.image,i,o,u,f,m,y);return new vt(E,[i,o,u,f])}static shiftPoint(t,r,i){let o=(r.getX()-t.getX())/(i+1),u=(r.getY()-t.getY())/(i+1);return new Te(t.getX()+o,t.getY()+u)}static moveAway(t,r,i){let o=t.getX(),u=t.getY();return o<r?o-=1:o+=1,u<i?u-=1:u+=1,new Te(o,u)}detectSolid1(t){let r=t[0],i=t[1],o=t[3],u=t[2],f=this.transitionsBetween(r,i),m=this.transitionsBetween(i,o),y=this.transitionsBetween(o,u),E=this.transitionsBetween(u,r),C=f,O=[u,r,i,o];return C>m&&(C=m,O[0]=r,O[1]=i,O[2]=o,O[3]=u),C>y&&(C=y,O[0]=i,O[1]=o,O[2]=u,O[3]=r),C>E&&(O[0]=o,O[1]=u,O[2]=r,O[3]=i),O}detectSolid2(t){let r=t[0],i=t[1],o=t[2],u=t[3],f=this.transitionsBetween(r,u),m=Jt.shiftPoint(i,o,(f+1)*4),y=Jt.shiftPoint(o,i,(f+1)*4),E=this.transitionsBetween(m,r),C=this.transitionsBetween(y,u);return E<C?(t[0]=r,t[1]=i,t[2]=o,t[3]=u):(t[0]=i,t[1]=o,t[2]=u,t[3]=r),t}correctTopRight(t){let r=t[0],i=t[1],o=t[2],u=t[3],f=this.transitionsBetween(r,u),m=this.transitionsBetween(i,u),y=Jt.shiftPoint(r,i,(m+1)*4),E=Jt.shiftPoint(o,i,(f+1)*4);f=this.transitionsBetween(y,u),m=this.transitionsBetween(E,u);let C=new Te(u.getX()+(o.getX()-i.getX())/(f+1),u.getY()+(o.getY()-i.getY())/(f+1)),O=new Te(u.getX()+(r.getX()-i.getX())/(m+1),u.getY()+(r.getY()-i.getY())/(m+1));if(!this.isValid(C))return this.isValid(O)?O:null;if(!this.isValid(O))return C;let I=this.transitionsBetween(y,C)+this.transitionsBetween(E,C),L=this.transitionsBetween(y,O)+this.transitionsBetween(E,O);return I>L?C:O}shiftToModuleCenter(t){let r=t[0],i=t[1],o=t[2],u=t[3],f=this.transitionsBetween(r,u)+1,m=this.transitionsBetween(o,u)+1,y=Jt.shiftPoint(r,i,m*4),E=Jt.shiftPoint(o,i,f*4);f=this.transitionsBetween(y,u)+1,m=this.transitionsBetween(E,u)+1,(f&1)===1&&(f+=1),(m&1)===1&&(m+=1);let C=(r.getX()+i.getX()+o.getX()+u.getX())/4,O=(r.getY()+i.getY()+o.getY()+u.getY())/4;r=Jt.moveAway(r,C,O),i=Jt.moveAway(i,C,O),o=Jt.moveAway(o,C,O),u=Jt.moveAway(u,C,O);let I,L;return y=Jt.shiftPoint(r,i,m*4),y=Jt.shiftPoint(y,u,f*4),I=Jt.shiftPoint(i,r,m*4),I=Jt.shiftPoint(I,o,f*4),E=Jt.shiftPoint(o,u,m*4),E=Jt.shiftPoint(E,i,f*4),L=Jt.shiftPoint(u,o,m*4),L=Jt.shiftPoint(L,r,f*4),[y,I,E,L]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,i,o,u,f,m){return tr.getInstance().sampleGrid(t,f,m,.5,.5,f-.5,.5,f-.5,m-.5,.5,m-.5,r.getX(),r.getY(),u.getX(),u.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(t,r){let i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),u=Math.trunc(r.getX()),f=Math.trunc(r.getY()),m=Math.abs(f-o)>Math.abs(u-i);if(m){let z=i;i=o,o=z,z=u,u=f,f=z}let y=Math.abs(u-i),E=Math.abs(f-o),C=-y/2,O=o<f?1:-1,I=i<u?1:-1,L=0,P=this.image.get(m?o:i,m?i:o);for(let z=i,X=o;z!==u;z+=I){let ne=this.image.get(m?X:z,m?z:X);if(ne!==P&&(L++,P=ne),C+=E,C>0){if(X===f)break;X+=O,C-=y}}return L}}class Zr{constructor(){this.decoder=new ac}decode(t,r=null){let i,o;if(r!=null&&r.has(_e.PURE_BARCODE)){const E=Zr.extractPureBits(t.getBlackMatrix());i=this.decoder.decode(E),o=Zr.NO_POINTS}else{const E=new Jt(t.getBlackMatrix()).detect();i=this.decoder.decode(E.getBits()),o=E.getPoints()}const u=i.getRawBytes(),f=new Ee(i.getText(),u,8*u.length,o,pe.DATA_MATRIX,G.currentTimeMillis()),m=i.getByteSegments();m!=null&&f.putMetadata(st.BYTE_SEGMENTS,m);const y=i.getECLevel();return y!=null&&f.putMetadata(st.ERROR_CORRECTION_LEVEL,y),f}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r==null||i==null)throw new re;const o=this.moduleSize(r,t);let u=r[1];const f=i[1];let m=r[0];const E=(i[0]-m+1)/o,C=(f-u+1)/o;if(E<=0||C<=0)throw new re;const O=o/2;u+=O,m+=O;const I=new bt(E,C);for(let L=0;L<C;L++){const P=u+L*o;for(let z=0;z<E;z++)t.get(m+z*o,P)&&I.set(z,L)}return I}static moduleSize(t,r){const i=r.getWidth();let o=t[0];const u=t[1];for(;o<i&&r.get(o,u);)o++;if(o===i)throw new re;const f=o-t[0];if(f===0)throw new re;return f}}Zr.NO_POINTS=[];class ha extends ve{constructor(t=500){super(new Zr,t)}}var Qi;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(Qi||(Qi={}));class lt{constructor(t,r,i){this.value=t,this.stringValue=r,this.bits=i,lt.FOR_BITS.set(i,this),lt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return lt.L;case"M":return lt.M;case"Q":return lt.Q;case"H":return lt.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof lt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=lt.FOR_BITS.size)throw new R;return lt.FOR_BITS.get(t)}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.L=new lt(Qi.L,"L",1),lt.M=new lt(Qi.M,"M",0),lt.Q=new lt(Qi.Q,"Q",3),lt.H=new lt(Qi.H,"H",2);class Cn{constructor(t){this.errorCorrectionLevel=lt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return W.bitCount(t^r)}static decodeFormatInformation(t,r){const i=Cn.doDecodeFormatInformation(t,r);return i!==null?i:Cn.doDecodeFormatInformation(t^Cn.FORMAT_INFO_MASK_QR,r^Cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let i=Number.MAX_SAFE_INTEGER,o=0;for(const u of Cn.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===t||f===r)return new Cn(u[1]);let m=Cn.numBitsDiffering(t,f);m<i&&(o=u[1],i=m),t!==r&&(m=Cn.numBitsDiffering(r,f),m<i&&(o=u[1],i=m))}return i<=3?new Cn(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Cn))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Cn.FORMAT_INFO_MASK_QR=21522,Cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const i of r)t+=i.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class B{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ie{constructor(t,r,...i){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=i;let o=0;const u=i[0].getECCodewordsPerBlock(),f=i[0].getECBlocks();for(const m of f)o+=m.getCount()*(m.getDataCodewords()+u);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new ee;try{return this.getVersionForNumber((t-17)/4)}catch{throw new ee}}static getVersionForNumber(t){if(t<1||t>40)throw new R;return Ie.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<Ie.VERSION_DECODE_INFO.length;o++){const u=Ie.VERSION_DECODE_INFO[o];if(u===t)return Ie.getVersionForNumber(o+7);const f=Cn.numBitsDiffering(t,u);f<r&&(i=o+7,r=f)}return r<=3?Ie.getVersionForNumber(i):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new bt(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const u=this.alignmentPatternCenters[o]-2;for(let f=0;f<i;f++)o===0&&(f===0||f===i-1)||o===i-1&&f===0||r.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}Ie.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ie.VERSIONS=[new Ie(1,new Int32Array(0),new K(7,new B(1,19)),new K(10,new B(1,16)),new K(13,new B(1,13)),new K(17,new B(1,9))),new Ie(2,Int32Array.from([6,18]),new K(10,new B(1,34)),new K(16,new B(1,28)),new K(22,new B(1,22)),new K(28,new B(1,16))),new Ie(3,Int32Array.from([6,22]),new K(15,new B(1,55)),new K(26,new B(1,44)),new K(18,new B(2,17)),new K(22,new B(2,13))),new Ie(4,Int32Array.from([6,26]),new K(20,new B(1,80)),new K(18,new B(2,32)),new K(26,new B(2,24)),new K(16,new B(4,9))),new Ie(5,Int32Array.from([6,30]),new K(26,new B(1,108)),new K(24,new B(2,43)),new K(18,new B(2,15),new B(2,16)),new K(22,new B(2,11),new B(2,12))),new Ie(6,Int32Array.from([6,34]),new K(18,new B(2,68)),new K(16,new B(4,27)),new K(24,new B(4,19)),new K(28,new B(4,15))),new Ie(7,Int32Array.from([6,22,38]),new K(20,new B(2,78)),new K(18,new B(4,31)),new K(18,new B(2,14),new B(4,15)),new K(26,new B(4,13),new B(1,14))),new Ie(8,Int32Array.from([6,24,42]),new K(24,new B(2,97)),new K(22,new B(2,38),new B(2,39)),new K(22,new B(4,18),new B(2,19)),new K(26,new B(4,14),new B(2,15))),new Ie(9,Int32Array.from([6,26,46]),new K(30,new B(2,116)),new K(22,new B(3,36),new B(2,37)),new K(20,new B(4,16),new B(4,17)),new K(24,new B(4,12),new B(4,13))),new Ie(10,Int32Array.from([6,28,50]),new K(18,new B(2,68),new B(2,69)),new K(26,new B(4,43),new B(1,44)),new K(24,new B(6,19),new B(2,20)),new K(28,new B(6,15),new B(2,16))),new Ie(11,Int32Array.from([6,30,54]),new K(20,new B(4,81)),new K(30,new B(1,50),new B(4,51)),new K(28,new B(4,22),new B(4,23)),new K(24,new B(3,12),new B(8,13))),new Ie(12,Int32Array.from([6,32,58]),new K(24,new B(2,92),new B(2,93)),new K(22,new B(6,36),new B(2,37)),new K(26,new B(4,20),new B(6,21)),new K(28,new B(7,14),new B(4,15))),new Ie(13,Int32Array.from([6,34,62]),new K(26,new B(4,107)),new K(22,new B(8,37),new B(1,38)),new K(24,new B(8,20),new B(4,21)),new K(22,new B(12,11),new B(4,12))),new Ie(14,Int32Array.from([6,26,46,66]),new K(30,new B(3,115),new B(1,116)),new K(24,new B(4,40),new B(5,41)),new K(20,new B(11,16),new B(5,17)),new K(24,new B(11,12),new B(5,13))),new Ie(15,Int32Array.from([6,26,48,70]),new K(22,new B(5,87),new B(1,88)),new K(24,new B(5,41),new B(5,42)),new K(30,new B(5,24),new B(7,25)),new K(24,new B(11,12),new B(7,13))),new Ie(16,Int32Array.from([6,26,50,74]),new K(24,new B(5,98),new B(1,99)),new K(28,new B(7,45),new B(3,46)),new K(24,new B(15,19),new B(2,20)),new K(30,new B(3,15),new B(13,16))),new Ie(17,Int32Array.from([6,30,54,78]),new K(28,new B(1,107),new B(5,108)),new K(28,new B(10,46),new B(1,47)),new K(28,new B(1,22),new B(15,23)),new K(28,new B(2,14),new B(17,15))),new Ie(18,Int32Array.from([6,30,56,82]),new K(30,new B(5,120),new B(1,121)),new K(26,new B(9,43),new B(4,44)),new K(28,new B(17,22),new B(1,23)),new K(28,new B(2,14),new B(19,15))),new Ie(19,Int32Array.from([6,30,58,86]),new K(28,new B(3,113),new B(4,114)),new K(26,new B(3,44),new B(11,45)),new K(26,new B(17,21),new B(4,22)),new K(26,new B(9,13),new B(16,14))),new Ie(20,Int32Array.from([6,34,62,90]),new K(28,new B(3,107),new B(5,108)),new K(26,new B(3,41),new B(13,42)),new K(30,new B(15,24),new B(5,25)),new K(28,new B(15,15),new B(10,16))),new Ie(21,Int32Array.from([6,28,50,72,94]),new K(28,new B(4,116),new B(4,117)),new K(26,new B(17,42)),new K(28,new B(17,22),new B(6,23)),new K(30,new B(19,16),new B(6,17))),new Ie(22,Int32Array.from([6,26,50,74,98]),new K(28,new B(2,111),new B(7,112)),new K(28,new B(17,46)),new K(30,new B(7,24),new B(16,25)),new K(24,new B(34,13))),new Ie(23,Int32Array.from([6,30,54,78,102]),new K(30,new B(4,121),new B(5,122)),new K(28,new B(4,47),new B(14,48)),new K(30,new B(11,24),new B(14,25)),new K(30,new B(16,15),new B(14,16))),new Ie(24,Int32Array.from([6,28,54,80,106]),new K(30,new B(6,117),new B(4,118)),new K(28,new B(6,45),new B(14,46)),new K(30,new B(11,24),new B(16,25)),new K(30,new B(30,16),new B(2,17))),new Ie(25,Int32Array.from([6,32,58,84,110]),new K(26,new B(8,106),new B(4,107)),new K(28,new B(8,47),new B(13,48)),new K(30,new B(7,24),new B(22,25)),new K(30,new B(22,15),new B(13,16))),new Ie(26,Int32Array.from([6,30,58,86,114]),new K(28,new B(10,114),new B(2,115)),new K(28,new B(19,46),new B(4,47)),new K(28,new B(28,22),new B(6,23)),new K(30,new B(33,16),new B(4,17))),new Ie(27,Int32Array.from([6,34,62,90,118]),new K(30,new B(8,122),new B(4,123)),new K(28,new B(22,45),new B(3,46)),new K(30,new B(8,23),new B(26,24)),new K(30,new B(12,15),new B(28,16))),new Ie(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new B(3,117),new B(10,118)),new K(28,new B(3,45),new B(23,46)),new K(30,new B(4,24),new B(31,25)),new K(30,new B(11,15),new B(31,16))),new Ie(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new B(7,116),new B(7,117)),new K(28,new B(21,45),new B(7,46)),new K(30,new B(1,23),new B(37,24)),new K(30,new B(19,15),new B(26,16))),new Ie(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new B(5,115),new B(10,116)),new K(28,new B(19,47),new B(10,48)),new K(30,new B(15,24),new B(25,25)),new K(30,new B(23,15),new B(25,16))),new Ie(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new B(13,115),new B(3,116)),new K(28,new B(2,46),new B(29,47)),new K(30,new B(42,24),new B(1,25)),new K(30,new B(23,15),new B(28,16))),new Ie(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new B(17,115)),new K(28,new B(10,46),new B(23,47)),new K(30,new B(10,24),new B(35,25)),new K(30,new B(19,15),new B(35,16))),new Ie(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new B(17,115),new B(1,116)),new K(28,new B(14,46),new B(21,47)),new K(30,new B(29,24),new B(19,25)),new K(30,new B(11,15),new B(46,16))),new Ie(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new B(13,115),new B(6,116)),new K(28,new B(14,46),new B(23,47)),new K(30,new B(44,24),new B(7,25)),new K(30,new B(59,16),new B(1,17))),new Ie(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new B(12,121),new B(7,122)),new K(28,new B(12,47),new B(26,48)),new K(30,new B(39,24),new B(14,25)),new K(30,new B(22,15),new B(41,16))),new Ie(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new B(6,121),new B(14,122)),new K(28,new B(6,47),new B(34,48)),new K(30,new B(46,24),new B(10,25)),new K(30,new B(2,15),new B(64,16))),new Ie(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new B(17,122),new B(4,123)),new K(28,new B(29,46),new B(14,47)),new K(30,new B(49,24),new B(10,25)),new K(30,new B(24,15),new B(46,16))),new Ie(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new B(4,122),new B(18,123)),new K(28,new B(13,46),new B(32,47)),new K(30,new B(48,24),new B(14,25)),new K(30,new B(42,15),new B(32,16))),new Ie(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new B(20,117),new B(4,118)),new K(28,new B(40,47),new B(7,48)),new K(30,new B(43,24),new B(22,25)),new K(30,new B(10,15),new B(67,16))),new Ie(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new B(19,118),new B(6,119)),new K(28,new B(18,47),new B(31,48)),new K(30,new B(34,24),new B(34,25)),new K(30,new B(20,15),new B(61,16)))];var vn;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(vn||(vn={}));class ar{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let i=0;i<r;i++)for(let o=0;o<r;o++)this.isMasked(i,o)&&t.flip(o,i)}}ar.values=new Map([[vn.DATA_MASK_000,new ar(vn.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[vn.DATA_MASK_001,new ar(vn.DATA_MASK_001,(T,t)=>(T&1)===0)],[vn.DATA_MASK_010,new ar(vn.DATA_MASK_010,(T,t)=>t%3===0)],[vn.DATA_MASK_011,new ar(vn.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[vn.DATA_MASK_100,new ar(vn.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[vn.DATA_MASK_101,new ar(vn.DATA_MASK_101,(T,t)=>T*t%6===0)],[vn.DATA_MASK_110,new ar(vn.DATA_MASK_110,(T,t)=>T*t%6<3)],[vn.DATA_MASK_111,new ar(vn.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class Ji{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new ee;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const r=this.bitMatrix.getHeight();let i=0;const o=r-7;for(let u=r-1;u>=o;u--)i=this.copyBit(8,u,i);for(let u=r-8;u<r;u++)i=this.copyBit(u,8,i);if(this.parsedFormatInfo=Cn.decodeFormatInformation(t,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ee}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Ie.getVersionForNumber(r);let i=0;const o=t-11;for(let f=5;f>=0;f--)for(let m=t-9;m>=o;m--)i=this.copyBit(m,f,i);let u=Ie.decodeVersionInformation(i);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;i=0;for(let f=5;f>=0;f--)for(let m=t-9;m>=o;m--)i=this.copyBit(f,m,i);if(u=Ie.decodeVersionInformation(i),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new ee}copyBit(t,r,i){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?i<<1|1:i<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),i=ar.values.get(t.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const u=r.buildFunctionPattern();let f=!0;const m=new Uint8Array(r.getTotalCodewords());let y=0,E=0,C=0;for(let O=o-1;O>0;O-=2){O===6&&O--;for(let I=0;I<o;I++){const L=f?o-1-I:I;for(let P=0;P<2;P++)u.get(O-P,L)||(C++,E<<=1,this.bitMatrix.get(O-P,L)&&(E|=1),C===8&&(m[y++]=E,C=0,E=0))}f=!f}if(y!==r.getTotalCodewords())throw new ee;return m}remask(){if(this.parsedFormatInfo===null)return;const t=ar.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,i=t.getWidth();r<i;r++)for(let o=r+1,u=t.getHeight();o<u;o++)t.get(r,o)!==t.get(o,r)&&(t.flip(o,r),t.flip(r,o))}}class ll{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,i){if(t.length!==r.getTotalCodewords())throw new R;const o=r.getECBlocksForLevel(i);let u=0;const f=o.getECBlocks();for(const P of f)u+=P.getCount();const m=new Array(u);let y=0;for(const P of f)for(let z=0;z<P.getCount();z++){const X=P.getDataCodewords(),ne=o.getECCodewordsPerBlock()+X;m[y++]=new ll(X,new Uint8Array(ne))}const E=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==E;)C--;C++;const O=E-o.getECCodewordsPerBlock();let I=0;for(let P=0;P<O;P++)for(let z=0;z<y;z++)m[z].codewords[P]=t[I++];for(let P=C;P<y;P++)m[P].codewords[O]=t[I++];const L=m[0].codewords.length;for(let P=O;P<L;P++)for(let z=0;z<y;z++){const X=z<C?P:P+1;m[z].codewords[X]=t[I++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var lr;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(lr||(lr={}));class Pe{constructor(t,r,i,o){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=i,this.bits=o,Pe.FOR_BITS.set(o,this),Pe.FOR_VALUE.set(t,this)}static forBits(t){const r=Pe.FOR_BITS.get(t);if(r===void 0)throw new R;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let i;return r<=9?i=0:r<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Pe))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Pe.FOR_BITS=new Map,Pe.FOR_VALUE=new Map,Pe.TERMINATOR=new Pe(lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Pe.NUMERIC=new Pe(lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Pe.ALPHANUMERIC=new Pe(lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Pe.STRUCTURED_APPEND=new Pe(lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Pe.BYTE=new Pe(lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Pe.ECI=new Pe(lr.ECI,"ECI",Int32Array.from([0,0,0]),7),Pe.KANJI=new Pe(lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Pe.FNC1_FIRST_POSITION=new Pe(lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Pe.FNC1_SECOND_POSITION=new Pe(lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Pe.HANZI=new Pe(lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Vt{static decode(t,r,i,o){const u=new Tr(t);let f=new We;const m=new Array;let y=-1,E=-1;try{let C=null,O=!1,I;do{if(u.available()<4)I=Pe.TERMINATOR;else{const L=u.readBits(4);I=Pe.forBits(L)}switch(I){case Pe.TERMINATOR:break;case Pe.FNC1_FIRST_POSITION:case Pe.FNC1_SECOND_POSITION:O=!0;break;case Pe.STRUCTURED_APPEND:if(u.available()<16)throw new ee;y=u.readBits(8),E=u.readBits(8);break;case Pe.ECI:const L=Vt.parseECIValue(u);if(C=de.getCharacterSetECIByValue(L),C===null)throw new ee;break;case Pe.HANZI:const P=u.readBits(4),z=u.readBits(I.getCharacterCountBits(r));P===Vt.GB2312_SUBSET&&Vt.decodeHanziSegment(u,f,z);break;default:const X=u.readBits(I.getCharacterCountBits(r));switch(I){case Pe.NUMERIC:Vt.decodeNumericSegment(u,f,X);break;case Pe.ALPHANUMERIC:Vt.decodeAlphanumericSegment(u,f,X,O);break;case Pe.BYTE:Vt.decodeByteSegment(u,f,X,C,m,o);break;case Pe.KANJI:Vt.decodeKanjiSegment(u,f,X);break;default:throw new ee}break}}while(I!==Pe.TERMINATOR)}catch{throw new ee}return new Nt(t,f.toString(),m.length===0?null:m,i===null?null:i.toString(),y,E)}static decodeHanziSegment(t,r,i){if(i*13>t.available())throw new ee;const o=new Uint8Array(2*i);let u=0;for(;i>0;){const f=t.readBits(13);let m=f/96<<8&4294967295|f%96;m<959?m+=41377:m+=42657,o[u]=m>>8&255,o[u+1]=m&255,u+=2,i--}try{r.append(At.decode(o,Oe.GB2312))}catch(f){throw new ee(f)}}static decodeKanjiSegment(t,r,i){if(i*13>t.available())throw new ee;const o=new Uint8Array(2*i);let u=0;for(;i>0;){const f=t.readBits(13);let m=f/192<<8&4294967295|f%192;m<7936?m+=33088:m+=49472,o[u]=m>>8,o[u+1]=m,u+=2,i--}try{r.append(At.decode(o,Oe.SHIFT_JIS))}catch(f){throw new ee(f)}}static decodeByteSegment(t,r,i,o,u,f){if(8*i>t.available())throw new ee;const m=new Uint8Array(i);for(let E=0;E<i;E++)m[E]=t.readBits(8);let y;o===null?y=Oe.guessEncoding(m,f):y=o.getName();try{r.append(At.decode(m,y))}catch(E){throw new ee(E)}u.push(m)}static toAlphaNumericChar(t){if(t>=Vt.ALPHANUMERIC_CHARS.length)throw new ee;return Vt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,i,o){const u=r.length();for(;i>1;){if(t.available()<11)throw new ee;const f=t.readBits(11);r.append(Vt.toAlphaNumericChar(Math.floor(f/45))),r.append(Vt.toAlphaNumericChar(f%45)),i-=2}if(i===1){if(t.available()<6)throw new ee;r.append(Vt.toAlphaNumericChar(t.readBits(6)))}if(o)for(let f=u;f<r.length();f++)r.charAt(f)==="%"&&(f<r.length()-1&&r.charAt(f+1)==="%"?r.deleteCharAt(f+1):r.setCharAt(f,""))}static decodeNumericSegment(t,r,i){for(;i>=3;){if(t.available()<10)throw new ee;const o=t.readBits(10);if(o>=1e3)throw new ee;r.append(Vt.toAlphaNumericChar(Math.floor(o/100))),r.append(Vt.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(Vt.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(t.available()<7)throw new ee;const o=t.readBits(7);if(o>=100)throw new ee;r.append(Vt.toAlphaNumericChar(Math.floor(o/10))),r.append(Vt.toAlphaNumericChar(o%10))}else if(i===1){if(t.available()<4)throw new ee;const o=t.readBits(4);if(o>=10)throw new ee;r.append(Vt.toAlphaNumericChar(o))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const i=t.readBits(8);return(r&63)<<8&4294967295|i}if((r&224)===192){const i=t.readBits(16);return(r&31)<<16&4294967295|i}throw new ee}}Vt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Vt.GB2312_SUBSET=1;class fo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class lc{constructor(){this.rsDecoder=new Er($e.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(bt.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const i=new Ji(t);let o=null;try{return this.decodeBitMatrixParser(i,r)}catch(u){o=u}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const u=this.decodeBitMatrixParser(i,r);return u.setOther(new fo(!0)),u}catch(u){throw o!==null?o:u}}decodeBitMatrixParser(t,r){const i=t.readVersion(),o=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),f=ll.getDataBlocks(u,i,o);let m=0;for(const C of f)m+=C.getNumDataCodewords();const y=new Uint8Array(m);let E=0;for(const C of f){const O=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(O,I);for(let L=0;L<I;L++)y[E++]=O[L]}return Vt.decode(y,i,o,r)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new j}for(let o=0;o<r;o++)t[o]=i[o]}}class $i extends Te{constructor(t,r,i){super(t,r),this.estimatedModuleSize=i}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const o=(this.getX()+r)/2,u=(this.getY()+t)/2,f=(this.estimatedModuleSize+i)/2;return new $i(o,u,f)}}class fr{constructor(t,r,i,o,u,f,m){this.image=t,this.startX=r,this.startY=i,this.width=o,this.height=u,this.moduleSize=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,i=this.width,o=t+i,u=this.startY+r/2,f=new Int32Array(3),m=this.image;for(let y=0;y<r;y++){const E=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=t;for(;C<o&&!m.get(C,E);)C++;let O=0;for(;C<o;){if(m.get(C,E))if(O===1)f[1]++;else if(O===2){if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,E,C);if(I!==null)return I}f[0]=f[2],f[1]=1,f[2]=0,O=1}else f[++O]++;else O===1&&O++,f[O]++;C++}if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,E,o);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,i=r/2;for(let o=0;o<3;o++)if(Math.abs(r-t[o])>=i)return!1;return!0}crossCheckVertical(t,r,i,o){const u=this.image,f=u.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let y=t;for(;y>=0&&u.get(r,y)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&!u.get(r,y)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=t+1;y<f&&u.get(r,y)&&m[1]<=i;)m[1]++,y++;if(y===f||m[1]>i)return NaN;for(;y<f&&!u.get(r,y)&&m[2]<=i;)m[2]++,y++;if(m[2]>i)return NaN;const E=m[0]+m[1]+m[2];return 5*Math.abs(E-o)>=2*o?NaN:this.foundPatternCross(m)?fr.centerFromEnd(m,y):NaN}handlePossibleCenter(t,r,i){const o=t[0]+t[1]+t[2],u=fr.centerFromEnd(t,i),f=this.crossCheckVertical(r,u,2*t[1],o);if(!isNaN(f)){const m=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(m,f,u))return E.combineEstimate(f,u,m);const y=new $i(u,f,m);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Ls extends Te{constructor(t,r,i,o){super(t,r),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const o=this.count+1,u=(this.count*this.getX()+r)/o,f=(this.count*this.getY()+t)/o,m=(this.count*this.estimatedModuleSize+i)/o;return new Ls(u,f,m,o)}}class ol{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class $t{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(_e.TRY_HARDER)!==void 0,i=t!=null&&t.get(_e.PURE_BARCODE)!==void 0,o=this.image,u=o.getHeight(),f=o.getWidth();let m=Math.floor(3*u/(4*$t.MAX_MODULES));(m<$t.MIN_SKIP||r)&&(m=$t.MIN_SKIP);let y=!1;const E=new Int32Array(5);for(let O=m-1;O<u&&!y;O+=m){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let I=0;for(let L=0;L<f;L++)if(o.get(L,O))(I&1)===1&&I++,E[I]++;else if((I&1)===0)if(I===4)if($t.foundPatternCross(E)){if(this.handlePossibleCenter(E,O,L,i)===!0)if(m=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>E[2]&&(O+=z-E[2]-m,L=f-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,I=3;continue}I=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,I=3;else E[++I]++;else E[I]++;$t.foundPatternCross(E)&&this.handlePossibleCenter(E,O,f,i)===!0&&(m=E[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Te.orderBestPatterns(C),new ol(C)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let u=0;u<5;u++){const f=t[u];if(f===0)return!1;r+=f}if(r<7)return!1;const i=r/7,o=i/2;return Math.abs(i-t[0])<o&&Math.abs(i-t[1])<o&&Math.abs(3*i-t[2])<3*o&&Math.abs(i-t[3])<o&&Math.abs(i-t[4])<o}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,i,o){const u=this.getCrossCheckStateCount();let f=0;const m=this.image;for(;t>=f&&r>=f&&m.get(r-f,t-f);)u[2]++,f++;if(t<f||r<f)return!1;for(;t>=f&&r>=f&&!m.get(r-f,t-f)&&u[1]<=i;)u[1]++,f++;if(t<f||r<f||u[1]>i)return!1;for(;t>=f&&r>=f&&m.get(r-f,t-f)&&u[0]<=i;)u[0]++,f++;if(u[0]>i)return!1;const y=m.getHeight(),E=m.getWidth();for(f=1;t+f<y&&r+f<E&&m.get(r+f,t+f);)u[2]++,f++;if(t+f>=y||r+f>=E)return!1;for(;t+f<y&&r+f<E&&!m.get(r+f,t+f)&&u[3]<i;)u[3]++,f++;if(t+f>=y||r+f>=E||u[3]>=i)return!1;for(;t+f<y&&r+f<E&&m.get(r+f,t+f)&&u[4]<i;)u[4]++,f++;if(u[4]>=i)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-o)<2*o&&$t.foundPatternCross(u)}crossCheckVertical(t,r,i,o){const u=this.image,f=u.getHeight(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(r,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(r,y)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&u.get(r,y)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=t+1;y<f&&u.get(r,y);)m[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(r,y)&&m[3]<i;)m[3]++,y++;if(y===f||m[3]>=i)return NaN;for(;y<f&&u.get(r,y)&&m[4]<i;)m[4]++,y++;if(m[4]>=i)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-o)>=2*o?NaN:$t.foundPatternCross(m)?$t.centerFromEnd(m,y):NaN}crossCheckHorizontal(t,r,i,o){const u=this.image,f=u.getWidth(),m=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,r);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,r)&&m[1]<=i;)m[1]++,y--;if(y<0||m[1]>i)return NaN;for(;y>=0&&u.get(y,r)&&m[0]<=i;)m[0]++,y--;if(m[0]>i)return NaN;for(y=t+1;y<f&&u.get(y,r);)m[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(y,r)&&m[3]<i;)m[3]++,y++;if(y===f||m[3]>=i)return NaN;for(;y<f&&u.get(y,r)&&m[4]<i;)m[4]++,y++;if(m[4]>=i)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-o)>=o?NaN:$t.foundPatternCross(m)?$t.centerFromEnd(m,y):NaN}handlePossibleCenter(t,r,i,o){const u=t[0]+t[1]+t[2]+t[3]+t[4];let f=$t.centerFromEnd(t,i),m=this.crossCheckVertical(r,Math.floor(f),t[2],u);if(!isNaN(m)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(m),t[2],u),!isNaN(f)&&(!o||this.crossCheckDiagonal(Math.floor(m),Math.floor(f),t[2],u)))){const y=u/7;let E=!1;const C=this.possibleCenters;for(let O=0,I=C.length;O<I;O++){const L=C[O];if(L.aboutEquals(y,m,f)){C[O]=L.combineEstimate(m,f,y),E=!0;break}}if(!E){const O=new Ls(f,m,y);C.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const i of this.possibleCenters)if(i.getCount()>=$t.CENTER_QUORUM)if(r==null)r=i;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const i=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=$t.CENTER_QUORUM&&(t++,r+=f.getEstimatedModuleSize());if(t<3)return!1;const o=r/i;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-o);return u<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new re;const r=this.possibleCenters;let i;if(t>3){let o=0,u=0;for(const y of this.possibleCenters){const E=y.getEstimatedModuleSize();o+=E,u+=E*E}i=o/t;let f=Math.sqrt(u/t-i*i);r.sort((y,E)=>{const C=Math.abs(E.getEstimatedModuleSize()-i),O=Math.abs(y.getEstimatedModuleSize()-i);return C<O?-1:C>O?1:0});const m=Math.max(.2*i,f);for(let y=0;y<r.length&&r.length>3;y++){const E=r[y];Math.abs(E.getEstimatedModuleSize()-i)>m&&(r.splice(y,1),y--)}}if(r.length>3){let o=0;for(const u of r)o+=u.getEstimatedModuleSize();i=o/r.length,r.sort((u,f)=>{if(f.getCount()===u.getCount()){const m=Math.abs(f.getEstimatedModuleSize()-i),y=Math.abs(u.getEstimatedModuleSize()-i);return m<y?1:m>y?-1:0}else return f.getCount()-u.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}$t.CENTER_QUORUM=2,$t.MIN_SKIP=3,$t.MAX_MODULES=57;class Pr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(_e.NEED_RESULT_POINT_CALLBACK);const i=new $t(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(i)}processFinderPatternInfo(t){const r=t.getTopLeft(),i=t.getTopRight(),o=t.getBottomLeft(),u=this.calculateModuleSize(r,i,o);if(u<1)throw new re("No pattern found in proccess finder.");const f=Pr.computeDimension(r,i,o,u),m=Ie.getProvisionalVersionForDimension(f),y=m.getDimensionForVersion()-7;let E=null;if(m.getAlignmentPatternCenters().length>0){const L=i.getX()-r.getX()+o.getX(),P=i.getY()-r.getY()+o.getY(),z=1-3/y,X=Math.floor(r.getX()+z*(L-r.getX())),ne=Math.floor(r.getY()+z*(P-r.getY()));for(let be=4;be<=16;be<<=1)try{E=this.findAlignmentInRegion(u,X,ne,be);break}catch(ye){if(!(ye instanceof re))throw ye}}const C=Pr.createTransform(r,i,o,E,f),O=Pr.sampleGrid(this.image,C,f);let I;return E===null?I=[o,r,i]:I=[o,r,i,E],new vt(O,I)}static createTransform(t,r,i,o,u){const f=u-3.5;let m,y,E,C;return o!==null?(m=o.getX(),y=o.getY(),E=f-3,C=E):(m=r.getX()-t.getX()+i.getX(),y=r.getY()-t.getY()+i.getY(),E=f,C=f),Jn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,E,C,3.5,f,t.getX(),t.getY(),r.getX(),r.getY(),m,y,i.getX(),i.getY())}static sampleGrid(t,r,i){return tr.getInstance().sampleGridWithTransform(t,i,i,r)}static computeDimension(t,r,i,o){const u=Xe.round(Te.distance(t,r)/o),f=Xe.round(Te.distance(t,i)/o);let m=Math.floor((u+f)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new re("Dimensions could be not found.")}return m}calculateModuleSize(t,r,i){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,i))/2}calculateModuleSizeOneWay(t,r){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,i,o){let u=this.sizeOfBlackWhiteBlackRun(t,r,i,o),f=1,m=t-(i-t);m<0?(f=t/(t-m),m=0):m>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(m-t),m=this.image.getWidth()-1);let y=Math.floor(r-(o-r)*f);return f=1,y<0?(f=r/(r-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-r)/(y-r),y=this.image.getHeight()-1),m=Math.floor(t+(m-t)*f),u+=this.sizeOfBlackWhiteBlackRun(t,r,m,y),u-1}sizeOfBlackWhiteBlackRun(t,r,i,o){const u=Math.abs(o-r)>Math.abs(i-t);if(u){let L=t;t=r,r=L,L=i,i=o,o=L}const f=Math.abs(i-t),m=Math.abs(o-r);let y=-f/2;const E=t<i?1:-1,C=r<o?1:-1;let O=0;const I=i+E;for(let L=t,P=r;L!==I;L+=E){const z=u?P:L,X=u?L:P;if(O===1===this.image.get(z,X)){if(O===2)return Xe.distance(L,P,t,r);O++}if(y+=m,y>0){if(P===o)break;P+=C,y-=f}}return O===2?Xe.distance(i+E,o,t,r):NaN}findAlignmentInRegion(t,r,i,o){const u=Math.floor(o*t),f=Math.max(0,r-u),m=Math.min(this.image.getWidth()-1,r+u);if(m-f<t*3)throw new re("Alignment top exceeds estimated module size.");const y=Math.max(0,i-u),E=Math.min(this.image.getHeight()-1,i+u);if(E-y<t*3)throw new re("Alignment bottom exceeds estimated module size.");return new fr(this.image,f,y,m-f,E-y,t,this.resultPointCallback).find()}}class Qr{constructor(){this.decoder=new lc}getDecoder(){return this.decoder}decode(t,r){let i,o;if(r!=null&&r.get(_e.PURE_BARCODE)!==void 0){const y=Qr.extractPureBits(t.getBlackMatrix());i=this.decoder.decodeBitMatrix(y,r),o=Qr.NO_POINTS}else{const y=new Pr(t.getBlackMatrix()).detect(r);i=this.decoder.decodeBitMatrix(y.getBits(),r),o=y.getPoints()}i.getOther()instanceof fo&&i.getOther().applyMirroredCorrection(o);const u=new Ee(i.getText(),i.getRawBytes(),void 0,o,pe.QR_CODE,void 0),f=i.getByteSegments();f!==null&&u.putMetadata(st.BYTE_SEGMENTS,f);const m=i.getECLevel();return m!==null&&u.putMetadata(st.ERROR_CORRECTION_LEVEL,m),i.hasStructuredAppend()&&(u.putMetadata(st.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),u.putMetadata(st.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r===null||i===null)throw new re;const o=this.moduleSize(r,t);let u=r[1],f=i[1],m=r[0],y=i[0];if(m>=y||u>=f)throw new re;if(f-u!==y-m&&(y=m+(f-u),y>=t.getWidth()))throw new re;const E=Math.round((y-m+1)/o),C=Math.round((f-u+1)/o);if(E<=0||C<=0)throw new re;if(C!==E)throw new re;const O=Math.floor(o/2);u+=O,m+=O;const I=m+Math.floor((E-1)*o)-y;if(I>0){if(I>O)throw new re;m-=I}const L=u+Math.floor((C-1)*o)-f;if(L>0){if(L>O)throw new re;u-=L}const P=new bt(E,C);for(let z=0;z<C;z++){const X=u+Math.floor(z*o);for(let ne=0;ne<E;ne++)t.get(m+Math.floor(ne*o),X)&&P.set(ne,z)}return P}static moduleSize(t,r){const i=r.getHeight(),o=r.getWidth();let u=t[0],f=t[1],m=!0,y=0;for(;u<o&&f<i;){if(m!==r.get(u,f)){if(++y===5)break;m=!m}u++,f++}if(u===o||f===i)throw new re;return(u-t[0])/7}}Qr.NO_POINTS=new Array;class ze{PDF417Common(){}static getBitCountSum(t){return Xe.sum(t)}static toIntArray(t){if(t==null||!t.length)return ze.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let i=0;for(const o of t)r[i++]=o;return r}static getCodeword(t){const r=ue.binarySearch(ze.SYMBOL_TABLE,t&262143);return r<0?-1:(ze.CODEWORD_TABLE[r]-1)%ze.NUMBER_OF_CODEWORDS}}ze.NUMBER_OF_CODEWORDS=929,ze.MAX_CODEWORDS_IN_BARCODE=ze.NUMBER_OF_CODEWORDS-1,ze.MIN_ROWS_IN_BARCODE=3,ze.MAX_ROWS_IN_BARCODE=90,ze.MODULES_IN_CODEWORD=17,ze.MODULES_IN_STOP_PATTERN=18,ze.BARS_IN_MODULE=8,ze.EMPTY_INT_ARRAY=new Int32Array([]),ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class go{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ye{static detectMultiple(t,r,i){let o=t.getBlackMatrix(),u=Ye.detect(i,o);return u.length||(o=o.clone(),o.rotate180(),u=Ye.detect(i,o)),new go(o,u)}static detect(t,r){const i=new Array;let o=0,u=0,f=!1;for(;o<r.getHeight();){const m=Ye.findVertices(r,o,u);if(m[0]==null&&m[3]==null){if(!f)break;f=!1,u=0;for(const y of i)y[1]!=null&&(o=Math.trunc(Math.max(o,y[1].getY()))),y[3]!=null&&(o=Math.max(o,Math.trunc(y[3].getY())));o+=Ye.ROW_STEP;continue}if(f=!0,i.push(m),!t)break;m[2]!=null?(u=Math.trunc(m[2].getX()),o=Math.trunc(m[2].getY())):(u=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY()))}return i}static findVertices(t,r,i){const o=t.getHeight(),u=t.getWidth(),f=new Array(8);return Ye.copyToResult(f,Ye.findRowsWithPattern(t,o,u,r,i,Ye.START_PATTERN),Ye.INDEXES_START_PATTERN),f[4]!=null&&(i=Math.trunc(f[4].getX()),r=Math.trunc(f[4].getY())),Ye.copyToResult(f,Ye.findRowsWithPattern(t,o,u,r,i,Ye.STOP_PATTERN),Ye.INDEXES_STOP_PATTERN),f}static copyToResult(t,r,i){for(let o=0;o<i.length;o++)t[i[o]]=r[o]}static findRowsWithPattern(t,r,i,o,u,f){const m=new Array(4);let y=!1;const E=new Int32Array(f.length);for(;o<r;o+=Ye.ROW_STEP){let O=Ye.findGuardPattern(t,u,o,i,!1,f,E);if(O!=null){for(;o>0;){const I=Ye.findGuardPattern(t,u,--o,i,!1,f,E);if(I!=null)O=I;else{o++;break}}m[0]=new Te(O[0],o),m[1]=new Te(O[1],o),y=!0;break}}let C=o+1;if(y){let O=0,I=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<r;C++){const L=Ye.findGuardPattern(t,I[0],C,i,!1,f,E);if(L!=null&&Math.abs(I[0]-L[0])<Ye.MAX_PATTERN_DRIFT&&Math.abs(I[1]-L[1])<Ye.MAX_PATTERN_DRIFT)I=L,O=0;else{if(O>Ye.SKIPPED_ROW_COUNT_MAX)break;O++}}C-=O+1,m[2]=new Te(I[0],C),m[3]=new Te(I[1],C)}return C-o<Ye.BARCODE_MIN_HEIGHT&&ue.fill(m,null),m}static findGuardPattern(t,r,i,o,u,f,m){ue.fillWithin(m,0,m.length,0);let y=r,E=0;for(;t.get(y,i)&&y>0&&E++<Ye.MAX_PIXEL_DRIFT;)y--;let C=y,O=0,I=f.length;for(let L=u;C<o;C++)if(t.get(C,i)!==L)m[O]++;else{if(O===I-1){if(Ye.patternMatchVariance(m,f,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=m[0]+m[1],G.arraycopy(m,2,m,0,O-1),m[O-1]=0,m[O]=0,O--}else O++;m[O]=1,L=!L}return O===I-1&&Ye.patternMatchVariance(m,f,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(t,r,i){let o=t.length,u=0,f=0;for(let E=0;E<o;E++)u+=t[E],f+=r[E];if(u<f)return 1/0;let m=u/f;i*=m;let y=0;for(let E=0;E<o;E++){let C=t[E],O=r[E]*m,I=C>O?C-O:O-C;if(I>i)return 1/0;y+=I}return y/u}}Ye.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ye.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ye.MAX_AVG_VARIANCE=.42,Ye.MAX_INDIVIDUAL_VARIANCE=.8,Ye.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ye.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ye.MAX_PIXEL_DRIFT=3,Ye.MAX_PATTERN_DRIFT=5,Ye.SKIPPED_ROW_COUNT_MAX=25,Ye.ROW_STEP=5,Ye.BARCODE_MIN_HEIGHT=10;class Xt{constructor(t,r){if(r.length===0)throw new R;this.field=t;let i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),G.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let o=0;for(let u of this.coefficients)o=this.field.add(o,u);return o}let r=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)r=this.field.add(this.field.multiply(t,r),this.coefficients[o]);return r}add(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){let f=r;r=i,i=f}let o=new Int32Array(i.length),u=i.length-r.length;G.arraycopy(i,0,o,0,u);for(let f=u;f<i.length;f++)o[f]=this.field.add(r[f-u],i[f]);return new Xt(this.field,o)}subtract(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Xt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Xt(this.field,new Int32Array([0]));let r=this.coefficients,i=r.length,o=t.coefficients,u=o.length,f=new Int32Array(i+u-1);for(let m=0;m<i;m++){let y=r[m];for(let E=0;E<u;E++)f[m+E]=this.field.add(f[m+E],this.field.multiply(y,o[E]))}return new Xt(this.field,f)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let i=0;i<t;i++)r[i]=this.field.subtract(0,this.coefficients[i]);return new Xt(this.field,r)}multiplyScalar(t){if(t===0)return new Xt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,i=new Int32Array(r);for(let o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new Xt(this.field,i)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return new Xt(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+t);for(let u=0;u<i;u++)o[u]=this.field.multiply(this.coefficients[u],r);return new Xt(this.field,o)}toString(){let t=new We;for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);i!==0&&(i<0?(t.append(" - "),i=-i):t.length()>0&&t.append(" + "),(r===0||i!==1)&&t.append(i),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class ul{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}inverse(t){if(t===0)throw new cn;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class wi extends ul{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let i=1;for(let o=0;o<t;o++)this.expTable[o]=i,i=i*r%t;for(let o=0;o<t-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new Xt(this,new Int32Array([0])),this.one=new Xt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;let i=new Int32Array(t+1);return i[0]=r,new Xt(this,i)}}wi.PDF417_GF=new wi(ze.NUMBER_OF_CODEWORDS,3);class Jr{constructor(){this.field=wi.PDF417_GF}decode(t,r,i){let o=new Xt(this.field,t),u=new Int32Array(r),f=!1;for(let P=r;P>0;P--){let z=o.evaluateAt(this.field.exp(P));u[r-P]=z,z!==0&&(f=!0)}if(!f)return 0;let m=this.field.getOne();if(i!=null)for(const P of i){let z=this.field.exp(t.length-1-P),X=new Xt(this.field,new Int32Array([this.field.subtract(0,z),1]));m=m.multiply(X)}let y=new Xt(this.field,u),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),C=E[0],O=E[1],I=this.findErrorLocations(C),L=this.findErrorMagnitudes(O,C,I);for(let P=0;P<I.length;P++){let z=t.length-1-this.field.log(I[P]);if(z<0)throw j.getChecksumInstance();t[z]=this.field.subtract(t[z],L[P])}return I.length}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){let I=t;t=r,r=I}let o=t,u=r,f=this.field.getZero(),m=this.field.getOne();for(;u.getDegree()>=Math.round(i/2);){let I=o,L=f;if(o=u,f=m,o.isZero())throw j.getChecksumInstance();u=I;let P=this.field.getZero(),z=o.getCoefficient(o.getDegree()),X=this.field.inverse(z);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let ne=u.getDegree()-o.getDegree(),be=this.field.multiply(u.getCoefficient(u.getDegree()),X);P=P.add(this.field.buildMonomial(ne,be)),u=u.subtract(o.multiplyByMonomial(ne,be))}m=P.multiply(f).subtract(L).negative()}let y=m.getCoefficient(0);if(y===0)throw j.getChecksumInstance();let E=this.field.inverse(y),C=m.multiply(E),O=u.multiply(E);return[C,O]}findErrorLocations(t){let r=t.getDegree(),i=new Int32Array(r),o=0;for(let u=1;u<this.field.getSize()&&o<r;u++)t.evaluateAt(u)===0&&(i[o]=this.field.inverse(u),o++);if(o!==r)throw j.getChecksumInstance();return i}findErrorMagnitudes(t,r,i){let o=r.getDegree(),u=new Int32Array(o);for(let E=1;E<=o;E++)u[o-E]=this.field.multiply(E,r.getCoefficient(E));let f=new Xt(this.field,u),m=i.length,y=new Int32Array(m);for(let E=0;E<m;E++){let C=this.field.inverse(i[E]),O=this.field.subtract(0,t.evaluateAt(C)),I=this.field.inverse(f.evaluateAt(C));y[E]=this.field.multiply(O,I)}return y}}class $r{constructor(t,r,i,o,u){t instanceof $r?this.constructor_2(t):this.constructor_1(t,r,i,o,u)}constructor_1(t,r,i,o,u){const f=r==null||i==null,m=o==null||u==null;if(f&&m)throw new re;f?(r=new Te(0,o.getY()),i=new Te(0,u.getY())):m&&(o=new Te(t.getWidth()-1,r.getY()),u=new Te(t.getWidth()-1,i.getY())),this.image=t,this.topLeft=r,this.bottomLeft=i,this.topRight=o,this.bottomRight=u,this.minX=Math.trunc(Math.min(r.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),u.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new $r(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,i){let o=this.topLeft,u=this.bottomLeft,f=this.topRight,m=this.bottomRight;if(t>0){let y=i?this.topLeft:this.topRight,E=Math.trunc(y.getY()-t);E<0&&(E=0);let C=new Te(y.getX(),E);i?o=C:f=C}if(r>0){let y=i?this.bottomLeft:this.bottomRight,E=Math.trunc(y.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let C=new Te(y.getX(),E);i?u=C:m=C}return new $r(this.image,o,u,f,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fa{constructor(t,r,i,o){this.columnCount=t,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=i,this.rowCount=r+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class es{constructor(){this.buffer=""}static form(t,r){let i=-1;function o(f,m,y,E,C,O){if(f==="%%")return"%";if(r[++i]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,L;switch(O){case"s":L=r[i];break;case"c":L=r[i][0];break;case"f":L=parseFloat(r[i]).toFixed(f);break;case"p":L=parseFloat(r[i]).toPrecision(f);break;case"e":L=parseFloat(r[i]).toExponential(f);break;case"x":L=parseInt(r[i]).toString(I||16);break;case"d":L=parseFloat(parseInt(r[i],I||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(I);let P=parseInt(y),z=y&&y[0]+""=="0"?"0":" ";for(;L.length<P;)L=m!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,o)}format(t,...r){this.buffer+=es.form(t,r)}toString(){return this.buffer}}class li{constructor(t){this.boundingBox=new $r(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let i=1;i<li.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(t)-i;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(t)+i,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new es;let r=0;for(const i of this.codewords){if(i==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue())}return t.toString()}}li.MAX_NEARBY_DISTANCE=5;class oi{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[i,o]of this.values.entries()){const u={getKey:()=>i,getValue:()=>o};u.getValue()>t?(t=u.getValue(),r=[],r.push(u.getKey())):u.getValue()===t&&r.push(u.getKey())}return ze.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class cl extends li{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,E=1,C=0;for(let O=f;O<m;O++){if(r[O]==null)continue;let I=r[O],L=I.getRowNumber()-y;if(L===0)C++;else if(L===1)E=Math.max(E,C),C=1,y=I.getRowNumber();else if(L<0||I.getRowNumber()>=t.getRowCount()||L>O)r[O]=null;else{let P;E>2?P=(E-2)*L:P=L;let z=P>=O;for(let X=1;X<=P&&!z;X++)z=r[O-X]!=null;z?r[O]=null:(y=I.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=r.length)continue;r[o]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),m=this.getCodewords(),y=-1;for(let E=u;E<f;E++){if(m[E]==null)continue;let C=m[E];C.setRowNumberAsRowIndicatorColumn();let O=C.getRowNumber()-y;O===0||(O===1?y=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?m[E]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new oi,i=new oi,o=new oi,u=new oi;for(let m of t){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let y=m.getValue()%30,E=m.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:i.setValue(y*3+1);break;case 1:u.setValue(y/3),o.setValue(y%3);break;case 2:r.setValue(y+1);break}}if(r.getValue().length===0||i.getValue().length===0||o.getValue().length===0||u.getValue().length===0||r.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<ze.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>ze.MAX_ROWS_IN_BARCODE)return null;let f=new fa(r.getValue()[0],i.getValue()[0],o.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,r){for(let i=0;i<t.length;i++){let o=t[i];if(t[i]==null)continue;let u=o.getValue()%30,f=o.getRowNumber();if(f>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:u+1!==r.getColumnCount()&&(t[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Sn{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ze.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let i=this.detectionResultColumns[r].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,i))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<t.length;i++)if(t[i]!=null&&r[i]!=null&&t[i].getRowNumber()===r[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let u=this.detectionResultColumns[o].getCodewords()[i];u!=null&&(u.setRowNumber(t[i].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let m=this.detectionResultColumns[f].getCodewords()[i];m!=null&&(u=Sn.adjustRowNumberIfValid(o,u,m),m.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let m=this.detectionResultColumns[f].getCodewords()[i];m!=null&&(u=Sn.adjustRowNumberIfValid(o,u,m),m.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(t)?(i.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,i){if(!this.detectionResultColumns[t-1])return;let o=i[r],u=this.detectionResultColumns[t-1].getCodewords(),f=u;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let m=new Array(14);m[2]=u[r],m[3]=f[r],r>0&&(m[0]=i[r-1],m[4]=u[r-1],m[5]=f[r-1]),r>1&&(m[8]=i[r-2],m[10]=u[r-2],m[11]=f[r-2]),r<i.length-1&&(m[1]=i[r+1],m[6]=u[r+1],m[7]=f[r+1]),r<i.length-2&&(m[9]=i[r+2],m[12]=u[r+2],m[13]=f[r+2]);for(let y of m)if(Sn.adjustRowNumber(o,y))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new es;for(let i=0;i<t.getCodewords().length;i++){r.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}let u=this.detectionResultColumns[o].getCodewords()[i];if(u==null){r.format("    |   ");continue}r.format(" %3d|%3d",u.getRowNumber(),u.getValue())}r.format("%n")}return r.toString()}}class Or{constructor(t,r,i,o){this.rowNumber=Or.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Or.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Or.BARCODE_ROW_UNKNOWN=-1;class Ln{static initialize(){for(let t=0;t<ze.SYMBOL_TABLE.length;t++){let r=ze.SYMBOL_TABLE[t],i=r&1;for(let o=0;o<ze.BARS_IN_MODULE;o++){let u=0;for(;(r&1)===i;)u+=1,r>>=1;i=r&1,Ln.RATIOS_TABLE[t]||(Ln.RATIOS_TABLE[t]=new Array(ze.BARS_IN_MODULE)),Ln.RATIOS_TABLE[t][ze.BARS_IN_MODULE-o-1]=Math.fround(u/ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Ln.getDecodedCodewordValue(Ln.sampleBitCounts(t));return r!==-1?r:Ln.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Xe.sum(t),i=new Int32Array(ze.BARS_IN_MODULE),o=0,u=0;for(let f=0;f<ze.MODULES_IN_CODEWORD;f++){let m=r/(2*ze.MODULES_IN_CODEWORD)+f*r/ze.MODULES_IN_CODEWORD;u+t[o]<=m&&(u+=t[o],o++),i[o]++}return i}static getDecodedCodewordValue(t){let r=Ln.getBitValue(t);return ze.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let i=0;i<t.length;i++)for(let o=0;o<t[i];o++)r=r<<1|(i%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Xe.sum(t),i=new Array(ze.BARS_IN_MODULE);if(r>1)for(let f=0;f<i.length;f++)i[f]=Math.fround(t[f]/r);let o=_r.MAX_VALUE,u=-1;this.bSymbolTableReady||Ln.initialize();for(let f=0;f<Ln.RATIOS_TABLE.length;f++){let m=0,y=Ln.RATIOS_TABLE[f];for(let E=0;E<ze.BARS_IN_MODULE;E++){let C=Math.fround(y[E]-i[E]);if(m+=Math.fround(C*C),m>=o)break}m<o&&(o=m,u=ze.SYMBOL_TABLE[f])}return u}}Ln.bSymbolTableReady=!1,Ln.RATIOS_TABLE=new Array(ze.SYMBOL_TABLE.length).map(T=>new Array(ze.BARS_IN_MODULE));class ts{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class mo{static parseLong(t,r=void 0){return parseInt(t,r)}}class da extends v{}da.kind="NullPointerException";class hl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,i){if(t==null)throw new da;if(r<0||r>t.length||i<0||r+i>t.length||r+i<0)throw new J;if(i===0)return;for(let o=0;o<i;o++)this.write(t[r+o])}flush(){}close(){}}class js extends v{}class ga extends hl{constructor(t=32){if(super(),this.count=0,t<0)throw new R("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let i=this.buf.length<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new js;i=W.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,i)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new J;this.ensureCapacity(this.count+i),G.arraycopy(t,r,this.buf,this.count,i),this.count+=i}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Dt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Dt||(Dt={}));function xo(){if(typeof window<"u")return window.BigInt||null;if(typeof Tu<"u")return Tu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ma;function ui(T){if(typeof ma>"u"&&(ma=xo()),ma===null)throw new Error("BigInt is not supported!");return ma(T)}function fl(){let T=[];T[0]=ui(1);let t=ui(900);T[1]=t;for(let r=2;r<16;r++)T[r]=T[r-1]*t;return T}class ie{static decode(t,r){let i=new We(""),o=de.ISO8859_1;i.enableDecoding(o);let u=1,f=t[u++],m=new ts;for(;u<t[0];){switch(f){case ie.TEXT_COMPACTION_MODE_LATCH:u=ie.textCompaction(t,u,i);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:u=ie.byteCompaction(f,t,o,u,i);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[u++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:u=ie.numericCompaction(t,u,i);break;case ie.ECI_CHARSET:de.getCharacterSetECIByValue(t[u++]);break;case ie.ECI_GENERAL_PURPOSE:u+=2;break;case ie.ECI_USER_DEFINED:u++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ie.decodeMacroBlock(t,u,m);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new ee;default:u--,u=ie.textCompaction(t,u,i);break}if(u<t.length)f=t[u++];else throw ee.getFormatInstance()}if(i.length()===0)throw ee.getFormatInstance();let y=new Nt(null,i.toString(),null,r);return y.setOther(m),y}static decodeMacroBlock(t,r,i){if(r+ie.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw ee.getFormatInstance();let o=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ie.NUMBER_OF_SEQUENCE_CODEWORDS;m++,r++)o[m]=t[r];i.setSegmentIndex(W.parseInt(ie.decodeBase900toBase10(o,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new We;r=ie.textCompaction(t,r,u),i.setFileId(u.toString());let f=-1;for(t[r]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=r+1);r<t[0];)switch(t[r]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new We;r=ie.textCompaction(t,r+1,m),i.setFileName(m.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new We;r=ie.textCompaction(t,r+1,y),i.setSender(y.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new We;r=ie.textCompaction(t,r+1,E),i.setAddressee(E.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new We;r=ie.numericCompaction(t,r+1,C),i.setSegmentCount(W.parseInt(C.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new We;r=ie.numericCompaction(t,r+1,O),i.setTimestamp(mo.parseLong(O.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new We;r=ie.numericCompaction(t,r+1,I),i.setChecksum(W.parseInt(I.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new We;r=ie.numericCompaction(t,r+1,L),i.setFileSize(mo.parseLong(L.toString()));break;default:throw ee.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:r++,i.setLastSegment(!0);break;default:throw ee.getFormatInstance()}if(f!==-1){let m=r-f;i.isLastSegment()&&m--,i.setOptionalData(ue.copyOfRange(t,f,f+m))}return r}static textCompaction(t,r,i){let o=new Int32Array((t[0]-r)*2),u=new Int32Array((t[0]-r)*2),f=0,m=!1;for(;r<t[0]&&!m;){let y=t[r++];if(y<ie.TEXT_COMPACTION_MODE_LATCH)o[f]=y/30,o[f+1]=y%30,f+=2;else switch(y){case ie.TEXT_COMPACTION_MODE_LATCH:o[f++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:r--,m=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[f]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[r++],u[f]=y,f++;break}}return ie.decodeTextCompaction(o,u,f,i),r}static decodeTextCompaction(t,r,i,o){let u=Dt.ALPHA,f=Dt.ALPHA,m=0;for(;m<i;){let y=t[m],E="";switch(u){case Dt.ALPHA:if(y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case ie.LL:u=Dt.LOWER;break;case ie.ML:u=Dt.MIXED;break;case ie.PS:f=u,u=Dt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break;case Dt.LOWER:if(y<26)E=String.fromCharCode(97+y);else switch(y){case 26:E=" ";break;case ie.AS:f=u,u=Dt.ALPHA_SHIFT;break;case ie.ML:u=Dt.MIXED;break;case ie.PS:f=u,u=Dt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break;case Dt.MIXED:if(y<ie.PL)E=ie.MIXED_CHARS[y];else switch(y){case ie.PL:u=Dt.PUNCT;break;case 26:E=" ";break;case ie.LL:u=Dt.LOWER;break;case ie.AL:u=Dt.ALPHA;break;case ie.PS:f=u,u=Dt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break;case Dt.PUNCT:if(y<ie.PAL)E=ie.PUNCT_CHARS[y];else switch(y){case ie.PAL:u=Dt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break;case Dt.ALPHA_SHIFT:if(u=f,y<26)E=String.fromCharCode(65+y);else switch(y){case 26:E=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break;case Dt.PUNCT_SHIFT:if(u=f,y<ie.PAL)E=ie.PUNCT_CHARS[y];else switch(y){case ie.PAL:u=Dt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[m]);break;case ie.TEXT_COMPACTION_MODE_LATCH:u=Dt.ALPHA;break}break}E!==""&&o.append(E),m++}}static byteCompaction(t,r,i,o,u){let f=new ga,m=0,y=0,E=!1;switch(t){case ie.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),O=r[o++];for(;o<r[0]&&!E;)switch(C[m++]=O,y=900*y+O,O=r[o++],O){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:o--,E=!0;break;default:if(m%5===0&&m>0){for(let I=0;I<6;++I)f.write(Number(ui(y)>>ui(8*(5-I))));y=0,m=0}break}o===r[0]&&O<ie.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=O);for(let I=0;I<m;I++)f.write(C[I]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!E;){let I=r[o++];if(I<ie.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+I;else switch(I){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:o--,E=!0;break}if(m%5===0&&m>0){for(let L=0;L<6;++L)f.write(Number(ui(y)>>ui(8*(5-L))));y=0,m=0}}break}return u.append(At.decode(f.toByteArray(),i)),o}static numericCompaction(t,r,i){let o=0,u=!1,f=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!u;){let m=t[r++];if(r===t[0]&&(u=!0),m<ie.TEXT_COMPACTION_MODE_LATCH)f[o]=m,o++;else switch(m){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:r--,u=!0;break}(o%ie.MAX_NUMERIC_CODEWORDS===0||m===ie.NUMERIC_COMPACTION_MODE_LATCH||u)&&o>0&&(i.append(ie.decodeBase900toBase10(f,o)),o=0)}return r}static decodeBase900toBase10(t,r){let i=ui(0);for(let u=0;u<r;u++)i+=ie.EXP900[r-u-1]*ui(t[u]);let o=i.toString();if(o.charAt(0)!=="1")throw new ee;return o.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=xo()?fl():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class nt{constructor(){}static decode(t,r,i,o,u,f,m){let y=new $r(t,r,i,o,u),E=null,C=null,O;for(let P=!0;;P=!1){if(r!=null&&(E=nt.getRowIndicatorColumn(t,y,r,!0,f,m)),o!=null&&(C=nt.getRowIndicatorColumn(t,y,o,!1,f,m)),O=nt.merge(E,C),O==null)throw re.getNotFoundInstance();let z=O.getBoundingBox();if(P&&z!=null&&(z.getMinY()<y.getMinY()||z.getMaxY()>y.getMaxY()))y=z;else break}O.setBoundingBox(y);let I=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,E),O.setDetectionResultColumn(I,C);let L=E!=null;for(let P=1;P<=I;P++){let z=L?P:I-P;if(O.getDetectionResultColumn(z)!==void 0)continue;let X;z===0||z===I?X=new cl(y,z===0):X=new li(y),O.setDetectionResultColumn(z,X);let ne=-1,be=ne;for(let ye=y.getMinY();ye<=y.getMaxY();ye++){if(ne=nt.getStartColumn(O,z,ye,L),ne<0||ne>y.getMaxX()){if(be===-1)continue;ne=be}let me=nt.detectCodeword(t,y.getMinX(),y.getMaxX(),L,ne,ye,f,m);me!=null&&(X.setCodeword(ye,me),be=ne,f=Math.min(f,me.getWidth()),m=Math.max(m,me.getWidth()))}}return nt.createDecoderResult(O)}static merge(t,r){if(t==null&&r==null)return null;let i=nt.getBarcodeMetadata(t,r);if(i==null)return null;let o=$r.merge(nt.adjustBoundingBox(t),nt.adjustBoundingBox(r));return new Sn(i,o)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let i=nt.getMax(r),o=0;for(let m of r)if(o+=i-m,m>0)break;let u=t.getCodewords();for(let m=0;o>0&&u[m]==null;m++)o--;let f=0;for(let m=r.length-1;m>=0&&(f+=i-r[m],!(r[m]>0));m--);for(let m=u.length-1;f>0&&u[m]==null;m--)f--;return t.getBoundingBox().addMissingRows(o,f,t.isLeft())}static getMax(t){let r=-1;for(let i of t)r=Math.max(r,i);return r}static getBarcodeMetadata(t,r){let i;if(t==null||(i=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let o;return r==null||(o=r.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(t,r,i,o,u,f){let m=new cl(r,o);for(let y=0;y<2;y++){let E=y===0?1:-1,C=Math.trunc(Math.trunc(i.getX()));for(let O=Math.trunc(Math.trunc(i.getY()));O<=r.getMaxY()&&O>=r.getMinY();O+=E){let I=nt.detectCodeword(t,0,t.getWidth(),o,C,O,u,f);I!=null&&(m.setCodeword(O,I),o?C=I.getStartX():C=I.getEndX())}}return m}static adjustCodewordCount(t,r){let i=r[0][1],o=i.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-nt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(o.length===0){if(u<1||u>ze.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();i.setValue(u)}else o[0]!==u&&i.setValue(u)}static createDecoderResult(t){let r=nt.createBarcodeMatrix(t);nt.adjustCodewordCount(t,r);let i=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],f=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let E=0;E<t.getBarcodeColumnCount();E++){let C=r[y][E+1].getValue(),O=y*t.getBarcodeColumnCount()+E;C.length===0?i.push(O):C.length===1?o[O]=C[0]:(f.push(O),u.push(C))}let m=new Array(u.length);for(let y=0;y<m.length;y++)m[y]=u[y];return nt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,ze.toIntArray(i),ze.toIntArray(f),m)}static createDecoderResultFromAmbiguousValues(t,r,i,o,u){let f=new Int32Array(o.length),m=100;for(;m-- >0;){for(let y=0;y<f.length;y++)r[o[y]]=u[y][f[y]];try{return nt.decodeCodewords(r,t,i)}catch(y){if(!(y instanceof j))throw y}if(f.length===0)throw j.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<u[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let o=0;o<r.length;o++)for(let u=0;u<r[o].length;u++)r[o][u]=new oi;let i=0;for(let o of t.getDetectionResultColumns()){if(o!=null){for(let u of o.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=r.length)continue;r[f][i].setValue(u.getValue())}}}i++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,i,o){let u=o?1:-1,f=null;if(nt.isValidBarcodeColumn(t,r-u)&&(f=t.getDetectionResultColumn(r-u).getCodeword(i)),f!=null)return o?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(r).getCodewordNearby(i),f!=null)return o?f.getStartX():f.getEndX();if(nt.isValidBarcodeColumn(t,r-u)&&(f=t.getDetectionResultColumn(r-u).getCodewordNearby(i)),f!=null)return o?f.getEndX():f.getStartX();let m=0;for(;nt.isValidBarcodeColumn(t,r-u);){r-=u;for(let y of t.getDetectionResultColumn(r).getCodewords())if(y!=null)return(o?y.getEndX():y.getStartX())+u*m*(y.getEndX()-y.getStartX());m++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,i,o,u,f,m,y){u=nt.adjustCodewordStartColumn(t,r,i,o,u,f);let E=nt.getModuleBitCount(t,r,i,o,u,f);if(E==null)return null;let C,O=Xe.sum(E);if(o)C=u+O;else{for(let P=0;P<E.length/2;P++){let z=E[P];E[P]=E[E.length-1-P],E[E.length-1-P]=z}C=u,u=C-O}if(!nt.checkCodewordSkew(O,m,y))return null;let I=Ln.getDecodedValue(E),L=ze.getCodeword(I);return L===-1?null:new Or(u,C,nt.getCodewordBucketNumber(I),L)}static getModuleBitCount(t,r,i,o,u,f){let m=u,y=new Int32Array(8),E=0,C=o?1:-1,O=o;for(;(o?m<i:m>=r)&&E<y.length;)t.get(m,f)===O?(y[E]++,m+=C):(E++,O=!O);return E===y.length||m===(o?i:r)&&E===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,i,o,u,f){let m=u,y=o?-1:1;for(let E=0;E<2;E++){for(;(o?m>=r:m<i)&&o===t.get(m,f);){if(Math.abs(u-m)>nt.CODEWORD_SKEW_SIZE)return u;m+=y}y=-y,o=!o}return m}static checkCodewordSkew(t,r,i){return r-nt.CODEWORD_SKEW_SIZE<=t&&t<=i+nt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,i){if(t.length===0)throw ee.getFormatInstance();let o=1<<r+1,u=nt.correctErrors(t,i,o);nt.verifyCodewordCount(t,o);let f=ie.decode(t,""+r);return f.setErrorsCorrected(u),f.setErasures(i.length),f}static correctErrors(t,r,i){if(r!=null&&r.length>i/2+nt.MAX_ERRORS||i<0||i>nt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return nt.errorCorrection.decode(t,i,r)}static verifyCodewordCount(t,r){if(t.length<4)throw ee.getFormatInstance();let i=t[0];if(i>t.length)throw ee.getFormatInstance();if(i===0)if(r<t.length)t[0]=t.length-r;else throw ee.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),i=0,o=r.length-1;for(;!((t&1)!==i&&(i=t&1,o--,o<0));)r[o]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return nt.getCodewordBucketNumber(nt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new es;for(let i=0;i<t.length;i++){r.format("Row %2d: ",i);for(let o=0;o<t[i].length;o++){let u=t[i][o];u.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}r.format("%n")}return r.toString()}}nt.CODEWORD_SKEW_SIZE=2,nt.MAX_ERRORS=3,nt.MAX_EC_CODEWORDS=512,nt.errorCorrection=new Jr;class jn{decode(t,r=null){let i=jn.decode(t,r,!1);if(i==null||i.length===0||i[0]==null)throw re.getNotFoundInstance();return i[0]}decodeMultiple(t,r=null){try{return jn.decode(t,r,!0)}catch(i){throw i instanceof ee||i instanceof j?re.getNotFoundInstance():i}}static decode(t,r,i){const o=new Array,u=Ye.detectMultiple(t,r,i);for(const f of u.getPoints()){const m=nt.decode(u.getBits(),f[4],f[5],f[6],f[7],jn.getMinCodewordWidth(f),jn.getMaxCodewordWidth(f)),y=new Ee(m.getText(),m.getRawBytes(),void 0,f,pe.PDF_417);y.putMetadata(st.ERROR_CORRECTION_LEVEL,m.getECLevel());const E=m.getOther();E!=null&&y.putMetadata(st.PDF417_EXTRA_METADATA,E),o.push(y)}return o.map(f=>f)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?W.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(jn.getMaxWidth(t[0],t[4]),jn.getMaxWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.max(jn.getMaxWidth(t[1],t[5]),jn.getMaxWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(jn.getMinWidth(t[0],t[4]),jn.getMinWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.min(jn.getMinWidth(t[1],t[5]),jn.getMinWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class xa extends v{}xa.kind="ReaderException";class po{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!h(t)&&t.get(_e.TRY_HARDER)===!0,i=h(t)?null:t.get(_e.POSSIBLE_FORMATS),o=new Array;if(!h(i)){const u=i.some(f=>f===pe.UPC_A||f===pe.UPC_E||f===pe.EAN_13||f===pe.EAN_8||f===pe.CODABAR||f===pe.CODE_39||f===pe.CODE_93||f===pe.CODE_128||f===pe.ITF||f===pe.RSS_14||f===pe.RSS_EXPANDED);u&&!r&&o.push(new Sr(t,this.verbose)),i.includes(pe.QR_CODE)&&o.push(new Qr),i.includes(pe.DATA_MATRIX)&&o.push(new Zr),i.includes(pe.AZTEC)&&o.push(new Vi),i.includes(pe.PDF_417)&&o.push(new jn),u&&r&&o.push(new Sr(t,this.verbose))}o.length===0&&(r||o.push(new Sr(t,this.verbose)),o.push(new Qr),o.push(new Zr),o.push(new Vi),o.push(new jn),r&&o.push(new Sr(t,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new xa("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(i){if(i instanceof xa)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class yo extends ve{constructor(t=null,r=500){const i=new po;i.setHints(t),super(i,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class oc extends ve{constructor(t=500){super(new jn,t)}}class uc extends ve{constructor(t=500){super(new Qr,t)}}var dl;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(dl||(dl={}));var En=dl;class Us{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Zt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let i=r[r.length-1];const o=this.field;for(let u=r.length;u<=t;u++){const f=i.multiply(new Zt(o,Int32Array.from([1,o.exp(u-1+o.getGeneratorBase())])));r.push(f),i=f}}return r[t]}encode(t,r){if(r===0)throw new R("No error correction bytes");const i=t.length-r;if(i<=0)throw new R("No data bytes provided");const o=this.buildGenerator(r),u=new Int32Array(i);G.arraycopy(t,0,u,0,i);let f=new Zt(this.field,u);f=f.multiplyByMonomial(r,1);const y=f.divide(o)[1].getCoefficients(),E=r-y.length;for(let C=0;C<E;C++)t[i+C]=0;G.arraycopy(y,0,t,i+E,y.length)}}class an{constructor(){}static applyMaskPenaltyRule1(t){return an.applyMaskPenaltyRule1Internal(t,!0)+an.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const i=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let f=0;f<u-1;f++){const m=i[f];for(let y=0;y<o-1;y++){const E=m[y];E===m[y+1]&&E===i[f+1][y]&&E===i[f+1][y+1]&&r++}}return an.N2*r}static applyMaskPenaltyRule3(t){let r=0;const i=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let f=0;f<u;f++)for(let m=0;m<o;m++){const y=i[f];m+6<o&&y[m]===1&&y[m+1]===0&&y[m+2]===1&&y[m+3]===1&&y[m+4]===1&&y[m+5]===0&&y[m+6]===1&&(an.isWhiteHorizontal(y,m-4,m)||an.isWhiteHorizontal(y,m+7,m+11))&&r++,f+6<u&&i[f][m]===1&&i[f+1][m]===0&&i[f+2][m]===1&&i[f+3][m]===1&&i[f+4][m]===1&&i[f+5][m]===0&&i[f+6][m]===1&&(an.isWhiteVertical(i,m,f-4,f)||an.isWhiteVertical(i,m,f+7,f+11))&&r++}return r*an.N3}static isWhiteHorizontal(t,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(let o=r;o<i;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,r,i,o){i=Math.max(i,0),o=Math.min(o,t.length);for(let u=i;u<o;u++)if(t[u][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const i=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const E=i[y];for(let C=0;C<o;C++)E[C]===1&&r++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-f)*10/f)*an.N4}static getDataMaskBit(t,r,i){let o,u;switch(t){case 0:o=i+r&1;break;case 1:o=i&1;break;case 2:o=r%3;break;case 3:o=(i+r)%3;break;case 4:o=Math.floor(i/2)+Math.floor(r/3)&1;break;case 5:u=i*r,o=(u&1)+u%3;break;case 6:u=i*r,o=(u&1)+u%3&1;break;case 7:u=i*r,o=u%3+(i+r&1)&1;break;default:throw new R("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,r){let i=0;const o=r?t.getHeight():t.getWidth(),u=r?t.getWidth():t.getHeight(),f=t.getArray();for(let m=0;m<o;m++){let y=0,E=-1;for(let C=0;C<u;C++){const O=r?f[m][C]:f[C][m];O===E?y++:(y>=5&&(i+=an.N1+(y-5)),y=1,E=O)}y>=5&&(i+=an.N1+(y-5))}return i}}an.N1=3,an.N2=3,an.N3=40,an.N4=10;class pa{constructor(t,r){this.width=t,this.height=r;const i=new Array(r);for(let o=0;o!==r;o++)i[o]=new Uint8Array(t);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,i){this.bytes[r][t]=i}setBoolean(t,r,i){this.bytes[r][t]=i?1:0}clear(t){for(const r of this.bytes)ue.fill(r,t)}equals(t){if(!(t instanceof pa))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let i=0,o=this.height;i<o;++i){const u=this.bytes[i],f=r.bytes[i];for(let m=0,y=this.width;m<y;++m)if(u[m]!==f[m])return!1}return!0}toString(){const t=new We;for(let r=0,i=this.height;r<i;++r){const o=this.bytes[r];for(let u=0,f=this.width;u<f;++u)switch(o[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class bi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new We;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<bi.NUM_MASK_PATTERNS}}bi.NUM_MASK_PATTERNS=8;class Lt extends v{}Lt.kind="WriterException";class qe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,i,o,u){qe.clearMatrix(u),qe.embedBasicPatterns(i,u),qe.embedTypeInfo(r,o,u),qe.maybeEmbedVersionInfo(i,u),qe.embedDataBits(t,o,u)}static embedBasicPatterns(t,r){qe.embedPositionDetectionPatternsAndSeparators(r),qe.embedDarkDotAtLeftBottomCorner(r),qe.maybeEmbedPositionAdjustmentPatterns(t,r),qe.embedTimingPatterns(r)}static embedTypeInfo(t,r,i){const o=new xe;qe.makeTypeInfoBits(t,r,o);for(let u=0,f=o.getSize();u<f;++u){const m=o.get(o.getSize()-1-u),y=qe.TYPE_INFO_COORDINATES[u],E=y[0],C=y[1];if(i.setBoolean(E,C,m),u<8){const O=i.getWidth()-u-1;i.setBoolean(O,8,m)}else{const I=i.getHeight()-7+(u-8);i.setBoolean(8,I,m)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const i=new xe;qe.makeVersionInfoBits(t,i);let o=17;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const m=i.get(o);o--,r.setBoolean(u,r.getHeight()-11+f,m),r.setBoolean(r.getHeight()-11+f,u,m)}}static embedDataBits(t,r,i){let o=0,u=-1,f=i.getWidth()-1,m=i.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);m>=0&&m<i.getHeight();){for(let y=0;y<2;++y){const E=f-y;if(!qe.isEmpty(i.get(E,m)))continue;let C;o<t.getSize()?(C=t.get(o),++o):C=!1,r!==255&&an.getDataMaskBit(r,E,m)&&(C=!C),i.setBoolean(E,m,C)}m+=u}u=-u,m+=u,f-=2}if(o!==t.getSize())throw new Lt("Not all bits consumed: "+o+"/"+t.getSize())}static findMSBSet(t){return 32-W.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new R("0 polynomial");const i=qe.findMSBSet(r);for(t<<=i-1;qe.findMSBSet(t)>=i;)t^=r<<qe.findMSBSet(t)-i;return t}static makeTypeInfoBits(t,r,i){if(!bi.isValidMaskPattern(r))throw new Lt("Invalid mask pattern");const o=t.getBits()<<3|r;i.appendBits(o,5);const u=qe.calculateBCHCode(o,qe.TYPE_INFO_POLY);i.appendBits(u,10);const f=new xe;if(f.appendBits(qe.TYPE_INFO_MASK_PATTERN,15),i.xor(f),i.getSize()!==15)throw new Lt("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const i=qe.calculateBCHCode(t.getVersionNumber(),qe.VERSION_INFO_POLY);if(r.appendBits(i,12),r.getSize()!==18)throw new Lt("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const i=(r+1)%2;qe.isEmpty(t.get(r,6))&&t.setNumber(r,6,i),qe.isEmpty(t.get(6,r))&&t.setNumber(6,r,i)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Lt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,i){for(let o=0;o<8;++o){if(!qe.isEmpty(i.get(t+o,r)))throw new Lt;i.setNumber(t+o,r,0)}}static embedVerticalSeparationPattern(t,r,i){for(let o=0;o<7;++o){if(!qe.isEmpty(i.get(t,r+o)))throw new Lt;i.setNumber(t,r+o,0)}}static embedPositionAdjustmentPattern(t,r,i){for(let o=0;o<5;++o){const u=qe.POSITION_ADJUSTMENT_PATTERN[o];for(let f=0;f<5;++f)i.setNumber(t+f,r+o,u[f])}}static embedPositionDetectionPattern(t,r,i){for(let o=0;o<7;++o){const u=qe.POSITION_DETECTION_PATTERN[o];for(let f=0;f<7;++f)i.setNumber(t+f,r+o,u[f])}}static embedPositionDetectionPatternsAndSeparators(t){const r=qe.POSITION_DETECTION_PATTERN[0].length;qe.embedPositionDetectionPattern(0,0,t),qe.embedPositionDetectionPattern(t.getWidth()-r,0,t),qe.embedPositionDetectionPattern(0,t.getWidth()-r,t);const i=8;qe.embedHorizontalSeparationPattern(0,i-1,t),qe.embedHorizontalSeparationPattern(t.getWidth()-i,i-1,t),qe.embedHorizontalSeparationPattern(0,t.getWidth()-i,t);const o=7;qe.embedVerticalSeparationPattern(o,0,t),qe.embedVerticalSeparationPattern(t.getHeight()-o-1,0,t),qe.embedVerticalSeparationPattern(o,t.getHeight()-o,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const i=t.getVersionNumber()-1,o=qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let u=0,f=o.length;u!==f;u++){const m=o[u];if(m>=0)for(let y=0;y!==f;y++){const E=o[y];E>=0&&qe.isEmpty(r.get(E,m))&&qe.embedPositionAdjustmentPattern(E-2,m-2,r)}}}}qe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),qe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),qe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),qe.VERSION_INFO_POLY=7973,qe.TYPE_INFO_POLY=1335,qe.TYPE_INFO_MASK_PATTERN=21522;class cc{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Yt{constructor(){}static calculateMaskPenalty(t){return an.applyMaskPenaltyRule1(t)+an.applyMaskPenaltyRule2(t)+an.applyMaskPenaltyRule3(t)+an.applyMaskPenaltyRule4(t)}static encode(t,r,i=null){let o=Yt.DEFAULT_BYTE_MODE_ENCODING;const u=i!==null&&i.get(En.CHARACTER_SET)!==void 0;u&&(o=i.get(En.CHARACTER_SET).toString());const f=this.chooseMode(t,o),m=new xe;if(f===Pe.BYTE&&(u||Yt.DEFAULT_BYTE_MODE_ENCODING!==o)){const ye=de.getCharacterSetECIByName(o);ye!==void 0&&this.appendECI(ye,m)}this.appendModeInfo(f,m);const y=new xe;this.appendBytes(t,f,y,o);let E;if(i!==null&&i.get(En.QR_VERSION)!==void 0){const ye=Number.parseInt(i.get(En.QR_VERSION).toString(),10);E=Ie.getVersionForNumber(ye);const me=this.calculateBitsNeeded(f,m,y,E);if(!this.willFit(me,E,r))throw new Lt("Data too big for requested version")}else E=this.recommendVersion(r,f,m,y);const C=new xe;C.appendBitArray(m);const O=f===Pe.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(O,E,f,C),C.appendBitArray(y);const I=E.getECBlocksForLevel(r),L=E.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(L,C);const P=this.interleaveWithECBytes(C,E.getTotalCodewords(),L,I.getNumBlocks()),z=new bi;z.setECLevel(r),z.setMode(f),z.setVersion(E);const X=E.getDimensionForVersion(),ne=new pa(X,X),be=this.chooseMaskPattern(P,r,E,ne);return z.setMaskPattern(be),qe.buildMatrix(P,r,E,be,ne),z.setMatrix(ne),z}static recommendVersion(t,r,i,o){const u=this.calculateBitsNeeded(r,i,o,Ie.getVersionForNumber(1)),f=this.chooseVersion(u,t),m=this.calculateBitsNeeded(r,i,o,f);return this.chooseVersion(m,t)}static calculateBitsNeeded(t,r,i,o){return r.getSize()+t.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(t){return t<Yt.ALPHANUMERIC_TABLE.length?Yt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(de.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Pe.KANJI;let i=!1,o=!1;for(let u=0,f=t.length;u<f;++u){const m=t.charAt(u);if(Yt.isDigit(m))i=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)o=!0;else return Pe.BYTE}return o?Pe.ALPHANUMERIC:i?Pe.NUMERIC:Pe.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=At.encode(t,de.SJIS)}catch{return!1}const i=r.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const u=r[o]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,r,i,o){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let m=0;m<bi.NUM_MASK_PATTERNS;m++){qe.buildMatrix(t,r,i,m,o);let y=this.calculateMaskPenalty(o);y<u&&(u=y,f=m)}return f}static chooseVersion(t,r){for(let i=1;i<=40;i++){const o=Ie.getVersionForNumber(i);if(Yt.willFit(t,o,r))return o}throw new Lt("Data too big")}static willFit(t,r,i){const o=r.getTotalCodewords(),f=r.getECBlocksForLevel(i).getTotalECCodewords(),m=o-f,y=(t+7)/8;return m>=y}static terminateBits(t,r){const i=t*8;if(r.getSize()>i)throw new Lt("data bits cannot fit in the QR Code"+r.getSize()+" > "+i);for(let f=0;f<4&&r.getSize()<i;++f)r.appendBit(!1);const o=r.getSize()&7;if(o>0)for(let f=o;f<8;f++)r.appendBit(!1);const u=t-r.getSizeInBytes();for(let f=0;f<u;++f)r.appendBits((f&1)===0?236:17,8);if(r.getSize()!==i)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,i,o,u,f){if(o>=i)throw new Lt("Block ID too large");const m=t%i,y=i-m,E=Math.floor(t/i),C=E+1,O=Math.floor(r/i),I=O+1,L=E-O,P=C-I;if(L!==P)throw new Lt("EC bytes mismatch");if(i!==y+m)throw new Lt("RS blocks mismatch");if(t!==(O+L)*y+(I+P)*m)throw new Lt("Total bytes mismatch");o<y?(u[0]=O,f[0]=L):(u[0]=I,f[0]=P)}static interleaveWithECBytes(t,r,i,o){if(t.getSizeInBytes()!==i)throw new Lt("Number of bits and data bytes does not match");let u=0,f=0,m=0;const y=new Array;for(let C=0;C<o;++C){const O=new Int32Array(1),I=new Int32Array(1);Yt.getNumDataBytesAndNumECBytesForBlockID(r,i,o,C,O,I);const L=O[0],P=new Uint8Array(L);t.toBytes(8*u,P,0,L);const z=Yt.generateECBytes(P,I[0]);y.push(new cc(P,z)),f=Math.max(f,L),m=Math.max(m,z.length),u+=O[0]}if(i!==u)throw new Lt("Data bytes does not match offset");const E=new xe;for(let C=0;C<f;++C)for(const O of y){const I=O.getDataBytes();C<I.length&&E.appendBits(I[C],8)}for(let C=0;C<m;++C)for(const O of y){const I=O.getErrorCorrectionBytes();C<I.length&&E.appendBits(I[C],8)}if(r!==E.getSizeInBytes())throw new Lt("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,r){const i=t.length,o=new Int32Array(i+r);for(let f=0;f<i;f++)o[f]=t[f]&255;new Us($e.QR_CODE_FIELD_256).encode(o,r);const u=new Uint8Array(r);for(let f=0;f<r;f++)u[f]=o[i+f];return u}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,i,o){const u=i.getCharacterCountBits(r);if(t>=1<<u)throw new Lt(t+" is bigger than "+((1<<u)-1));o.appendBits(t,u)}static appendBytes(t,r,i,o){switch(r){case Pe.NUMERIC:Yt.appendNumericBytes(t,i);break;case Pe.ALPHANUMERIC:Yt.appendAlphanumericBytes(t,i);break;case Pe.BYTE:Yt.append8BitBytes(t,i,o);break;case Pe.KANJI:Yt.appendKanjiBytes(t,i);break;default:throw new Lt("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Yt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const i=t.length;let o=0;for(;o<i;){const u=Yt.getDigit(t.charAt(o));if(o+2<i){const f=Yt.getDigit(t.charAt(o+1)),m=Yt.getDigit(t.charAt(o+2));r.appendBits(u*100+f*10+m,10),o+=3}else if(o+1<i){const f=Yt.getDigit(t.charAt(o+1));r.appendBits(u*10+f,7),o+=2}else r.appendBits(u,4),o++}}static appendAlphanumericBytes(t,r){const i=t.length;let o=0;for(;o<i;){const u=Yt.getAlphanumericCode(t.charCodeAt(o));if(u===-1)throw new Lt;if(o+1<i){const f=Yt.getAlphanumericCode(t.charCodeAt(o+1));if(f===-1)throw new Lt;r.appendBits(u*45+f,11),o+=2}else r.appendBits(u,6),o++}}static append8BitBytes(t,r,i){let o;try{o=At.encode(t,i)}catch(u){throw new Lt(u)}for(let u=0,f=o.length;u!==f;u++){const m=o[u];r.appendBits(m,8)}}static appendKanjiBytes(t,r){let i;try{i=At.encode(t,de.SJIS)}catch(u){throw new Lt(u)}const o=i.length;for(let u=0;u<o;u+=2){const f=i[u]&255,m=i[u+1]&255,y=f<<8&4294967295|m;let E=-1;if(y>=33088&&y<=40956?E=y-33088:y>=57408&&y<=60351&&(E=y-49472),E===-1)throw new Lt("Invalid byte sequence");const C=(E>>8)*192+(E&255);r.appendBits(C,13)}}static appendECI(t,r){r.appendBits(Pe.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Yt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Yt.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class vi{write(t,r,i,o=null){if(t.length===0)throw new R("Found empty contents");if(r<0||i<0)throw new R("Requested dimensions are too small: "+r+"x"+i);let u=lt.L,f=vi.QUIET_ZONE_SIZE;o!==null&&(o.get(En.ERROR_CORRECTION)!==void 0&&(u=lt.fromString(o.get(En.ERROR_CORRECTION).toString())),o.get(En.MARGIN)!==void 0&&(f=Number.parseInt(o.get(En.MARGIN).toString(),10)));const m=Yt.encode(t,u,o);return this.renderResult(m,r,i,f)}writeToDom(t,r,i,o,u=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(r,i,o,u);t&&t.appendChild(f)}renderResult(t,r,i,o){const u=t.getMatrix();if(u===null)throw new Mn;const f=u.getWidth(),m=u.getHeight(),y=f+o*2,E=m+o*2,C=Math.max(r,y),O=Math.max(i,E),I=Math.min(Math.floor(C/y),Math.floor(O/E)),L=Math.floor((C-f*I)/2),P=Math.floor((O-m*I)/2),z=this.createSVGElement(C,O);for(let X=0,ne=P;X<m;X++,ne+=I)for(let be=0,ye=L;be<f;be++,ye+=I)if(u.get(be,X)===1){const me=this.createSvgRectElement(ye,ne,I,I);z.appendChild(me)}return z}createSVGElement(t,r){const i=document.createElementNS(vi.SVG_NS,"svg");return i.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width",r.toString()),i}createSvgRectElement(t,r,i,o){const u=document.createElementNS(vi.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",o.toString()),u.setAttributeNS(null,"fill","#000000"),u}}vi.QUIET_ZONE_SIZE=4,vi.SVG_NS="http://www.w3.org/2000/svg";class ns{encode(t,r,i,o,u){if(t.length===0)throw new R("Found empty contents");if(r!==pe.QR_CODE)throw new R("Can only encode QR_CODE, but got "+r);if(i<0||o<0)throw new R(`Requested dimensions are too small: ${i}x${o}`);let f=lt.L,m=ns.QUIET_ZONE_SIZE;u!==null&&(u.get(En.ERROR_CORRECTION)!==void 0&&(f=lt.fromString(u.get(En.ERROR_CORRECTION).toString())),u.get(En.MARGIN)!==void 0&&(m=Number.parseInt(u.get(En.MARGIN).toString(),10)));const y=Yt.encode(t,f,u);return ns.renderResult(y,i,o,m)}static renderResult(t,r,i,o){const u=t.getMatrix();if(u===null)throw new Mn;const f=u.getWidth(),m=u.getHeight(),y=f+o*2,E=m+o*2,C=Math.max(r,y),O=Math.max(i,E),I=Math.min(Math.floor(C/y),Math.floor(O/E)),L=Math.floor((C-f*I)/2),P=Math.floor((O-m*I)/2),z=new bt(C,O);for(let X=0,ne=P;X<m;X++,ne+=I)for(let be=0,ye=L;be<f;be++,ye+=I)u.get(be,X)===1&&z.setRegion(ye,ne,I,I);return z}}ns.QUIET_ZONE_SIZE=4;class hc{encode(t,r,i,o,u){let f;switch(r){case pe.QR_CODE:f=new ns;break;default:throw new R("No encoder available for format "+r)}return f.encode(t,r,i,o,u)}}class Fr extends Ue{constructor(t,r,i,o,u,f,m,y){if(super(f,m),this.yuvData=t,this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=u,o+f>r||u+m>i)throw new R("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(f,m)}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(t+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,o,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const i=t*r,o=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return G.arraycopy(this.yuvData,u,o,0,i),o;for(let f=0;f<r;f++){const m=f*t;G.arraycopy(this.yuvData,u,o,m,t),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,i,o){return new Fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)}renderThumbnail(){const t=this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<r;f++){const m=f*t;for(let y=0;y<t;y++){const E=o[u+y*Fr.THUMBNAIL_SCALE_FACTOR]&255;i[m+y]=4278190080|E*65793}u+=this.dataWidth*Fr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const i=this.yuvData;for(let o=0,u=this.top*this.dataWidth+this.left;o<r;o++,u+=this.dataWidth){const f=u+t/2;for(let m=u,y=u+t-1;m<f;m++,y--){const E=i[m];i[m]=i[y],i[y]=E}}}invert(){return new et(this)}}Fr.THUMBNAIL_SCALE_FACTOR=2;class gl extends Ue{constructor(t,r,i,o,u,f,m){if(super(r,i),this.dataWidth=o,this.dataHeight=u,this.left=f,this.top=m,t.BYTES_PER_ELEMENT===4){const y=r*i,E=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const O=t[C],I=O>>16&255,L=O>>7&510,P=O&255;E[C]=(I+L+P)/4&255}this.luminances=E}else this.luminances=t;if(o===void 0&&(this.dataWidth=r),u===void 0&&(this.dataHeight=i),f===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+i>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(t+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,o,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const i=t*r,o=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return G.arraycopy(this.luminances,u,o,0,i),o;for(let f=0;f<r;f++){const m=f*t;G.arraycopy(this.luminances,u,o,m,t),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,i,o){return new gl(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new et(this)}}class wo extends de{static forName(t){return this.getCharacterSetECIByName(t)}}class Ps{}Ps.ISO_8859_1=de.ISO8859_1;class rs{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class bo{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class vo{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Ei extends vo{constructor(t,r,i){super(t),this.value=r,this.bitCount=i}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new Ei(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ei(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+W.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ya extends Ei{constructor(t,r,i){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=i}appendTo(t,r){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)}addBinaryShift(t,r){return new ya(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Eo(T,t,r){return new ya(T,t,r)}function is(T,t,r){return new Ei(T,t,r)}const ss=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ci=0,wa=1,dr=2,ml=3,Nr=4,Fs=new Ei(null,0,0),_i=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function fc(T){for(let t of T)ue.fill(t,-1);return T[ci][Nr]=0,T[wa][Nr]=0,T[wa][ci]=28,T[ml][Nr]=0,T[dr][Nr]=0,T[dr][ci]=15,T}const zs=fc(ue.createInt32Array(6,6));class Rr{constructor(t,r,i,o){this.token=t,this.mode=r,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let i=this.bitCount,o=this.token;if(t!==this.mode){let f=_i[this.mode][t];o=is(o,f&65535,f>>16),i+=f>>16}let u=t===dr?4:5;return o=is(o,r,u),new Rr(o,t,0,i+u)}shiftAndAppend(t,r){let i=this.token,o=this.mode===dr?4:5;return i=is(i,zs[this.mode][t],o),i=is(i,r,5),new Rr(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(t){let r=this.token,i=this.mode,o=this.bitCount;if(this.mode===Nr||this.mode===dr){let m=_i[i][ci];r=is(r,m&65535,m>>16),o+=m>>16,i=ci}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Rr(r,i,this.binaryShiftByteCount+1,o+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Eo(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Rr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(_i[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Rr.calculateBinaryShiftCost(t)-Rr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let o=this.endBinaryShift(t.length).token;o!==null;o=o.getPrevious())r.unshift(o);let i=new xe;for(const o of r)o.appendTo(i,t);return i}toString(){return Oe.format("%s bits=%d bytes=%d",ss[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Rr.INITIAL_STATE=new Rr(Fs,ci,0,0);function _o(T){const t=Oe.getCharCode(" "),r=Oe.getCharCode("."),i=Oe.getCharCode(",");T[ci][t]=1;const o=Oe.getCharCode("Z"),u=Oe.getCharCode("A");for(let I=u;I<=o;I++)T[ci][I]=I-u+2;T[wa][t]=1;const f=Oe.getCharCode("z"),m=Oe.getCharCode("a");for(let I=m;I<=f;I++)T[wa][I]=I-m+2;T[dr][t]=1;const y=Oe.getCharCode("9"),E=Oe.getCharCode("0");for(let I=E;I<=y;I++)T[dr][I]=I-E+2;T[dr][i]=12,T[dr][r]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<C.length;I++)T[ml][Oe.getCharCode(C[I])]=I;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<O.length;I++)Oe.getCharCode(O[I])>0&&(T[Nr][Oe.getCharCode(O[I])]=I);return T}const qs=_o(ue.createInt32Array(5,256));class Ai{constructor(t){this.text=t}encode(){const t=Oe.getCharCode(" "),r=Oe.getCharCode(`
`);let i=bo.singletonList(Rr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,m=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Oe.getCharCode("\r"):f=m===r?2:0;break;case Oe.getCharCode("."):f=m===t?3:0;break;case Oe.getCharCode(","):f=m===t?4:0;break;case Oe.getCharCode(":"):f=m===t?5:0;break;default:f=0}f>0?(i=Ai.updateStateListForPair(i,u,f),u++):i=this.updateStateListForChar(i,u)}return bo.min(i,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const i=[];for(let o of t)this.updateStateForChar(o,r,i);return Ai.simplifyStates(i)}updateStateForChar(t,r,i){let o=this.text[r]&255,u=qs[t.getMode()][o]>0,f=null;for(let m=0;m<=Nr;m++){let y=qs[m][o];if(y>0){if(f==null&&(f=t.endBinaryShift(r)),!u||m===t.getMode()||m===dr){const E=f.latchAndAppend(m,y);i.push(E)}if(!u&&zs[t.getMode()][m]>=0){const E=f.shiftAndAppend(m,y);i.push(E)}}}if(t.getBinaryShiftByteCount()>0||qs[t.getMode()][o]===0){let m=t.addBinaryShiftChar(r);i.push(m)}}static updateStateListForPair(t,r,i){const o=[];for(let u of t)this.updateStateForPair(u,r,i,o);return this.simplifyStates(o)}static updateStateForPair(t,r,i,o){let u=t.endBinaryShift(r);if(o.push(u.latchAndAppend(Nr,i)),t.getMode()!==Nr&&o.push(u.shiftAndAppend(Nr,i)),i===3||i===4){let f=u.latchAndAppend(dr,16-i).latchAndAppend(dr,1);o.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(f)}}static simplifyStates(t){let r=[];for(const i of t){let o=!0;for(const u of r){if(u.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(u)&&(r=r.filter(f=>f!==u))}o&&r.push(i)}return r}}class mt{constructor(){}static encodeBytes(t){return mt.encode(t,mt.DEFAULT_EC_PERCENT,mt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,i){let o=new Ai(t).encode(),u=W.truncDivision(o.getSize()*r,100)+11,f=o.getSize()+u,m,y,E,C,O;if(i!==mt.DEFAULT_AZTEC_LAYERS){if(m=i<0,y=Math.abs(i),y>(m?mt.MAX_NB_BITS_COMPACT:mt.MAX_NB_BITS))throw new R(Oe.format("Illegal value %s for layers",i));E=mt.totalBitsInLayer(y,m),C=mt.WORD_SIZE[y];let me=E-E%C;if(O=mt.stuffBits(o,C),O.getSize()+u>me)throw new R("Data to large for user specified layer");if(m&&O.getSize()>C*64)throw new R("Data to large for user specified layer")}else{C=0,O=null;for(let me=0;;me++){if(me>mt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(m=me<=3,y=m?me+1:me,E=mt.totalBitsInLayer(y,m),f>E)continue;(O==null||C!==mt.WORD_SIZE[y])&&(C=mt.WORD_SIZE[y],O=mt.stuffBits(o,C));let at=E-E%C;if(!(m&&O.getSize()>C*64)&&O.getSize()+u<=at)break}}let I=mt.generateCheckWords(O,E,C),L=O.getSize()/C,P=mt.generateModeMessage(m,y,L),z=(m?11:14)+y*4,X=new Int32Array(z),ne;if(m){ne=z;for(let me=0;me<X.length;me++)X[me]=me}else{ne=z+1+2*W.truncDivision(W.truncDivision(z,2)-1,15);let me=W.truncDivision(z,2),at=W.truncDivision(ne,2);for(let Ke=0;Ke<me;Ke++){let mn=Ke+W.truncDivision(Ke,15);X[me-Ke-1]=at-mn-1,X[me+Ke]=at+mn+1}}let be=new bt(ne);for(let me=0,at=0;me<y;me++){let Ke=(y-me)*4+(m?9:12);for(let mn=0;mn<Ke;mn++){let gr=mn*2;for(let Vn=0;Vn<2;Vn++)I.get(at+gr+Vn)&&be.set(X[me*2+Vn],X[me*2+mn]),I.get(at+Ke*2+gr+Vn)&&be.set(X[me*2+mn],X[z-1-me*2-Vn]),I.get(at+Ke*4+gr+Vn)&&be.set(X[z-1-me*2-Vn],X[z-1-me*2-mn]),I.get(at+Ke*6+gr+Vn)&&be.set(X[z-1-me*2-mn],X[me*2+Vn])}at+=Ke*8}if(mt.drawModeMessage(be,m,ne,P),m)mt.drawBullsEye(be,W.truncDivision(ne,2),5);else{mt.drawBullsEye(be,W.truncDivision(ne,2),7);for(let me=0,at=0;me<W.truncDivision(z,2)-1;me+=15,at+=16)for(let Ke=W.truncDivision(ne,2)&1;Ke<ne;Ke+=2)be.set(W.truncDivision(ne,2)-at,Ke),be.set(W.truncDivision(ne,2)+at,Ke),be.set(Ke,W.truncDivision(ne,2)-at),be.set(Ke,W.truncDivision(ne,2)+at)}let ye=new rs;return ye.setCompact(m),ye.setSize(ne),ye.setLayers(y),ye.setCodeWords(L),ye.setMatrix(be),ye}static drawBullsEye(t,r,i){for(let o=0;o<i;o+=2)for(let u=r-o;u<=r+o;u++)t.set(u,r-o),t.set(u,r+o),t.set(r-o,u),t.set(r+o,u);t.set(r-i,r-i),t.set(r-i+1,r-i),t.set(r-i,r-i+1),t.set(r+i,r-i),t.set(r+i,r-i+1),t.set(r+i,r+i-1)}static generateModeMessage(t,r,i){let o=new xe;return t?(o.appendBits(r-1,2),o.appendBits(i-1,6),o=mt.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(i-1,11),o=mt.generateCheckWords(o,40,4)),o}static drawModeMessage(t,r,i,o){let u=W.truncDivision(i,2);if(r)for(let f=0;f<7;f++){let m=u-3+f;o.get(f)&&t.set(m,u-5),o.get(f+7)&&t.set(u+5,m),o.get(20-f)&&t.set(m,u+5),o.get(27-f)&&t.set(u-5,m)}else for(let f=0;f<10;f++){let m=u-5+f+W.truncDivision(f,5);o.get(f)&&t.set(m,u-7),o.get(f+10)&&t.set(u+7,m),o.get(29-f)&&t.set(m,u+7),o.get(39-f)&&t.set(u-7,m)}}static generateCheckWords(t,r,i){let o=t.getSize()/i,u=new Us(mt.getGF(i)),f=W.truncDivision(r,i),m=mt.bitsToWords(t,i,f);u.encode(m,f-o);let y=r%i,E=new xe;E.appendBits(0,y);for(const C of Array.from(m))E.appendBits(C,i);return E}static bitsToWords(t,r,i){let o=new Int32Array(i),u,f;for(u=0,f=t.getSize()/r;u<f;u++){let m=0;for(let y=0;y<r;y++)m|=t.get(u*r+y)?1<<r-y-1:0;o[u]=m}return o}static getGF(t){switch(t){case 4:return $e.AZTEC_PARAM;case 6:return $e.AZTEC_DATA_6;case 8:return $e.AZTEC_DATA_8;case 10:return $e.AZTEC_DATA_10;case 12:return $e.AZTEC_DATA_12;default:throw new R("Unsupported word size "+t)}}static stuffBits(t,r){let i=new xe,o=t.getSize(),u=(1<<r)-2;for(let f=0;f<o;f+=r){let m=0;for(let y=0;y<r;y++)(f+y>=o||t.get(f+y))&&(m|=1<<r-1-y);(m&u)===u?(i.appendBits(m&u,r),f--):(m&u)===0?(i.appendBits(m|1,r),f--):i.appendBits(m,r)}return i}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}mt.DEFAULT_EC_PERCENT=33,mt.DEFAULT_AZTEC_LAYERS=0,mt.MAX_NB_BITS=32,mt.MAX_NB_BITS_COMPACT=4,mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Hs{encode(t,r,i,o){return this.encodeWithHints(t,r,i,o,null)}encodeWithHints(t,r,i,o,u){let f=Ps.ISO_8859_1,m=mt.DEFAULT_EC_PERCENT,y=mt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(En.CHARACTER_SET)&&(f=wo.forName(u.get(En.CHARACTER_SET).toString())),u.has(En.ERROR_CORRECTION)&&(m=W.parseInt(u.get(En.ERROR_CORRECTION).toString())),u.has(En.AZTEC_LAYERS)&&(y=W.parseInt(u.get(En.AZTEC_LAYERS).toString()))),Hs.encodeLayers(t,r,i,o,f,m,y)}static encodeLayers(t,r,i,o,u,f,m){if(r!==pe.AZTEC)throw new R("Can only encode AZTEC, but got "+r);let y=mt.encode(Oe.getBytes(t,u),f,m);return Hs.renderResult(y,i,o)}static renderResult(t,r,i){let o=t.getMatrix();if(o==null)throw new Mn;let u=o.getWidth(),f=o.getHeight(),m=Math.max(r,u),y=Math.max(i,f),E=Math.min(m/u,y/f),C=(m-u*E)/2,O=(y-f*E)/2,I=new bt(m,y);for(let L=0,P=O;L<f;L++,P+=E)for(let z=0,X=C;z<u;z++,X+=E)o.get(z,L)&&I.setRegion(X,P,E,E);return I}}l.AbstractExpandedDecoder=hn,l.ArgumentException=N,l.ArithmeticException=cn,l.AztecCode=rs,l.AztecCodeReader=Vi,l.AztecCodeWriter=Hs,l.AztecDecoder=ke,l.AztecDetector=Bs,l.AztecDetectorResult=Is,l.AztecEncoder=mt,l.AztecHighLevelEncoder=Ai,l.AztecPoint=Bn,l.BarcodeFormat=pe,l.Binarizer=F,l.BinaryBitmap=k,l.BitArray=xe,l.BitMatrix=bt,l.BitSource=Tr,l.BrowserAztecCodeReader=al,l.BrowserBarcodeReader=sc,l.BrowserCodeReader=ve,l.BrowserDatamatrixCodeReader=ha,l.BrowserMultiFormatReader=yo,l.BrowserPDF417Reader=oc,l.BrowserQRCodeReader=uc,l.BrowserQRCodeSvgWriter=vi,l.CharacterSetECI=de,l.ChecksumException=j,l.Code128Reader=we,l.Code39Reader=Bt,l.DataMatrixDecodedBitStreamParser=Wr,l.DataMatrixReader=Zr,l.DecodeHintType=_e,l.DecoderResult=Nt,l.DefaultGridSampler=Ms,l.DetectorResult=vt,l.EAN13Reader=cr,l.EncodeHintType=En,l.Exception=v,l.FormatException=ee,l.GenericGF=$e,l.GenericGFPoly=Zt,l.GlobalHistogramBinarizer=te,l.GridSampler=Ds,l.GridSamplerInstance=tr,l.HTMLCanvasElementLuminanceSource=ot,l.HybridBinarizer=ce,l.ITFReader=Ze,l.IllegalArgumentException=R,l.IllegalStateException=Mn,l.InvertedLuminanceSource=et,l.LuminanceSource=Ue,l.MathUtils=Xe,l.MultiFormatOneDReader=Sr,l.MultiFormatReader=po,l.MultiFormatWriter=hc,l.NotFoundException=re,l.OneDReader=Ft,l.PDF417DecodedBitStreamParser=ie,l.PDF417DecoderErrorCorrection=Jr,l.PDF417Reader=jn,l.PDF417ResultMetadata=ts,l.PerspectiveTransform=Jn,l.PlanarYUVLuminanceSource=Fr,l.QRCodeByteMatrix=pa,l.QRCodeDataMask=ar,l.QRCodeDecodedBitStreamParser=Vt,l.QRCodeDecoderErrorCorrectionLevel=lt,l.QRCodeDecoderFormatInformation=Cn,l.QRCodeEncoder=Yt,l.QRCodeEncoderQRCode=bi,l.QRCodeMaskUtil=an,l.QRCodeMatrixUtil=qe,l.QRCodeMode=Pe,l.QRCodeReader=Qr,l.QRCodeVersion=Ie,l.QRCodeWriter=ns,l.RGBLuminanceSource=gl,l.RSS14Reader=kt,l.RSSExpandedReader=ge,l.ReaderException=xa,l.ReedSolomonDecoder=Er,l.ReedSolomonEncoder=Us,l.ReedSolomonException=rn,l.Result=Ee,l.ResultMetadataType=st,l.ResultPoint=Te,l.StringUtils=Oe,l.UnsupportedOperationException=Hn,l.VideoInputDevice=H,l.WhiteRectangleDetector=gt,l.WriterException=Lt,l.ZXingArrays=ue,l.ZXingCharset=wo,l.ZXingInteger=W,l.ZXingStandardCharsets=Ps,l.ZXingStringBuilder=We,l.ZXingStringEncoding=At,l.ZXingSystem=G,l.createAbstractExpandedDecoder=Ki,Object.defineProperty(l,"__esModule",{value:!0})}))})(ro,ro.exports)),ro.exports}var nn=dv();const gv=ao(nn),mv=I2({__proto__:null,default:gv},[nn]);var c2=(function(){function d(a,l,h){if(this.formatMap=new Map([[Se.QR_CODE,nn.BarcodeFormat.QR_CODE],[Se.AZTEC,nn.BarcodeFormat.AZTEC],[Se.CODABAR,nn.BarcodeFormat.CODABAR],[Se.CODE_39,nn.BarcodeFormat.CODE_39],[Se.CODE_93,nn.BarcodeFormat.CODE_93],[Se.CODE_128,nn.BarcodeFormat.CODE_128],[Se.DATA_MATRIX,nn.BarcodeFormat.DATA_MATRIX],[Se.MAXICODE,nn.BarcodeFormat.MAXICODE],[Se.ITF,nn.BarcodeFormat.ITF],[Se.EAN_13,nn.BarcodeFormat.EAN_13],[Se.EAN_8,nn.BarcodeFormat.EAN_8],[Se.PDF_417,nn.BarcodeFormat.PDF_417],[Se.RSS_14,nn.BarcodeFormat.RSS_14],[Se.RSS_EXPANDED,nn.BarcodeFormat.RSS_EXPANDED],[Se.UPC_A,nn.BarcodeFormat.UPC_A],[Se.UPC_E,nn.BarcodeFormat.UPC_E],[Se.UPC_EAN_EXTENSION,nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!mv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=h;var x=this.createZXingFormats(a),g=new Map;g.set(nn.DecodeHintType.POSSIBLE_FORMATS,x),g.set(nn.DecodeHintType.TRY_HARDER,!1),this.hints=g}return d.prototype.decodeAsync=function(a){var l=this;return new Promise(function(h,x){try{h(l.decode(a))}catch(g){x(g)}})},d.prototype.decode=function(a){var l=new nn.MultiFormatReader(this.verbose,this.hints),h=new nn.HTMLCanvasElementLuminanceSource(a),x=new nn.BinaryBitmap(new nn.HybridBinarizer(h)),g=l.decode(x);return{text:g.text,format:rx.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},d.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,h,x){a.set(l,h)}),a},d.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},d.prototype.createZXingFormats=function(a){for(var l=[],h=0,x=a;h<x.length;h++){var g=x[h];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return l},d.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},d})(),xv=function(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})},pv=function(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},h2=(function(){function d(a,l,h){if(this.formatMap=new Map([[Se.QR_CODE,"qr_code"],[Se.AZTEC,"aztec"],[Se.CODABAR,"codabar"],[Se.CODE_39,"code_39"],[Se.CODE_93,"code_93"],[Se.CODE_128,"code_128"],[Se.DATA_MATRIX,"data_matrix"],[Se.ITF,"itf"],[Se.EAN_13,"ean_13"],[Se.EAN_8,"ean_8"],[Se.PDF_417,"pdf417"],[Se.UPC_A,"upc_a"],[Se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!d.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=h;var x=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(x),!this.detector)throw"BarcodeDetector detector not supported"}return d.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},d.prototype.decodeAsync=function(a){return xv(this,void 0,void 0,function(){var l,h;return pv(this,function(x){switch(x.label){case 0:return[4,this.detector.detect(a)];case 1:if(l=x.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(l),[2,{text:h.rawValue,format:rx.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},d.prototype.selectLargestBarcode=function(a){for(var l=null,h=0,x=0,g=a;x<g.length;x++){var b=g[x],A=b.boundingBox.width*b.boundingBox.height;A>h&&(h=A,l=b)}if(!l)throw"No largest barcode found";return l},d.prototype.createBarcodeDetectorFormats=function(a){for(var l=[],h=0,x=a;h<x.length;h++){var g=x[h];this.formatMap.has(g)?l.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},d.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},d.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,h,x){a.set(l,h)}),a},d.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},d})(),f2=function(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})},d2=function(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},yv=(function(){function d(a,l,h,x){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,l&&h2.isSupported()?(this.primaryDecoder=new h2(a,h,x),this.secondaryDecoder=new c2(a,h,x)):this.primaryDecoder=new c2(a,h,x)}return d.prototype.decodeAsync=function(a){return f2(this,void 0,void 0,function(){var l;return d2(this,function(h){switch(h.label){case 0:l=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},d.prototype.decodeRobustlyAsync=function(a){return f2(this,void 0,void 0,function(){var l,h;return d2(this,function(x){switch(x.label){case 0:l=performance.now(),x.label=1;case 1:return x.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,x.sent()];case 3:if(h=x.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw h;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},d.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},d.prototype.possiblyLogPerformance=function(a){if(this.verbose){var l=performance.now()-a;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},d.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,l=0,h=this.executionResults;l<h.length;l++){var x=h[l];a+=x}var g=a/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},d})(),l0=(function(){var d=function(a,l){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,x){h.__proto__=x}||function(h,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(h[g]=x[g])},d(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");d(a,l);function h(){this.constructor=a}a.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}})(),$u=function(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})},ec=function(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},sx=(function(){function d(a,l){this.name=a,this.track=l}return d.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},d.prototype.apply=function(a){var l={};l[this.name]=a;var h={advanced:[l]};return this.track.applyConstraints(h)},d.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var l=a[this.name];return l}return null},d})(),wv=(function(d){l0(a,d);function a(l,h){return d.call(this,l,h)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(l){var h={};h[this.name]=l;var x={advanced:[h]};return this.track.applyConstraints(x)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),h=l[this.name];return{min:h.min,max:h.max,step:h.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a})(sx),bv=(function(d){l0(a,d);function a(l){return d.call(this,"zoom",l)||this}return a})(wv),vv=(function(d){l0(a,d);function a(l){return d.call(this,"torch",l)||this}return a})(sx),Ev=(function(){function d(a){this.track=a}return d.prototype.zoomFeature=function(){return new bv(this.track)},d.prototype.torchFeature=function(){return new vv(this.track)},d})(),_v=(function(){function d(a,l,h){this.isClosed=!1,this.parentElement=a,this.mediaStream=l,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return d.prototype.createVideoElement=function(a){var l=document.createElement("video");return l.style.width="".concat(a,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},d.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var h=a.surface.clientWidth,x=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(h,x),a.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},d.create=function(a,l,h,x){return $u(this,void 0,void 0,function(){var g,b;return ec(this,function(A){switch(A.label){case 0:return g=new d(a,l,x),h.aspectRatio?(b={aspectRatio:h.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(b)]):[3,2];case 1:A.sent(),A.label=2;case 2:return g.setupSurface(),[2,g]}})})},d.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},d.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},d.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},d.prototype.resume=function(a){this.failIfClosed();var l=this,h=function(){setTimeout(a,200),l.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},d.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},d.prototype.getSurface=function(){return this.failIfClosed(),this.surface},d.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},d.prototype.applyVideoConstraints=function(a){return $u(this,void 0,void 0,function(){return ec(this,function(l){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},d.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(l,h){var x=a.mediaStream.getVideoTracks(),g=x.length,b=0;a.mediaStream.getVideoTracks().forEach(function(A){a.mediaStream.removeTrack(A),A.stop(),++b,b>=g&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),l())})})},d.prototype.getCapabilities=function(){return new Ev(this.getFirstTrackOrFail())},d})(),Av=(function(){function d(a){this.mediaStream=a}return d.prototype.render=function(a,l,h){return $u(this,void 0,void 0,function(){return ec(this,function(x){return[2,_v.create(a,this.mediaStream,l,h)]})})},d.create=function(a){return $u(this,void 0,void 0,function(){var l,h;return ec(this,function(x){switch(x.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return h=x.sent(),[2,new d(h)]}})})},d})(),g2=function(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})},m2=function(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Cv=(function(){function d(){}return d.failIfNotSupported=function(){return g2(this,void 0,void 0,function(){return m2(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new d]})})},d.prototype.create=function(a){return g2(this,void 0,void 0,function(){return m2(this,function(l){return[2,Av.create(a)]})})},d})(),Sv=function(d,a,l,h){function x(g){return g instanceof l?g:new l(function(b){b(g)})}return new(l||(l=Promise))(function(g,b){function A(N){try{v(h.next(N))}catch(R){b(R)}}function _(N){try{v(h.throw(N))}catch(R){b(R)}}function v(N){N.done?g(N.value):x(N.value).then(A,_)}v((h=h.apply(d,a||[])).next())})},Tv=function(d,a){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,x,g,b;return b={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function A(v){return function(N){return _([v,N])}}function _(v){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,v[0]&&(l=0)),l;)try{if(h=1,x&&(g=v[0]&2?x.return:v[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,v[1])).done)return g;switch(x=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,x=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(d,l)}catch(N){v=[6,N],x=0}finally{h=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Ov=(function(){function d(){}return d.retrieve=function(){if(navigator.mediaDevices)return d.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?d.getCamerasFromMediaStreamTrack():d.rejectWithError()},d.rejectWithError=function(){var a=$a.unableToQuerySupportedDevices();return d.isHttpsOrLocalhost()||(a=$a.insecureContextCameraQueryError()),Promise.reject(a)},d.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},d.getCamerasFromMediaDevices=function(){return Sv(this,void 0,void 0,function(){var a,l,h,x,g,b,A;return Tv(this,function(_){switch(_.label){case 0:return a=function(v){for(var N=v.getVideoTracks(),R=0,k=N;R<k.length;R++){var j=k[R];j.enabled=!1,j.stop(),v.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=_.sent(),x=[],g=0,b=h;g<b.length;g++)A=b[g],A.kind==="videoinput"&&x.push({id:A.deviceId,label:A.label});return a(l),[2,x]}})})},d.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,l){var h=function(g){for(var b=[],A=0,_=g;A<_.length;A++){var v=_[A];v.kind==="video"&&b.push({id:v.id,label:v.label})}a(b)},x=MediaStreamTrack;x.getSources(h)})},d})(),yn;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.NOT_STARTED=1]="NOT_STARTED",d[d.SCANNING=2]="SCANNING",d[d.PAUSED=3]="PAUSED"})(yn||(yn={}));var Nv=(function(){function d(){this.state=yn.NOT_STARTED,this.onGoingTransactionNewState=yn.UNKNOWN}return d.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},d.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},d.prototype.execute=function(){if(this.onGoingTransactionNewState===yn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=yn.UNKNOWN,this.directTransition(a)},d.prototype.cancel=function(){if(this.onGoingTransactionNewState===yn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=yn.UNKNOWN},d.prototype.getState=function(){return this.state},d.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==yn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},d.prototype.validateTransition=function(a){switch(this.state){case yn.UNKNOWN:throw"Transition from unknown is not allowed";case yn.NOT_STARTED:this.failIfNewStateIs(a,[yn.PAUSED]);break;case yn.SCANNING:break;case yn.PAUSED:break}},d.prototype.failIfNewStateIs=function(a,l){for(var h=0,x=l;h<x.length;h++){var g=x[h];if(a===g)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},d})(),Rv=(function(){function d(a){this.stateManager=a}return d.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},d.prototype.directTransition=function(a){this.stateManager.directTransition(a)},d.prototype.getState=function(){return this.stateManager.getState()},d.prototype.canScanFile=function(){return this.stateManager.getState()===yn.NOT_STARTED},d.prototype.isScanning=function(){return this.stateManager.getState()!==yn.NOT_STARTED},d.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===yn.SCANNING},d.prototype.isPaused=function(){return this.stateManager.getState()===yn.PAUSED},d})(),Iv=(function(){function d(){}return d.create=function(){return new Rv(new Nv)},d})(),Dv=(function(){var d=function(a,l){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,x){h.__proto__=x}||function(h,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(h[g]=x[g])},d(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");d(a,l);function h(){this.constructor=a}a.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}})(),jr=(function(d){Dv(a,d);function a(){return d!==null&&d.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a})(uv),Mv=(function(){function d(a,l){this.logger=l,this.fps=jr.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=jr.DEFAULT_DISABLE_FLIP}return d.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ix.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},d.prototype.isShadedBoxEnabled=function(){return!Hi(this.qrbox)},d.create=function(a,l){return new d(a,l)},d})(),Bv=(function(){function d(a,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var h;typeof l=="boolean"?this.verbose=l===!0:l&&(h=l,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new hv(this.verbose),this.qrcode=new yv(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Iv.create()}return d.prototype.start=function(a,l,h,x){var g=this;if(!a)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var b;x?b=x:b=this.verbose?this.logger.log:function(){};var A=Mv.create(l,this.logger);this.clearElement();var _=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=_,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:jr.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var R=this,k=this.stateManagerProxy.startTransition(yn.SCANNING);return new Promise(function(j,F){var G=v?A.videoConstraints:R.createVideoConstraints(a);if(!G){k.cancel(),F("videoConstraints should be defined");return}var J={};(!v||A.aspectRatio)&&(J.aspectRatio=A.aspectRatio);var ae={onRenderSurfaceReady:function(ue,W){R.setupUi(ue,W,A),R.isScanning=!0,R.foreverScan(A,h,b)}};Cv.failIfNotSupported().then(function(ue){ue.create(G).then(function(W){return W.render(g.element,J,ae).then(function(xe){R.renderedCamera=xe,k.execute(),j(null)}).catch(function(xe){k.cancel(),F(xe)})}).catch(function(W){k.cancel(),F($a.errorGettingUserMedia(W))})}).catch(function(ue){k.cancel(),F($a.cameraStreamingNotSupported())})})},d.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(yn.PAUSED),this.showPausedState(),(Hi(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},d.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,l=function(){a.stateManagerProxy.directTransition(yn.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},d.prototype.getState=function(){return this.stateManagerProxy.getState()},d.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(yn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(a.element){var g=document.getElementById(jr.SHADED_REGION_ELEMENT_ID);g&&a.element.removeChild(g)}},x=this;return this.renderedCamera.close().then(function(){return x.renderedCamera=null,x.element&&(x.element.removeChild(x.canvasElement),x.canvasElement=null),h(),x.qrRegion&&(x.qrRegion=null),x.context&&(x.context=null),l.execute(),x.hidePausedState(),x.isScanning=!1,Promise.resolve()})},d.prototype.scanFile=function(a,l){return this.scanFileV2(a,l).then(function(h){return h.decodedText})},d.prototype.scanFileV2=function(a,l){var h=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Hi(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(x,g){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(a);var b=new Image;b.onload=function(){var A=b.width,_=b.height,v=document.getElementById(h.elementId),N=v.clientWidth?v.clientWidth:jr.DEFAULT_WIDTH,R=Math.max(v.clientHeight?v.clientHeight:_,jr.FILE_SCAN_MIN_HEIGHT),k=h.computeCanvasDrawConfig(A,_,N,R);if(l){var j=h.createCanvasElement(N,R,"qr-canvas-visible");j.style.display="inline-block",v.appendChild(j);var F=j.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=N,F.canvas.height=R,F.drawImage(b,0,0,A,_,k.x,k.y,k.width,k.height)}var G=jr.FILE_SCAN_HIDDEN_CANVAS_PADDING,J=Math.max(b.width,k.width),ae=Math.max(b.height,k.height),ue=J+2*G,W=ae+2*G,xe=h.createCanvasElement(ue,W);v.appendChild(xe);var Le=xe.getContext("2d");if(!Le)throw"Unable to get 2d context from canvas";Le.canvas.width=ue,Le.canvas.height=W,Le.drawImage(b,0,0,A,_,G,G,J,ae);try{h.qrcode.decodeRobustlyAsync(xe).then(function(_e){x(o2.createFromQrcodeResult(_e))}).catch(g)}catch(_e){g("QR code parse error, error = ".concat(_e))}},b.onerror=g,b.onabort=g,b.onstalled=g,b.onsuspend=g,b.src=URL.createObjectURL(a)})},d.prototype.clear=function(){this.clearElement()},d.getCameras=function(){return Ov.retrieve()},d.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},d.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},d.prototype.applyVideoConstraints=function(a){if(a){if(!ix.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},d.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},d.prototype.getSupportedFormats=function(a){var l=[Se.QR_CODE,Se.AZTEC,Se.CODABAR,Se.CODE_39,Se.CODE_93,Se.CODE_128,Se.DATA_MATRIX,Se.MAXICODE,Se.ITF,Se.EAN_13,Se.EAN_8,Se.PDF_417,Se.RSS_14,Se.RSS_EXPANDED,Se.UPC_A,Se.UPC_E,Se.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return l;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],x=0,g=a.formatsToSupport;x<g.length;x++){var b=g[x];ov(b)?h.push(b):this.logger.warn("Invalid format: ".concat(b," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},d.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Hi(a))return!0;if(!Hi(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Hi(a.experimentalFeatures))return!0;var l=a.experimentalFeatures;return Hi(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},d.prototype.validateQrboxSize=function(a,l,h){var x=this,g=h.qrbox;this.validateQrboxConfig(g);var b=this.toQrdimensions(a,l,g),A=function(v){if(v<jr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(jr.MIN_QR_BOX_SIZE,"px.")},_=function(v){return v>a&&(x.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=a),v};A(b.width),A(b.height),b.width=_(b.width)},d.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},d.prototype.toQrdimensions=function(a,l,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(a,l)}catch(x){throw new Error("qrbox config was passed as a function but it failed with unknown error"+x)}return h},d.prototype.setupUi=function(a,l,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(a,l,h);var x=Hi(h.qrbox)?{width:a,height:l}:h.qrbox;this.validateQrboxConfig(x);var g=this.toQrdimensions(a,l,x);g.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var b=h.isShadedBoxEnabled()&&g.height<=l,A={x:0,y:0,width:a,height:l},_=b?this.getShadedRegionBounds(a,l,g):A,v=this.createCanvasElement(_.width,_.height),N={willReadFrequently:!0},R=v.getContext("2d",N);R.canvas.width=_.width,R.canvas.height=_.height,this.element.append(v),b&&this.possiblyInsertShadingElement(this.element,a,l,g),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=R,this.canvasElement=v},d.prototype.createScannerPausedUiElement=function(a){var l=document.createElement("div");l.innerText=$a.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",a.appendChild(l),this.scannerPausedUiElement=l},d.prototype.scanContext=function(a,l){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(x){return a(x.text,o2.createFromQrcodeResult(x)),h.possiblyUpdateShaders(!0),!0}).catch(function(x){h.possiblyUpdateShaders(!1);var g=$a.codeParseError(x);return l(g,cv.createFrom(g)),!1})},d.prototype.foreverScan=function(a,l,h){var x=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),b=g.videoWidth/g.clientWidth,A=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*b,v=this.qrRegion.height*A,N=this.qrRegion.x*b,R=this.qrRegion.y*A;this.context.drawImage(g,N,R,_,v,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){x.foreverScanTimeout=setTimeout(function(){x.foreverScan(a,l,h)},x.getTimeoutFps(a.fps))};this.scanContext(l,h).then(function(j){!j&&a.disableFlip!==!0?(x.context.translate(x.context.canvas.width,0),x.context.scale(-1,1),x.scanContext(l,h).finally(function(){k()})):k()}).catch(function(j){x.logger.logError("Error happend while scanning context",j),k()})}},d.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var l="facingMode",h="deviceId",x={user:!0,environment:!0},g="exact",b=function(F){if(F in x)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},A=Object.keys(a);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var _=Object.keys(a)[0];if(_!==l&&_!==h)throw"Only '".concat(l,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(_===l){var v=a.facingMode;if(typeof v=="string"){if(b(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(b(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var N=typeof v;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var R=a.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(g in R)return{deviceId:{exact:R["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var k=typeof R;throw"Invalid type of 'deviceId' = ".concat(k)}}}var j=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},d.prototype.computeCanvasDrawConfig=function(a,l,h,x){if(a<=h&&l<=x){var g=(h-a)/2,b=(x-l)/2;return{x:g,y:b,width:a,height:l}}else{var A=a,_=l;return a>h&&(l=h/a*l,a=h),l>x&&(a=x/l*a,l=x),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(_)+" to ".concat(a,"X").concat(l,".")),this.computeCanvasDrawConfig(a,l,h,x)}},d.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},d.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=a?jr.BORDER_SHADER_MATCH_COLOR:jr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},d.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},d.prototype.createCanvasElement=function(a,l,h){var x=a,g=l,b=document.createElement("canvas");return b.style.width="".concat(x,"px"),b.style.height="".concat(g,"px"),b.style.display="none",b.id=Hi(h)?"qr-canvas":h,b},d.prototype.getShadedRegionBounds=function(a,l,h){if(h.width>a||h.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-h.width)/2,y:(l-h.height)/2,width:h.width,height:h.height}},d.prototype.possiblyInsertShadingElement=function(a,l,h,x){if(!(l-x.width<1||h-x.height<1)){var g=document.createElement("div");g.style.position="absolute";var b=(l-x.width)/2,A=(h-x.height)/2;if(g.style.borderLeft="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(jr.SHADED_REGION_ELEMENT_ID),l-x.width<11||h-x.height<11)this.hasBorderShaders=!1;else{var _=5,v=40;this.insertShaderBorders(g,v,_,-_,null,0,!0),this.insertShaderBorders(g,v,_,-_,null,0,!1),this.insertShaderBorders(g,v,_,null,-_,0,!0),this.insertShaderBorders(g,v,_,null,-_,0,!1),this.insertShaderBorders(g,_,v+_,-_,null,-_,!0),this.insertShaderBorders(g,_,v+_,null,-_,-_,!0),this.insertShaderBorders(g,_,v+_,-_,null,-_,!1),this.insertShaderBorders(g,_,v+_,null,-_,-_,!1),this.hasBorderShaders=!0}a.append(g)}},d.prototype.insertShaderBorders=function(a,l,h,x,g,b,A){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=jr.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(l,"px"),_.style.height="".concat(h,"px"),x!==null&&(_.style.top="".concat(x,"px")),g!==null&&(_.style.bottom="".concat(g,"px")),A?_.style.left="".concat(b,"px"):_.style.right="".concat(b,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),a.appendChild(_)},d.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},d.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},d.prototype.getTimeoutFps=function(a){return 1e3/a},d})(),x2;(function(d){d[d.STATUS_DEFAULT=0]="STATUS_DEFAULT",d[d.STATUS_SUCCESS=1]="STATUS_SUCCESS",d[d.STATUS_WARNING=2]="STATUS_WARNING",d[d.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(x2||(x2={}));const kv=({onScan:d,onClose:a})=>{const[l,h]=it.useState(null),x=it.useRef(null),g=it.useRef(!1);return it.useEffect(()=>{g.current=!0;const b="html5qr-code-full-region",_=setTimeout(async()=>{try{const v=new Bv(b);x.current=v;const N={fps:10,qrbox:{width:250,height:250},formatsToSupport:[Se.QR_CODE,Se.CODE_128,Se.EAN_13]};await v.start({facingMode:"environment"},N,R=>{g.current&&d(R)},R=>{})}catch(v){g.current&&(h("No foi possvel acessar a cmera. Verifique as permisses."),console.error(v))}},100);return()=>{g.current=!1,clearTimeout(_),x.current&&x.current.isScanning&&x.current.stop().then(()=>{var v;(v=x.current)==null||v.clear()}).catch(console.error)}},[d]),M.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[M.jsxs("div",{className:"flex justify-between items-center p-4 text-white bg-black/50 z-10",children:[M.jsx("h2",{className:"text-lg font-bold",children:"Escanear Cdigo"}),M.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-white/20",children:M.jsx(ly,{size:28})})]}),M.jsx("div",{className:"flex-1 relative bg-black flex items-center justify-center",children:l?M.jsxs("div",{className:"text-white text-center p-6",children:[M.jsx(ty,{size:48,className:"mx-auto mb-4 opacity-50"}),M.jsx("p",{children:l})]}):M.jsx("div",{id:"html5qr-code-full-region",className:"w-full h-full"})}),M.jsx("div",{className:"p-6 bg-black/80 text-white text-center text-sm",children:"Aponte a cmera para o cdigo de barras ou QR Code."})]})};var Za={},yf={exports:{}},wf,p2;function Lv(){if(p2)return wf;p2=1;var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wf=d,wf}var bf,y2;function jv(){if(y2)return bf;y2=1;var d=Lv();function a(){}function l(){}return l.resetWarningCache=a,bf=function(){function h(b,A,_,v,N,R){if(R!==d){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}h.isRequired=h;function x(){return h}var g={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:x,element:h,elementType:h,instanceOf:x,node:h,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:l,resetWarningCache:a};return g.PropTypes=g,g},bf}var w2;function ax(){return w2||(w2=1,yf.exports=jv()()),yf.exports}var vf,b2;function lx(){return b2||(b2=1,vf={L:1,M:0,Q:3,H:2}),vf}var Ef,v2;function ox(){return v2||(v2=1,Ef={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),Ef}var _f,E2;function Uv(){if(E2)return _f;E2=1;var d=ox();function a(l){this.mode=d.MODE_8BIT_BYTE,this.data=l}return a.prototype={getLength:function(l){return this.data.length},write:function(l){for(var h=0;h<this.data.length;h++)l.put(this.data.charCodeAt(h),8)}},_f=a,_f}var Af,_2;function Pv(){if(_2)return Af;_2=1;var d=lx();function a(l,h){this.totalCount=l,this.dataCount=h}return a.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a.getRSBlocks=function(l,h){var x=a.getRsBlockTable(l,h);if(x==null)throw new Error("bad rs block @ typeNumber:"+l+"/errorCorrectLevel:"+h);for(var g=x.length/3,b=new Array,A=0;A<g;A++)for(var _=x[A*3+0],v=x[A*3+1],N=x[A*3+2],R=0;R<_;R++)b.push(new a(v,N));return b},a.getRsBlockTable=function(l,h){switch(h){case d.L:return a.RS_BLOCK_TABLE[(l-1)*4+0];case d.M:return a.RS_BLOCK_TABLE[(l-1)*4+1];case d.Q:return a.RS_BLOCK_TABLE[(l-1)*4+2];case d.H:return a.RS_BLOCK_TABLE[(l-1)*4+3];default:return}},Af=a,Af}var Cf,A2;function Fv(){if(A2)return Cf;A2=1;function d(){this.buffer=new Array,this.length=0}return d.prototype={get:function(a){var l=Math.floor(a/8);return(this.buffer[l]>>>7-a%8&1)==1},put:function(a,l){for(var h=0;h<l;h++)this.putBit((a>>>l-h-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(a){var l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),a&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Cf=d,Cf}var Sf,C2;function ux(){if(C2)return Sf;C2=1;for(var d={glog:function(l){if(l<1)throw new Error("glog("+l+")");return d.LOG_TABLE[l]},gexp:function(l){for(;l<0;)l+=255;for(;l>=256;)l-=255;return d.EXP_TABLE[l]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},a=0;a<8;a++)d.EXP_TABLE[a]=1<<a;for(var a=8;a<256;a++)d.EXP_TABLE[a]=d.EXP_TABLE[a-4]^d.EXP_TABLE[a-5]^d.EXP_TABLE[a-6]^d.EXP_TABLE[a-8];for(var a=0;a<255;a++)d.LOG_TABLE[d.EXP_TABLE[a]]=a;return Sf=d,Sf}var Tf,S2;function cx(){if(S2)return Tf;S2=1;var d=ux();function a(l,h){if(l.length==null)throw new Error(l.length+"/"+h);for(var x=0;x<l.length&&l[x]==0;)x++;this.num=new Array(l.length-x+h);for(var g=0;g<l.length-x;g++)this.num[g]=l[g+x]}return a.prototype={get:function(l){return this.num[l]},getLength:function(){return this.num.length},multiply:function(l){for(var h=new Array(this.getLength()+l.getLength()-1),x=0;x<this.getLength();x++)for(var g=0;g<l.getLength();g++)h[x+g]^=d.gexp(d.glog(this.get(x))+d.glog(l.get(g)));return new a(h,0)},mod:function(l){if(this.getLength()-l.getLength()<0)return this;for(var h=d.glog(this.get(0))-d.glog(l.get(0)),x=new Array(this.getLength()),g=0;g<this.getLength();g++)x[g]=this.get(g);for(var g=0;g<l.getLength();g++)x[g]^=d.gexp(d.glog(l.get(g))+h);return new a(x,0).mod(l)}},Tf=a,Tf}var Of,T2;function zv(){if(T2)return Of;T2=1;var d=ox(),a=cx(),l=ux(),h={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},x={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(g){for(var b=g<<10;x.getBCHDigit(b)-x.getBCHDigit(x.G15)>=0;)b^=x.G15<<x.getBCHDigit(b)-x.getBCHDigit(x.G15);return(g<<10|b)^x.G15_MASK},getBCHTypeNumber:function(g){for(var b=g<<12;x.getBCHDigit(b)-x.getBCHDigit(x.G18)>=0;)b^=x.G18<<x.getBCHDigit(b)-x.getBCHDigit(x.G18);return g<<12|b},getBCHDigit:function(g){for(var b=0;g!=0;)b++,g>>>=1;return b},getPatternPosition:function(g){return x.PATTERN_POSITION_TABLE[g-1]},getMask:function(g,b,A){switch(g){case h.PATTERN000:return(b+A)%2==0;case h.PATTERN001:return b%2==0;case h.PATTERN010:return A%3==0;case h.PATTERN011:return(b+A)%3==0;case h.PATTERN100:return(Math.floor(b/2)+Math.floor(A/3))%2==0;case h.PATTERN101:return b*A%2+b*A%3==0;case h.PATTERN110:return(b*A%2+b*A%3)%2==0;case h.PATTERN111:return(b*A%3+(b+A)%2)%2==0;default:throw new Error("bad maskPattern:"+g)}},getErrorCorrectPolynomial:function(g){for(var b=new a([1],0),A=0;A<g;A++)b=b.multiply(new a([1,l.gexp(A)],0));return b},getLengthInBits:function(g,b){if(1<=b&&b<10)switch(g){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+g)}else if(b<27)switch(g){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+g)}else if(b<41)switch(g){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+g)}else throw new Error("type:"+b)},getLostPoint:function(g){for(var b=g.getModuleCount(),A=0,_=0;_<b;_++)for(var v=0;v<b;v++){for(var N=0,R=g.isDark(_,v),k=-1;k<=1;k++)if(!(_+k<0||b<=_+k))for(var j=-1;j<=1;j++)v+j<0||b<=v+j||k==0&&j==0||R==g.isDark(_+k,v+j)&&N++;N>5&&(A+=3+N-5)}for(var _=0;_<b-1;_++)for(var v=0;v<b-1;v++){var F=0;g.isDark(_,v)&&F++,g.isDark(_+1,v)&&F++,g.isDark(_,v+1)&&F++,g.isDark(_+1,v+1)&&F++,(F==0||F==4)&&(A+=3)}for(var _=0;_<b;_++)for(var v=0;v<b-6;v++)g.isDark(_,v)&&!g.isDark(_,v+1)&&g.isDark(_,v+2)&&g.isDark(_,v+3)&&g.isDark(_,v+4)&&!g.isDark(_,v+5)&&g.isDark(_,v+6)&&(A+=40);for(var v=0;v<b;v++)for(var _=0;_<b-6;_++)g.isDark(_,v)&&!g.isDark(_+1,v)&&g.isDark(_+2,v)&&g.isDark(_+3,v)&&g.isDark(_+4,v)&&!g.isDark(_+5,v)&&g.isDark(_+6,v)&&(A+=40);for(var G=0,v=0;v<b;v++)for(var _=0;_<b;_++)g.isDark(_,v)&&G++;var J=Math.abs(100*G/b/b-50)/5;return A+=J*10,A}};return Of=x,Of}var Nf,O2;function qv(){if(O2)return Nf;O2=1;var d=Uv(),a=Pv(),l=Fv(),h=zv(),x=cx();function g(A,_){this.typeNumber=A,this.errorCorrectLevel=_,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var b=g.prototype;return b.addData=function(A){var _=new d(A);this.dataList.push(_),this.dataCache=null},b.isDark=function(A,_){if(A<0||this.moduleCount<=A||_<0||this.moduleCount<=_)throw new Error(A+","+_);return this.modules[A][_]},b.getModuleCount=function(){return this.moduleCount},b.make=function(){if(this.typeNumber<1){var A=1;for(A=1;A<40;A++){for(var _=a.getRSBlocks(A,this.errorCorrectLevel),v=new l,N=0,R=0;R<_.length;R++)N+=_[R].dataCount;for(var R=0;R<this.dataList.length;R++){var k=this.dataList[R];v.put(k.mode,4),v.put(k.getLength(),h.getLengthInBits(k.mode,A)),k.write(v)}if(v.getLengthInBits()<=N*8)break}this.typeNumber=A}this.makeImpl(!1,this.getBestMaskPattern())},b.makeImpl=function(A,_){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++){this.modules[v]=new Array(this.moduleCount);for(var N=0;N<this.moduleCount;N++)this.modules[v][N]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(A,_),this.typeNumber>=7&&this.setupTypeNumber(A),this.dataCache==null&&(this.dataCache=g.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,_)},b.setupPositionProbePattern=function(A,_){for(var v=-1;v<=7;v++)if(!(A+v<=-1||this.moduleCount<=A+v))for(var N=-1;N<=7;N++)_+N<=-1||this.moduleCount<=_+N||(0<=v&&v<=6&&(N==0||N==6)||0<=N&&N<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=N&&N<=4?this.modules[A+v][_+N]=!0:this.modules[A+v][_+N]=!1)},b.getBestMaskPattern=function(){for(var A=0,_=0,v=0;v<8;v++){this.makeImpl(!0,v);var N=h.getLostPoint(this);(v==0||A>N)&&(A=N,_=v)}return _},b.createMovieClip=function(A,_,v){var N=A.createEmptyMovieClip(_,v),R=1;this.make();for(var k=0;k<this.modules.length;k++)for(var j=k*R,F=0;F<this.modules[k].length;F++){var G=F*R,J=this.modules[k][F];J&&(N.beginFill(0,100),N.moveTo(G,j),N.lineTo(G+R,j),N.lineTo(G+R,j+R),N.lineTo(G,j+R),N.endFill())}return N},b.setupTimingPattern=function(){for(var A=8;A<this.moduleCount-8;A++)this.modules[A][6]==null&&(this.modules[A][6]=A%2==0);for(var _=8;_<this.moduleCount-8;_++)this.modules[6][_]==null&&(this.modules[6][_]=_%2==0)},b.setupPositionAdjustPattern=function(){for(var A=h.getPatternPosition(this.typeNumber),_=0;_<A.length;_++)for(var v=0;v<A.length;v++){var N=A[_],R=A[v];if(this.modules[N][R]==null)for(var k=-2;k<=2;k++)for(var j=-2;j<=2;j++)k==-2||k==2||j==-2||j==2||k==0&&j==0?this.modules[N+k][R+j]=!0:this.modules[N+k][R+j]=!1}},b.setupTypeNumber=function(A){for(var _=h.getBCHTypeNumber(this.typeNumber),v=0;v<18;v++){var N=!A&&(_>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=N}for(var v=0;v<18;v++){var N=!A&&(_>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=N}},b.setupTypeInfo=function(A,_){for(var v=this.errorCorrectLevel<<3|_,N=h.getBCHTypeInfo(v),R=0;R<15;R++){var k=!A&&(N>>R&1)==1;R<6?this.modules[R][8]=k:R<8?this.modules[R+1][8]=k:this.modules[this.moduleCount-15+R][8]=k}for(var R=0;R<15;R++){var k=!A&&(N>>R&1)==1;R<8?this.modules[8][this.moduleCount-R-1]=k:R<9?this.modules[8][15-R-1+1]=k:this.modules[8][15-R-1]=k}this.modules[this.moduleCount-8][8]=!A},b.mapData=function(A,_){for(var v=-1,N=this.moduleCount-1,R=7,k=0,j=this.moduleCount-1;j>0;j-=2)for(j==6&&j--;;){for(var F=0;F<2;F++)if(this.modules[N][j-F]==null){var G=!1;k<A.length&&(G=(A[k]>>>R&1)==1);var J=h.getMask(_,N,j-F);J&&(G=!G),this.modules[N][j-F]=G,R--,R==-1&&(k++,R=7)}if(N+=v,N<0||this.moduleCount<=N){N-=v,v=-v;break}}},g.PAD0=236,g.PAD1=17,g.createData=function(A,_,v){for(var N=a.getRSBlocks(A,_),R=new l,k=0;k<v.length;k++){var j=v[k];R.put(j.mode,4),R.put(j.getLength(),h.getLengthInBits(j.mode,A)),j.write(R)}for(var F=0,k=0;k<N.length;k++)F+=N[k].dataCount;if(R.getLengthInBits()>F*8)throw new Error("code length overflow. ("+R.getLengthInBits()+">"+F*8+")");for(R.getLengthInBits()+4<=F*8&&R.put(0,4);R.getLengthInBits()%8!=0;)R.putBit(!1);for(;!(R.getLengthInBits()>=F*8||(R.put(g.PAD0,8),R.getLengthInBits()>=F*8));)R.put(g.PAD1,8);return g.createBytes(R,N)},g.createBytes=function(A,_){for(var v=0,N=0,R=0,k=new Array(_.length),j=new Array(_.length),F=0;F<_.length;F++){var G=_[F].dataCount,J=_[F].totalCount-G;N=Math.max(N,G),R=Math.max(R,J),k[F]=new Array(G);for(var ae=0;ae<k[F].length;ae++)k[F][ae]=255&A.buffer[ae+v];v+=G;var ue=h.getErrorCorrectPolynomial(J),W=new x(k[F],ue.getLength()-1),xe=W.mod(ue);j[F]=new Array(ue.getLength()-1);for(var ae=0;ae<j[F].length;ae++){var Le=ae+xe.getLength()-j[F].length;j[F][ae]=Le>=0?xe.get(Le):0}}for(var _e=0,ae=0;ae<_.length;ae++)_e+=_[ae].totalCount;for(var ee=new Array(_e),Me=0,ae=0;ae<N;ae++)for(var F=0;F<_.length;F++)ae<k[F].length&&(ee[Me++]=k[F][ae]);for(var ae=0;ae<R;ae++)for(var F=0;F<_.length;F++)ae<j[F].length&&(ee[Me++]=j[F][ae]);return ee},Nf=g,Nf}var ju={},N2;function Hv(){if(N2)return ju;N2=1,Object.defineProperty(ju,"__esModule",{value:!0});var d=Object.assign||function(v){for(var N=1;N<arguments.length;N++){var R=arguments[N];for(var k in R)Object.prototype.hasOwnProperty.call(R,k)&&(v[k]=R[k])}return v},a=ax(),l=g(a),h=oo(),x=g(h);function g(v){return v&&v.__esModule?v:{default:v}}function b(v,N){var R={};for(var k in v)N.indexOf(k)>=0||Object.prototype.hasOwnProperty.call(v,k)&&(R[k]=v[k]);return R}var A={bgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,bgD:l.default.string.isRequired,fgColor:l.default.oneOfType([l.default.object,l.default.string]).isRequired,fgD:l.default.string.isRequired,size:l.default.number.isRequired,title:l.default.string,viewBoxSize:l.default.number.isRequired,xmlns:l.default.string},_=(0,h.forwardRef)(function(v,N){var R=v.bgColor,k=v.bgD,j=v.fgD,F=v.fgColor,G=v.size,J=v.title,ae=v.viewBoxSize,ue=v.xmlns,W=ue===void 0?"http://www.w3.org/2000/svg":ue,xe=b(v,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return x.default.createElement("svg",d({},xe,{height:G,ref:N,viewBox:"0 0 "+ae+" "+ae,width:G,xmlns:W}),J?x.default.createElement("title",null,J):null,x.default.createElement("path",{d:k,fill:R}),x.default.createElement("path",{d:j,fill:F}))});return _.displayName="QRCodeSvg",_.propTypes=A,ju.default=_,ju}var R2;function Gv(){if(R2)return Za;R2=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.QRCode=void 0;var d=Object.assign||function(G){for(var J=1;J<arguments.length;J++){var ae=arguments[J];for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(G[ue]=ae[ue])}return G},a=ax(),l=R(a),h=lx(),x=R(h),g=qv(),b=R(g),A=oo(),_=R(A),v=Hv(),N=R(v);function R(G){return G&&G.__esModule?G:{default:G}}function k(G,J){var ae={};for(var ue in G)J.indexOf(ue)>=0||Object.prototype.hasOwnProperty.call(G,ue)&&(ae[ue]=G[ue]);return ae}var j={bgColor:l.default.oneOfType([l.default.object,l.default.string]),fgColor:l.default.oneOfType([l.default.object,l.default.string]),level:l.default.string,size:l.default.number,value:l.default.string.isRequired},F=(0,A.forwardRef)(function(G,J){var ae=G.bgColor,ue=ae===void 0?"#FFFFFF":ae,W=G.fgColor,xe=W===void 0?"#000000":W,Le=G.level,_e=Le===void 0?"L":Le,ee=G.size,Me=ee===void 0?256:ee,de=G.value,Hn=k(G,["bgColor","fgColor","level","size","value"]),At=new b.default(-1,x.default[_e]);At.addData(de),At.make();var Oe=At.modules;return _.default.createElement(N.default,d({},Hn,{bgColor:ue,bgD:Oe.map(function(We,bt){return We.map(function(re,te){return re?"":"M "+te+" "+bt+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:xe,fgD:Oe.map(function(We,bt){return We.map(function(re,te){return re?"M "+te+" "+bt+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:J,size:Me,viewBoxSize:Oe.length}))});return Za.QRCode=F,F.displayName="QRCode",F.propTypes=j,Za.default=F,Za}var Vv=Gv();const Xv=ao(Vv),Yv=({product:d,onClose:a})=>{const l=()=>{var x;const h=window.open("","","height=500,width=500");if(h){const g=((x=document.getElementById("qr-code-svg"))==null?void 0:x.outerHTML)||"";h.document.write(`
            <html>
                <body style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; font-family:sans-serif;">
                    <h2 style="margin-bottom:10px;">${d.name}</h2>
                    ${g}
                    <p style="margin-top:10px; font-weight:bold; font-family:monospace;">${d.id}</p>
                    <script>
                        setTimeout(() => { window.print(); window.close(); }, 500);
                    <\/script>
                </body>
            </html>
        `),h.document.close()}};return M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl relative",children:[M.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:M.jsx(qu,{size:24})}),M.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:"Etiqueta"}),M.jsxs("div",{className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl p-6 flex flex-col items-center",children:[M.jsx("h4",{className:"font-bold text-lg mb-4 text-center",children:d.name}),M.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm",children:M.jsx(Xv,{id:"qr-code-svg",value:d.id,size:160,level:"H"})}),M.jsx("p",{className:"font-mono font-bold mt-4 text-slate-600",children:d.id})]}),M.jsx("div",{className:"mt-6",children:M.jsxs("button",{onClick:l,className:"w-full bg-qq-green hover:bg-qq-green-dark text-white py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-qq-green/20 transition-all active:scale-95",children:[M.jsx(_y,{size:20}),"Imprimir"]})})]})})},Kv=({toasts:d,removeToast:a})=>M.jsx("div",{className:"fixed top-4 left-0 right-0 z-[100] flex flex-col items-center gap-2 pointer-events-none px-4",children:d.map(l=>M.jsxs("div",{className:`
            pointer-events-auto flex items-center p-4 rounded-xl shadow-lg border w-full max-w-sm animate-fade-in
            ${l.type==="success"?"bg-white border-green-200 text-green-700":""}
            ${l.type==="error"?"bg-white border-red-200 text-red-700":""}
            ${l.type==="info"?"bg-white border-blue-200 text-blue-700":""}
          `,children:[M.jsxs("div",{className:"mr-3",children:[l.type==="success"&&M.jsx(sy,{size:20}),l.type==="error"&&M.jsx(ry,{size:20}),l.type==="info"&&M.jsx(yy,{size:20})]}),M.jsx("p",{className:"flex-1 text-sm font-medium",children:l.text}),M.jsx("button",{onClick:()=>a(l.id),className:"ml-2 opacity-50 hover:opacity-100",children:M.jsx(qu,{size:16})})]},l.id))}),Wv=()=>{const[d,a]=it.useState("home"),[l,h]=it.useState([]),[x,g]=it.useState([]),[b,A]=it.useState([]),[_,v]=it.useState(!1),[N,R]=it.useState(!1),[k,j]=it.useState(""),[F,G]=it.useState([]),[J,ae]=it.useState(""),[ue,W]=it.useState(""),[xe,Le]=it.useState(!1),[_e,ee]=it.useState(!1),[Me,de]=it.useState(!1),[Hn,At]=it.useState(!1),[Oe,We]=it.useState(!1),[bt,re]=it.useState(!1),[te,ce]=it.useState("global"),[Ue,et]=it.useState(!1),[ot,H]=it.useState(!1),[le,ve]=it.useState(null),[Ee,Ve]=it.useState(null),[pe,ct]=it.useState(null),[st,Nt]=it.useState(ev()),[un,Zt]=it.useState({id:"",name:"",qty:""}),[cn,$e]=it.useState({qty:1,obs:"",matricula:""}),[rn,Mn]=it.useState("out"),Er=it.useRef(null),fn={id:"",orderNumber:"",customerName:"",matricula:"",date:new Date().toISOString().slice(0,10),status:"pending",items:[],obs:""},[ke,Xe]=it.useState(fn),[_r,Te]=it.useState(""),vt=(Y,Ce)=>{const je=Date.now();G(Qe=>[...Qe,{id:je,type:Y,text:Ce}]),setTimeout(()=>Is(je),3e3)},Is=Y=>{G(Ce=>Ce.filter(je=>je.id!==Y))},gt=it.useCallback(async()=>{v(!0);try{const Y=await ex(),Ce=await tx(),je=await a0();h(Y),g(Ce),A(je)}catch(Y){console.error(Y),vt("error","Erro ao carregar dados.")}finally{v(!1)}},[]);it.useEffect(()=>{const Y=Yf();R(Y),gt()},[gt]);const Ds=()=>{tv(st);const Y=Yf();R(Y),Le(!1),vt("success",Y?"Conectado ao Supabase!":"Configurao salva (Offline)."),gt()},Jn=()=>{nv(),R(!1),Nt({url:"",key:""}),Le(!1),vt("info","Desconectado. Usando modo offline."),gt()},Ms=async()=>{const Y=N?"ATENO: Isso apagar TODO o histrico no Banco de Dados. Tem certeza?":"Limpar histrico local?";if(window.confirm(Y)){v(!0);try{await iv(),await gt(),vt("success","Histrico apagado com sucesso.")}catch(Ce){console.error("Delete Error:",Ce),vt("error","Erro ao apagar: "+Ce.message)}finally{v(!1)}}},tr=async()=>{if(!un.id||!un.name){vt("error","Preencha cdigo e nome.");return}v(!0);try{const Y=parseInt(un.qty)||0;await xf({id:un.id,name:un.name,qty:Y},!0),await gt(),ee(!1),Zt({id:"",name:"",qty:""}),vt("success","Produto salvo!")}catch(Y){vt("error",Y.message||"Erro ao salvar.")}finally{v(!1)}},Bn=async()=>{if(!le)return;const Y=cn.qty,Ce=rn==="out",je=Ce?-Y:Y;if(Ce&&le.qty<Y){vt("error","Estoque insuficiente.");return}if(!cn.matricula.trim()){vt("error","Preencha a matrcula.");return}v(!0);try{const Qe=le.qty+je,Rt={...le,qty:Qe};await xf(Rt,!1),await s2({id:Date.now(),date:new Date().toISOString(),prodId:le.id,prodName:le.name,qty:je,obs:cn.obs,matricula:cn.matricula}),await gt(),de(!1),ve(null),$e(nr=>({...nr,qty:1,obs:""})),vt("success","Estoque atualizado!")}catch(Qe){vt("error",Qe.message)}finally{v(!1)}},Bs=()=>{Xe({...fn,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString()}),et(!0)},Vi=Y=>{Xe({...Y}),et(!0)},al=Y=>{ct(Y),H(!0)},Ft=async()=>{if(!ke.orderNumber||!ke.customerName){vt("error","Preencha Nmero e Nome.");return}if(ke.items.length===0){vt("error","Adicione pelo menos um item.");return}v(!0);try{const Y=!b.find(Qe=>Qe.id===ke.id),je=ke.items.every(Qe=>Qe.qtyPicked>=Qe.qtyRequested)?"completed":"pending";await pf({...ke,status:je},Y),await gt(),et(!1),vt("success","Pedido salvo!")}catch(Y){vt("error","Erro ao salvar pedido: "+Y.message)}finally{v(!1)}},we=async Y=>{if(window.confirm("Tem certeza que deseja excluir este pedido?")){v(!0);try{await sv(Y),await gt(),vt("success","Pedido excludo.")}catch(Ce){vt("error",Ce.message)}finally{v(!1)}}},Bt=Y=>{if(ke.items.find(je=>je.productId===Y.id)){const je=ke.items.map(Qe=>Qe.productId===Y.id?{...Qe,qtyRequested:Qe.qtyRequested+1}:Qe);Xe({...ke,items:je})}else{const je={productId:Y.id,productName:Y.name,qtyRequested:1,qtyPicked:0};Xe({...ke,items:[...ke.items,je]})}vt("success","Item adicionado.")},Ze=(Y,Ce)=>{Ce<=0?Xe({...ke,items:ke.items.filter(je=>je.productId!==Y)}):Xe({...ke,items:ke.items.map(je=>je.productId===Y?{...je,qtyRequested:Ce}:je)})},Gt=async(Y,Ce=!1)=>{if(!pe)return;if(Y.qtyPicked>=Y.qtyRequested){Ce||vt("info","Item j separado totalmente.");return}const je=l.find(Qe=>Qe.id===Y.productId);if(!je){vt("error","Produto no encontrado no estoque.");return}if(je.qty<=0){vt("error","Produto sem estoque!");return}if(!(!Ce&&!window.confirm(`Confirmar baixa de 1x ${Y.productName}? Isso descontar do estoque.`))){v(!0);try{const Qe=je.qty-1;await xf({...je,qty:Qe},!1),await s2({id:Date.now(),date:new Date().toISOString(),prodId:Y.productId,prodName:Y.productName,qty:-1,obs:`Separao Pedido #${pe.orderNumber}`,matricula:pe.matricula});const Rt=pe.items.map(zn=>zn.productId===Y.productId?{...zn,qtyPicked:zn.qtyPicked+1}:zn),nr=Rt.every(zn=>zn.qtyPicked>=zn.qtyRequested),Fn={...pe,items:Rt,status:nr?"completed":"pending"};await pf(Fn,!1),ct(Fn),await gt(),vt("success",`Item ${Y.productName} baixado.`)}catch(Qe){vt("error","Erro na baixa: "+Qe.message)}finally{v(!1)}}},xi=async Y=>{var Qe;const Ce=(Qe=Y.target.files)==null?void 0:Qe[0];if(!Ce)return;const je=new FileReader;je.onload=async Rt=>{var nr;try{const Fn=(nr=Rt.target)==null?void 0:nr.result;if(!Fn)return;v(!0);const zn=Fn.split(`
`),sn=new Map,Cr=zn[0].toLowerCase().includes("numero")?1:0;for(let dn=Cr;dn<zn.length;dn++){const Ae=zn[dn].trim();if(!Ae)continue;const[bn,hn,It,rr,hr,Yi]=Ae.split(";");if(!bn||!hr)continue;const ir=parseInt(Yi)||1,ks=l.find(yt=>yt.id===hr),yi=ks?ks.name:`Produto ${hr}`;sn.has(bn)||sn.set(bn,{id:crypto.randomUUID?crypto.randomUUID():`IMP-${Date.now()}-${dn}`,orderNumber:bn,customerName:hn||"Importado",matricula:It||"",date:rr||new Date().toISOString().slice(0,10),status:"pending",items:[],obs:"Importado via CSV"});const Gn=sn.get(bn),Qt=Gn.items.find(yt=>yt.productId===hr);Qt?Qt.qtyRequested+=ir:Gn.items.push({productId:hr,productName:yi,qtyRequested:ir,qtyPicked:0})}for(const dn of sn.values())await pf(dn,!0);await gt(),vt("success",`${sn.size} pedidos importados!`),We(!1)}catch(Fn){console.error(Fn),vt("error","Erro ao importar CSV.")}finally{v(!1),Er.current&&(Er.current.value="")}},je.readAsText(Ce)},Xi=Y=>{if(re(!1),te==="global"){const Ce=l.find(je=>je.id===Y);Ce?(ve(Ce),Mn("out"),$e(je=>({...je,qty:1,obs:""})),de(!0)):window.confirm(`Produto ${Y} no encontrado. Deseja cadastrar?`)&&(Zt({id:Y,name:"",qty:""}),ee(!0))}else if(te==="order"&&pe){const Ce=pe.items.find(je=>je.productId===Y);Ce?Gt(Ce,!0):vt("error","Este produto no pertence a este pedido."),ce("global")}},pi=()=>{ce("order"),re(!0)},ut=()=>{var Ce;const Y=(Ce=document.getElementById("manual-code-input"))==null?void 0:Ce.value;Y&&Xi(Y)},cr=Y=>{ve(Y),Mn("out"),$e({qty:1,obs:"",matricula:""}),de(!0)},Ar=l.filter(Y=>Y.name.toLowerCase().includes(k.toLowerCase())||Y.id.toLowerCase().includes(k.toLowerCase())),ai=x.filter(Y=>{if(!J&&!ue)return!0;const Ce=new Date(Y.date);Ce.setHours(0,0,0,0);let je=!0,Qe=!0;if(J){const Rt=new Date(J);Rt.setHours(0,0,0,0),je=Ce.getTime()>=Rt.getTime()}if(ue){const Rt=new Date(ue);Rt.setHours(0,0,0,0),Qe=Ce.getTime()<=Rt.getTime()}return je&&Qe}),kn=l.filter(Y=>Y.name.toLowerCase().includes(_r.toLowerCase())||Y.id.toLowerCase().includes(_r.toLowerCase()));return M.jsxs("div",{className:"max-w-[480px] mx-auto bg-slate-50 min-h-screen relative shadow-2xl pb-24",children:[M.jsx(Kv,{toasts:F,removeToast:Is}),M.jsxs("header",{className:"bg-qq-green text-white p-4 sticky top-0 z-40 shadow-lg flex justify-between items-center rounded-b-3xl",children:[M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("div",{className:"bg-white/10 p-2 rounded-xl backdrop-blur-sm",children:M.jsx(vg,{size:24,className:"text-white"})}),M.jsxs("div",{children:[M.jsxs("h1",{className:"text-lg font-bold leading-tight",children:["Estoque ",M.jsx("span",{className:"text-qq-yellow",children:"Palavra"})]}),M.jsxs("div",{className:"flex items-center gap-1.5 opacity-80",children:[M.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.8)]":"bg-slate-400"}`}),M.jsx("span",{className:"text-[10px] font-medium tracking-wide uppercase",children:N?"Online":"Offline"})]})]})]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx("button",{onClick:gt,className:"w-10 h-10 flex items-center justify-center bg-qq-green-dark/50 hover:bg-qq-green-dark rounded-full transition active:scale-95 backdrop-blur-sm",children:M.jsx(Sy,{size:18,className:_?"animate-spin":""})}),M.jsx("button",{onClick:()=>At(!0),className:"w-10 h-10 flex items-center justify-center bg-qq-green-dark/50 hover:bg-qq-green-dark rounded-full transition active:scale-95 backdrop-blur-sm",children:M.jsx(dy,{size:18})}),M.jsx("button",{onClick:()=>Le(!0),className:"w-10 h-10 flex items-center justify-center bg-qq-green-dark/50 hover:bg-qq-green-dark rounded-full transition active:scale-95 backdrop-blur-sm",children:M.jsx(Iy,{size:18})})]})]}),_&&M.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/50 backdrop-blur-[2px]",children:M.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-qq-green rounded-full animate-spin"})}),d==="home"&&M.jsxs("div",{className:"p-6 animate-fade-in space-y-6",children:[M.jsxs("div",{className:"flex justify-between items-end",children:[M.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Produtos"}),M.jsxs("button",{onClick:()=>ee(!0),className:"bg-qq-yellow hover:bg-qq-yellow-dark text-slate-900 px-4 py-2 rounded-xl text-sm font-bold shadow-md shadow-orange-100 transition flex items-center gap-2 active:scale-95",children:[M.jsx(Ql,{size:18})," Novo"]})]}),M.jsxs("div",{className:"relative group",children:[M.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:M.jsx(Cg,{className:"h-5 w-5 text-slate-400 group-focus-within:text-qq-green transition-colors"})}),M.jsx("input",{type:"text",placeholder:"Buscar nome ou cdigo...",value:k,onChange:Y=>j(Y.target.value),className:"block w-full pl-11 pr-4 py-3.5 bg-white border-2 border-slate-100 rounded-2xl text-slate-700 focus:outline-none focus:border-qq-green focus:ring-4 focus:ring-qq-green/10 transition-all shadow-sm"})]}),M.jsx("div",{className:"space-y-3",children:Ar.length===0?M.jsxs("div",{className:"text-center py-12 opacity-50",children:[M.jsx(vg,{size:48,className:"mx-auto mb-3 text-slate-400"}),M.jsx("p",{children:"Nenhum produto encontrado"})]}):Ar.map(Y=>M.jsxs("div",{onClick:()=>cr(Y),className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center active:scale-[0.98] transition-transform cursor-pointer",children:[M.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[M.jsx("h3",{className:"font-bold text-slate-800 truncate",children:Y.name}),M.jsx("div",{className:"mt-1 inline-flex items-center px-2 py-0.5 rounded bg-slate-100 text-slate-500 text-xs font-mono",children:Y.id})]}),M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsxs("div",{className:"text-right",children:[M.jsx("div",{className:`text-[10px] font-bold uppercase mb-0.5 px-1.5 py-0.5 rounded-md inline-block ${Y.qty<5?"bg-red-50 text-red-600":"bg-green-50 text-green-600"}`,children:Y.qty<5?"Baixo":"Ok"}),M.jsx("div",{className:"text-xl font-bold text-slate-700",children:Y.qty})]}),M.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),Ve(Y)},className:"p-3 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-400 hover:text-qq-green transition-colors",children:M.jsx(lf,{size:20})})]})]},Y.id))})]}),d==="orders"&&M.jsxs("div",{className:"p-6 animate-fade-in space-y-6",children:[M.jsxs("div",{className:"flex justify-between items-end",children:[M.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Pedidos"}),M.jsxs("button",{onClick:Bs,className:"bg-qq-green hover:bg-qq-green-dark text-white px-4 py-2 rounded-xl text-sm font-bold shadow-md shadow-green-100 transition flex items-center gap-2 active:scale-95",children:[M.jsx(Ql,{size:18})," Criar Pedido"]})]}),M.jsx("div",{className:"space-y-4",children:b.length===0?M.jsxs("div",{className:"text-center py-12 opacity-50",children:[M.jsx(Sg,{size:48,className:"mx-auto mb-3 text-slate-400"}),M.jsx("p",{children:"Nenhum pedido cadastrado"})]}):b.map(Y=>{const Ce=Y.items.reduce((Rt,nr)=>Rt+nr.qtyRequested,0),je=Y.items.reduce((Rt,nr)=>Rt+nr.qtyPicked,0),Qe=Ce>0?je/Ce*100:0;return M.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 active:scale-[0.99] transition-transform",children:[M.jsxs("div",{className:"flex justify-between items-start mb-2",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs("h3",{className:"font-bold text-slate-800",children:["#",Y.orderNumber]}),M.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase ${Y.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Y.status==="completed"?"Concludo":"Pendente"})]}),M.jsx("p",{className:"text-sm font-medium text-slate-600",children:Y.customerName}),M.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[new Date(Y.date).toLocaleDateString("pt-BR"),"  Mat: ",Y.matricula]})]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx("button",{onClick:()=>Vi(Y),className:"p-2 text-slate-400 hover:text-qq-green hover:bg-green-50 rounded-lg transition",children:M.jsx(Ly,{size:18})}),M.jsx("button",{onClick:()=>we(Y.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",children:M.jsx(Tg,{size:18})})]})]}),M.jsxs("div",{onClick:()=>al(Y),className:"mt-3 cursor-pointer group",children:[M.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 mb-1 group-hover:text-qq-green transition-colors",children:[M.jsx("span",{children:"Separao"}),M.jsxs("span",{children:[je,"/",Ce," itens"]})]}),M.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:M.jsx("div",{className:`h-full transition-all duration-500 ${Qe===100?"bg-qq-green":"bg-qq-yellow"}`,style:{width:`${Qe}%`}})})]})]},Y.id)})})]}),d==="scan"&&M.jsxs("div",{className:"p-6 animate-fade-in flex flex-col h-[80vh]",children:[M.jsx("h2",{className:"text-2xl font-bold text-slate-800 text-center mb-6",children:"Ler Cdigo"}),M.jsxs("div",{onClick:()=>{ce("global"),re(!0)},className:"flex-1 bg-slate-800 rounded-3xl flex flex-col items-center justify-center text-white/50 cursor-pointer hover:bg-slate-700 transition-colors shadow-inner relative overflow-hidden group",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-slate-900 to-transparent opacity-50"}),M.jsx(lf,{size:64,className:"mb-4 group-hover:scale-110 transition-transform duration-300 text-white"}),M.jsx("p",{className:"font-medium text-white",children:"Toque para abrir a cmera"})]}),M.jsx("div",{className:"mt-8",children:M.jsxs("div",{className:"flex gap-3",children:[M.jsx("input",{id:"manual-code-input",type:"text",placeholder:"Digitar cdigo...",className:"flex-1 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-slate-700 focus:border-qq-green outline-none"}),M.jsx("button",{onClick:ut,className:"bg-qq-green text-white px-5 rounded-xl shadow-lg active:scale-95 transition-transform",children:M.jsx(Wp,{size:24})})]})})]}),d==="history"&&M.jsxs("div",{className:"p-6 animate-fade-in space-y-4",children:[M.jsxs("div",{className:"flex justify-between items-center mb-2",children:[M.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Histrico"}),M.jsxs("button",{onClick:Ms,className:"text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 transition shadow-sm shadow-red-200",children:[M.jsx(Tg,{size:14})," Limpar Tudo"]})]}),M.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-100 shadow-sm grid grid-cols-2 gap-3",children:[M.jsxs("div",{className:"col-span-2 text-xs font-bold text-slate-400 uppercase tracking-wide flex items-center gap-1",children:[M.jsx(Eg,{size:12})," Filtro por Data"]}),M.jsxs("div",{children:[M.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"De:"}),M.jsx("input",{type:"date",value:J,onChange:Y=>ae(Y.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-2 text-xs focus:border-qq-green outline-none text-slate-700"})]}),M.jsxs("div",{children:[M.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"At:"}),M.jsx("input",{type:"date",value:ue,onChange:Y=>W(Y.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-2 text-xs focus:border-qq-green outline-none text-slate-700"})]})]}),M.jsx("div",{className:"space-y-4 pt-2",children:ai.length===0?M.jsxs("div",{className:"text-center py-12 opacity-50",children:[M.jsx(_g,{size:48,className:"mx-auto mb-3 text-slate-400"}),M.jsx("p",{children:x.length>0?"Nenhum item neste perodo":"Sem movimentaes recentes"})]}):ai.map(Y=>M.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-100 shadow-sm flex items-start gap-4",children:[M.jsx("div",{className:`mt-1 p-2 rounded-lg ${Y.qty>0?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:Y.qty>0?M.jsx(Ql,{size:16}):M.jsx(af,{size:16})}),M.jsxs("div",{className:"flex-1 min-w-0",children:[M.jsxs("div",{className:"flex justify-between items-start",children:[M.jsx("h4",{className:"font-bold text-slate-800 truncate",children:Y.prodName}),M.jsx("span",{className:`font-bold ${Y.qty>0?"text-green-600":"text-qq-yellow"}`,children:Y.qty>0?`+${Y.qty}`:Y.qty})]}),M.jsxs("div",{className:"text-xs text-slate-400 mt-1 flex flex-wrap gap-2",children:[M.jsx("span",{children:new Date(Y.date).toLocaleString("pt-BR")}),Y.matricula&&M.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 font-medium",children:["Mat: ",Y.matricula]})]}),Y.obs&&M.jsxs("div",{className:"mt-2 text-xs bg-slate-50 text-slate-600 p-2 rounded italic border border-slate-100",children:['"',Y.obs,'"']})]})]},Y.id))})]}),M.jsxs("nav",{className:"fixed bottom-0 w-full max-w-[480px] bg-white border-t border-slate-100 flex justify-around py-2 pb-safe z-40 shadow-[0_-4px_20px_rgba(0,0,0,0.03)]",children:[M.jsxs("button",{onClick:()=>a("home"),className:`flex flex-col items-center p-2 transition-colors ${d==="home"?"text-qq-green":"text-slate-400 hover:text-slate-600"}`,children:[M.jsx(Ag,{size:24,className:d==="home"?"fill-current opacity-20":""}),M.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Estoque"})]}),M.jsxs("button",{onClick:()=>a("orders"),className:`flex flex-col items-center p-2 transition-colors ${d==="orders"?"text-qq-green":"text-slate-400 hover:text-slate-600"}`,children:[M.jsx(Sg,{size:24,className:d==="orders"?"fill-current opacity-20":""}),M.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Pedidos"})]}),M.jsx("div",{className:"relative -top-6",children:M.jsx("button",{onClick:()=>{ce("global"),a("scan")},className:"w-16 h-16 rounded-full bg-gradient-to-br from-qq-yellow to-qq-yellow-dark text-white flex items-center justify-center shadow-lg shadow-orange-200 border-4 border-slate-50 transform transition active:scale-90",children:M.jsx(lf,{size:28})})}),M.jsxs("button",{onClick:()=>a("history"),className:`flex flex-col items-center p-2 transition-colors ${d==="history"?"text-qq-green":"text-slate-400 hover:text-slate-600"}`,children:[M.jsx(uy,{size:24,className:d==="history"?"fill-current opacity-20":""}),M.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Histrico"})]}),M.jsxs("button",{onClick:()=>We(!0),className:"flex flex-col items-center p-2 transition-colors text-slate-400 hover:text-slate-600",children:[M.jsx(Og,{size:24}),M.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Importar"})]})]}),xe&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl",children:[M.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[M.jsx("div",{className:"bg-qq-green/10 p-2 rounded-lg text-qq-green",children:M.jsx(hy,{size:24})}),M.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Conexo"})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"URL do Projeto"}),M.jsx("input",{type:"text",value:st.url,onChange:Y=>Nt({...st,url:Y.target.value}),className:"w-full mt-1 border-2 border-slate-200 rounded-xl p-2.5 text-sm focus:border-qq-green outline-none font-mono"})]}),M.jsxs("div",{children:[M.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Chave de API (Anon)"}),M.jsx("input",{type:"password",value:st.key,onChange:Y=>Nt({...st,key:Y.target.value}),className:"w-full mt-1 border-2 border-slate-200 rounded-xl p-2.5 text-sm focus:border-qq-green outline-none font-mono"})]})]}),M.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[M.jsx("button",{onClick:Ds,className:"bg-qq-green text-white py-3 rounded-xl font-bold hover:bg-qq-green-dark transition",children:"Salvar & Conectar"}),N&&M.jsx("button",{onClick:Jn,className:"bg-white border border-slate-200 text-slate-600 py-3 rounded-xl font-bold hover:bg-slate-50 transition",children:"Desconectar"}),M.jsx("button",{onClick:()=>Le(!1),className:"text-slate-400 text-sm font-medium py-2",children:"Cancelar"})]})]})}),_e&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl",children:[M.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:"Novo Produto"}),M.jsxs("div",{className:"space-y-4",children:[M.jsx("input",{type:"text",placeholder:"Cdigo (Barras/QR)",value:un.id,onChange:Y=>Zt({...un,id:Y.target.value}),className:"w-full border-2 border-slate-200 rounded-xl p-3 focus:border-qq-green outline-none"}),M.jsx("input",{type:"text",placeholder:"Nome do Produto",value:un.name,onChange:Y=>Zt({...un,name:Y.target.value}),className:"w-full border-2 border-slate-200 rounded-xl p-3 focus:border-qq-green outline-none"}),M.jsx("input",{type:"number",placeholder:"Quantidade Inicial",value:un.qty,onChange:Y=>Zt({...un,qty:Y.target.value}),className:"w-full border-2 border-slate-200 rounded-xl p-3 focus:border-qq-green outline-none"})]}),M.jsxs("div",{className:"flex gap-3 mt-6",children:[M.jsx("button",{onClick:()=>ee(!1),className:"flex-1 bg-slate-100 text-slate-700 py-3 rounded-xl font-bold",children:"Cancelar"}),M.jsx("button",{onClick:tr,className:"flex-1 bg-qq-green text-white py-3 rounded-xl font-bold",children:"Salvar"})]})]})}),Ue&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl flex flex-col max-h-[90vh]",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h3",{className:"text-xl font-bold text-slate-800",children:ke.orderNumber?"Editar Pedido":"Novo Pedido"}),M.jsx("button",{onClick:()=>et(!1),className:"text-slate-400 hover:text-slate-600",children:M.jsx(qu,{size:24})})]}),M.jsxs("div",{className:"overflow-y-auto flex-1 space-y-4 pr-1",children:[M.jsxs("div",{className:"space-y-3",children:[M.jsxs("div",{className:"flex gap-3",children:[M.jsxs("div",{className:"flex-1",children:[M.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"N Pedido"}),M.jsxs("div",{className:"flex items-center border-2 border-slate-200 rounded-xl p-2 mt-1 focus-within:border-qq-green",children:[M.jsx(my,{size:16,className:"text-slate-400 mr-2"}),M.jsx("input",{type:"text",value:ke.orderNumber,onChange:Y=>Xe({...ke,orderNumber:Y.target.value}),className:"w-full outline-none text-sm font-bold",placeholder:"001"})]})]}),M.jsxs("div",{className:"flex-1",children:[M.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Data"}),M.jsxs("div",{className:"flex items-center border-2 border-slate-200 rounded-xl p-2 mt-1 focus-within:border-qq-green",children:[M.jsx(Eg,{size:16,className:"text-slate-400 mr-2"}),M.jsx("input",{type:"date",value:ke.date,onChange:Y=>Xe({...ke,date:Y.target.value}),className:"w-full outline-none text-sm"})]})]})]}),M.jsxs("div",{children:[M.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Cliente / Destino"}),M.jsxs("div",{className:"flex items-center border-2 border-slate-200 rounded-xl p-2 mt-1 focus-within:border-qq-green",children:[M.jsx(qy,{size:16,className:"text-slate-400 mr-2"}),M.jsx("input",{type:"text",value:ke.customerName,onChange:Y=>Xe({...ke,customerName:Y.target.value}),className:"w-full outline-none text-sm font-bold",placeholder:"Nome..."})]})]}),M.jsxs("div",{className:"flex gap-3",children:[M.jsxs("div",{className:"flex-1",children:[M.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Matrcula"}),M.jsx("input",{type:"text",value:ke.matricula,onChange:Y=>Xe({...ke,matricula:Y.target.value}),className:"w-full border-2 border-slate-200 rounded-xl p-2 mt-1 text-sm outline-none focus:border-qq-green",placeholder:"12345"})]}),M.jsxs("div",{className:"flex-[2]",children:[M.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Observaes"}),M.jsx("input",{type:"text",value:ke.obs||"",onChange:Y=>Xe({...ke,obs:Y.target.value}),className:"w-full border-2 border-slate-200 rounded-xl p-2 mt-1 text-sm outline-none focus:border-qq-green",placeholder:"Opcional..."})]})]})]}),M.jsx("hr",{className:"border-slate-100"}),M.jsxs("div",{children:[M.jsx("h4",{className:"font-bold text-slate-700 mb-2",children:"Itens do Pedido"}),M.jsxs("div",{className:"relative mb-3",children:[M.jsx(Cg,{size:16,className:"absolute left-3 top-3 text-slate-400"}),M.jsx("input",{type:"text",placeholder:"Buscar produto para adicionar...",value:_r,onChange:Y=>Te(Y.target.value),className:"w-full pl-9 p-2.5 bg-slate-50 rounded-xl text-sm border border-slate-200 outline-none focus:border-qq-green"}),_r&&M.jsx("div",{className:"absolute top-full left-0 right-0 bg-white shadow-xl border border-slate-100 rounded-xl mt-1 z-10 max-h-40 overflow-y-auto",children:kn.map(Y=>M.jsxs("div",{onClick:()=>{Bt(Y),Te("")},className:"p-2 hover:bg-slate-50 cursor-pointer flex justify-between items-center border-b border-slate-50 last:border-0",children:[M.jsx("span",{className:"text-sm font-medium truncate flex-1",children:Y.name}),M.jsxs("span",{className:"text-xs bg-slate-100 px-1.5 rounded ml-2",children:["Est: ",Y.qty]})]},Y.id))})]}),M.jsx("div",{className:"space-y-2",children:ke.items.length===0?M.jsx("p",{className:"text-center text-xs text-slate-400 py-4 italic",children:"Nenhum item adicionado"}):ke.items.map(Y=>M.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2.5 rounded-xl border border-slate-100",children:[M.jsx("div",{className:"flex-1 min-w-0 pr-2",children:M.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:Y.productName})}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("button",{onClick:()=>Ze(Y.productId,Y.qtyRequested-1),className:"w-6 h-6 flex items-center justify-center bg-white border border-slate-200 rounded hover:bg-red-50 hover:text-red-500",children:M.jsx(af,{size:12})}),M.jsx("span",{className:"text-sm font-bold w-6 text-center",children:Y.qtyRequested}),M.jsx("button",{onClick:()=>Ze(Y.productId,Y.qtyRequested+1),className:"w-6 h-6 flex items-center justify-center bg-white border border-slate-200 rounded hover:bg-green-50 hover:text-green-600",children:M.jsx(Ql,{size:12})})]})]},Y.productId))})]})]}),M.jsx("div",{className:"pt-4 mt-2 border-t border-slate-100",children:M.jsx("button",{onClick:Ft,className:"w-full bg-qq-green hover:bg-qq-green-dark text-white py-3 rounded-xl font-bold shadow-lg shadow-green-100 transition active:scale-95",children:"Salvar Pedido"})})]})}),ot&&pe&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl flex flex-col max-h-[90vh]",children:[M.jsxs("div",{className:"flex justify-between items-start mb-4",children:[M.jsxs("div",{children:[M.jsxs("h3",{className:"text-xl font-bold text-slate-800",children:["Separao #",pe.orderNumber]}),M.jsx("p",{className:"text-sm text-slate-500",children:pe.customerName})]}),M.jsx("button",{onClick:()=>H(!1),className:"bg-slate-100 p-2 rounded-full text-slate-500",children:M.jsx(qu,{size:20})})]}),M.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 mb-4 text-xs text-blue-800 flex justify-between items-center",children:[M.jsxs("div",{children:[M.jsxs("p",{className:"font-bold flex items-center gap-1",children:[M.jsx(Py,{size:12})," Modo Separao:"]}),M.jsx("p",{children:"Toque para baixar ou use a cmera."})]}),M.jsx("button",{onClick:pi,className:"bg-blue-600 text-white p-2.5 rounded-xl shadow-lg shadow-blue-200 active:scale-95 transition-transform",children:M.jsx(Oy,{size:20})})]}),M.jsx("div",{className:"overflow-y-auto flex-1 space-y-3",children:pe.items.map(Y=>{var Qe;const Ce=Y.qtyPicked>=Y.qtyRequested,je=((Qe=l.find(Rt=>Rt.id===Y.productId))==null?void 0:Qe.qty)||0;return M.jsxs("div",{onClick:()=>!Ce&&Gt(Y),className:`p-3 rounded-xl border transition-all ${Ce?"bg-green-50 border-green-200 opacity-60":"bg-white border-slate-200 shadow-sm active:scale-[0.98] cursor-pointer hover:border-qq-green"}`,children:[M.jsxs("div",{className:"flex justify-between items-center mb-1",children:[M.jsx("p",{className:`font-bold ${Ce?"text-green-800":"text-slate-800"}`,children:Y.productName}),Ce&&M.jsx(By,{size:18,className:"text-green-600"})]}),M.jsxs("div",{className:"flex justify-between items-center text-sm",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"text-slate-500",children:"Separado:"}),M.jsxs("span",{className:`font-mono font-bold ${Ce?"text-green-700":"text-slate-800"}`,children:[Y.qtyPicked," / ",Y.qtyRequested]})]}),!Ce&&M.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${je>0?"bg-slate-100 text-slate-600":"bg-red-100 text-red-600 font-bold"}`,children:["Estoque: ",je]})]})]},Y.productId)})}),pe.status==="completed"&&M.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-800 text-center rounded-xl font-bold border border-green-200",children:"Pedido Finalizado"})]})}),Me&&le&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl",children:[M.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl mb-6",children:[M.jsxs("button",{onClick:()=>Mn("out"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${rn==="out"?"bg-white text-qq-yellow shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[M.jsx(Yp,{size:16})," Sada"]}),M.jsxs("button",{onClick:()=>Mn("in"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${rn==="in"?"bg-white text-qq-green shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[M.jsx(Qp,{size:16})," Entrada"]})]}),M.jsxs("div",{className:"text-center mb-6",children:[M.jsx("h3",{className:"text-2xl font-bold text-slate-800 leading-tight",children:le.name}),M.jsxs("p",{className:"text-slate-500 font-medium mt-1",children:["Em estoque: ",M.jsx("span",{className:"font-bold text-slate-800",children:le.qty})]})]}),M.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[M.jsx("button",{onClick:()=>$e({...cn,qty:Math.max(1,cn.qty-1)}),className:"w-12 h-12 rounded-full bg-slate-100 text-slate-800 font-bold text-xl hover:bg-slate-200 transition",children:M.jsx(af,{size:20,className:"mx-auto"})}),M.jsx("div",{className:`w-24 h-16 border-2 rounded-2xl flex items-center justify-center ${rn==="in"?"border-green-100":"border-orange-100"}`,children:M.jsx("input",{type:"number",value:cn.qty,onChange:Y=>$e({...cn,qty:parseInt(Y.target.value)||1}),className:`w-full text-center text-2xl font-bold outline-none bg-transparent ${rn==="in"?"text-qq-green":"text-qq-yellow"}`})}),M.jsx("button",{onClick:()=>$e({...cn,qty:cn.qty+1}),className:"w-12 h-12 rounded-full bg-slate-100 text-slate-800 font-bold text-xl hover:bg-slate-200 transition",children:M.jsx(Ql,{size:20,className:"mx-auto"})})]}),M.jsxs("div",{className:"space-y-3",children:[M.jsx("input",{type:"text",placeholder:"Matrcula do Funcionrio",value:cn.matricula,onChange:Y=>$e({...cn,matricula:Y.target.value}),className:`w-full border-2 rounded-xl p-3 text-sm outline-none ${rn==="in"?"focus:border-qq-green border-slate-100":"focus:border-qq-yellow border-slate-100"}`}),M.jsx("textarea",{placeholder:"Observao (Opcional)",value:cn.obs,onChange:Y=>$e({...cn,obs:Y.target.value}),rows:2,className:`w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-sm outline-none resize-none ${rn==="in"?"focus:border-qq-green":"focus:border-qq-yellow"}`})]}),M.jsxs("div",{className:"flex gap-3 mt-6",children:[M.jsx("button",{onClick:()=>{de(!1),ve(null)},className:"flex-1 bg-slate-100 text-slate-700 py-3 rounded-xl font-bold",children:"Cancelar"}),M.jsx("button",{onClick:Bn,className:`flex-1 text-white py-3 rounded-xl font-bold shadow-lg transition active:scale-95 ${rn==="in"?"bg-qq-green hover:bg-qq-green-dark shadow-green-200":"bg-qq-yellow hover:bg-qq-yellow-dark shadow-orange-200 text-slate-900"}`,children:rn==="in"?"Adicionar":"Baixar"})]})]})}),Hn&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl",children:[M.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6 text-center",children:"Exportar Dados"}),M.jsxs("div",{className:"space-y-3",children:[M.jsxs("button",{onClick:()=>av(l),className:"w-full flex items-center p-4 rounded-xl border-2 border-qq-green/20 bg-green-50/50 text-qq-green font-bold hover:bg-green-50 transition",children:[M.jsx(Ag,{size:24,className:"mr-3"}),"Estoque Atual (.csv)"]}),M.jsxs("button",{onClick:()=>lv(x),className:"w-full flex items-center p-4 rounded-xl border-2 border-qq-yellow/20 bg-yellow-50/50 text-yellow-700 font-bold hover:bg-yellow-50 transition",children:[M.jsx(_g,{size:24,className:"mr-3"}),"Histrico (.csv)"]})]}),M.jsx("button",{onClick:()=>At(!1),className:"w-full mt-6 bg-slate-100 py-3 rounded-xl font-bold text-slate-600",children:"Fechar"})]})}),Oe&&M.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:M.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl",children:[M.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 text-center",children:"Importar Pedidos"}),M.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 text-xs text-slate-600 mb-6",children:[M.jsx("p",{className:"font-bold mb-2",children:"Formato do CSV (separado por ;):"}),M.jsx("code",{className:"block bg-white p-2 rounded border border-slate-200 text-slate-500 mb-2 overflow-x-auto whitespace-nowrap",children:"NumeroPedido;Cliente;Matricula;Data;CodProduto;Qtd"}),M.jsx("p",{children:"Exemplo:"}),M.jsx("code",{className:"block bg-white p-2 rounded border border-slate-200 text-slate-500 overflow-x-auto whitespace-nowrap",children:"101;Joo Silva;1234;2023-10-25;789101;2"})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsx("input",{type:"file",accept:".csv",ref:Er,onChange:xi,className:"hidden",id:"csv-upload"}),M.jsxs("label",{htmlFor:"csv-upload",className:"w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-slate-300 rounded-xl cursor-pointer hover:border-qq-green hover:bg-green-50/50 transition-colors",children:[M.jsx(Og,{size:32,className:"text-slate-400 mb-2"}),M.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Toque para selecionar arquivo"})]})]}),M.jsx("button",{onClick:()=>We(!1),className:"w-full mt-6 bg-slate-100 py-3 rounded-xl font-bold text-slate-600",children:"Cancelar"})]})}),bt&&M.jsx(kv,{onScan:Xi,onClose:()=>re(!1)}),Ee&&M.jsx(Yv,{product:Ee,onClose:()=>Ve(null)})]})},hx=document.getElementById("root");if(!hx)throw new Error("Failed to find the root element");const Zv=Fp.createRoot(hx);Zv.render(M.jsx(Dp.StrictMode,{children:M.jsx(Wv,{})}));
